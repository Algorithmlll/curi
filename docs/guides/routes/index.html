<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All About Routes Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/curi/static/css/prism.css" rel="stylesheet">
    <link href="/curi/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot="" data-reactid="1" data-react-checksum="-1202236651"><header data-reactid="2"><nav data-reactid="3"><ul data-reactid="4"><li data-reactid="5"><a class="home-link" href="/curi/" data-reactid="6">Curi</a></li><li data-reactid="7"><a href="/curi/packages/" data-reactid="8">Packages</a></li><li data-reactid="9"><a href="/curi/guides/getting-started/" data-reactid="10">Guides</a></li><li data-reactid="11"><a href="/curi/examples/" data-reactid="12">Examples</a></li><li data-reactid="13"><a href="https://github.com/pshrmn/curi" data-reactid="14">GitHub</a></li></ul></nav></header><main data-reactid="15"><div class="guide" data-reactid="16"><div class="content" data-reactid="17"><h1 data-reactid="18">All About Routes</h1><p data-reactid="19">Routes are simply JavaScript objects with two required props: name and path. There are also a number of other props that you can use to enhance the routes. We will cover these below.</p><pre class="language-javascript" data-reactid="20">{
  name: &#x27;Home&#x27;,
  path: &#x27;&#x27;
};</pre><div class="section" data-reactid="21"><h2 data-reactid="22">Matching routes</h2><p data-reactid="23">First, we should cover how route matching works. Curi takes an array of route objects. Whenever Curi receives a new location, it will walk over the route objects in the order that they are defined in the array.</p><p data-reactid="24">Sometimes a route&#x27;s path with only partially match the location&#x27;s pathname. When this happens, the matching behavior will vary based on the route&#x27;s props. By default, routes perform exact matching. This means that when the route only matches part of the pathname, it does not count as a match.</p><pre class="language-javascript" data-reactid="25">// when the pathname is &#x27;/a/Run+The+Jewels+3/Hey+Kids&#x27;,
// the Album route will partially match the pathname. However,
// Curi looks for complete matches, so it will move on to the
// next route
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;
}</pre><p data-reactid="26">However, if the route has children, then Curi will check if any of those routes form a complete match before moving on to the next route in the routes array.</p><pre class="language-javascript" data-reactid="27">// when the pathname is &#x27;/a/Coloring+Book/All+Night&#x27;,
// the Album route will partially match the pathname. Then,
// its child route Song will be tested and fully match the pathname.
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;,
  children: [
    {
      name: &#x27;Song&#x27;,
      path: &#x27;:title&#x27;
    }
  ]
}</pre><p data-reactid="28"><!-- react-text: 29 -->Another possibility happens when you use the <!-- /react-text --><code class="language-javascript" data-reactid="30">pathOptions</code><!-- react-text: 31 --> object to set<!-- /react-text --><!-- react-text: 32 --> <!-- /react-text --><code class="language-javascript" data-reactid="33">end: false</code><!-- react-text: 34 -->. When you do that, then a route the partially matches will consider itself matched.<!-- /react-text --></p><pre class="language-javascript" data-reactid="35">// when the pathname is &#x27;/a/Good+Kid,+M.A.A.D+City/Poetic+Justice&#x27;,
// the Album route will partially match. However, because it sets
// end to false, the partial match will be used.
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:albumID&#x27;,
  pathOptions: {
    end: false
  }
}</pre><p data-reactid="36"><!-- react-text: 37 -->If none of your routes match a pathname, then Curi will set a &quot;404&quot; status on the response object. The body property of the response will also be <!-- /react-text --><code class="language-javascript" data-reactid="38">undefined</code><!-- react-text: 39 -->, so it is important that your application checks the response&#x27;s status when it goes to render a response. You can also add a wildcard route (<!-- /react-text --><code class="language-javascript" data-reactid="40">path: &#x27;*&#x27;</code><!-- react-text: 41 -->) to the end of your routes array, and that route will always match. You may want to still manually set the status to &quot;404&quot; for the wildcard route, but it is not required.<!-- /react-text --></p></div><div class="section" data-reactid="42"><h2 data-reactid="43">Route properties</h2><div class="subsection" data-reactid="44"><h3 data-reactid="45">name</h3><p data-reactid="46">A unique identifier. This should be a string or a symbol.</p></div><div class="subsection" data-reactid="47"><h3 data-reactid="48">path</h3><p data-reactid="49"><!-- react-text: 50 -->A path-to-regexp style string. This should <!-- /react-text --><strong data-reactid="51">not</strong><!-- react-text: 52 --> have a leading slash. The string will be passed to path-to-regexp to generate a regular expression. Any<!-- /react-text --><!-- react-text: 53 --> <!-- /react-text --><a href="https://github.com/pillarjs/path-to-regexp#parameters" data-reactid="54">parameters</a><!-- react-text: 55 --> will be identified so that they can be parsed out when matching against a location&#x27;s pathname.<!-- /react-text --></p><div class="note" data-reactid="56"><strong data-reactid="57">Note:</strong><!-- react-text: 58 --> <!-- /react-text --><!-- react-text: 59 -->While path-to-regexp supports arrays and RegExps, only string paths are supported here. This is because the path must also be reversible to create a pathname given params.<!-- /react-text --></div></div><div class="subsection" data-reactid="60"><h3 data-reactid="61">pathOptions</h3><p data-reactid="62"><!-- react-text: 63 -->If you need to provide different path options than<!-- /react-text --><!-- react-text: 64 --> <!-- /react-text --><a href="https://github.com/pillarjs/path-to-regexp#usage" data-reactid="65">the defaults</a><!-- react-text: 66 --> used by path-to-regexp, you should specify them with a <!-- /react-text --><code class="language-javascript" data-reactid="67">pathOptions</code><!-- react-text: 68 --> object.<!-- /react-text --></p><div class="note" data-reactid="69"><strong data-reactid="70">Note:</strong><!-- react-text: 71 --> <!-- /react-text --><!-- react-text: 72 -->If a route has a children array property, it will <!-- /react-text --><strong data-reactid="73">always</strong><!-- react-text: 74 --> have the <!-- /react-text --><code class="language-javascript" data-reactid="75">end</code><!-- react-text: 76 --> <!-- /react-text --><!-- react-text: 77 --> path option set to false.<!-- /react-text --></div></div><div class="subsection" data-reactid="78"><h3 data-reactid="79">body</h3><p data-reactid="80">The body property gives you the opportunity to set the body property of a response for a given route. This must be a function and its return value will be what is set as the response object&#x27;s body property.</p><pre class="language-javascript" data-reactid="81">// when the user visits /contact, the response object&#x27;s body
// property will be the Contact value
const contact = {
  name: &#x27;Contact&#x27;,
  path: &#x27;contact&#x27;,
  body: () =&gt; Contact
};</pre></div><div class="subsection" data-reactid="82"><h3 data-reactid="83">title</h3><p data-reactid="84"><!-- react-text: 85 -->You can use the title property of a route to specify a title string that should be set on the response when that route matches. This can either be a string or a function. If it is a string, then<!-- /react-text --><code class="language-javascript" data-reactid="86">response.title</code><!-- react-text: 87 --> will be set to the value of <!-- /react-text --><code class="language-javascript" data-reactid="88">route.title</code><!-- react-text: 89 -->. If it is a function, it will be called (and passed the <!-- /react-text --><code class="language-javascript" data-reactid="90">response.params</code><!-- react-text: 91 --> and<!-- /react-text --><!-- react-text: 92 --> <!-- /react-text --><code class="language-javascript" data-reactid="93">response.data</code><!-- react-text: 94 --> values) to generate the title string.<!-- /react-text --></p><p data-reactid="95">If a route does not have a title property, when it matches, the response&#x27;s title property will be an empty string.</p><pre class="language-javascript" data-reactid="96">// as a string
{
  name: &#x27;Contact&#x27;,
  path: &#x27;contact&#x27;,
  title: &#x27;How to contact us&#x27;
}

// as a function
{
  name: &#x27;Contact Method&#x27;,
  path: &#x27;:method&#x27;,
  title: (params, data) =&gt; `Contact via ${params.method}`
}</pre></div><div class="subsection" data-reactid="97"><h3 data-reactid="98">children</h3></div><p data-reactid="99">An optional array of route objects. Any child routes will be matched relative to their parent route&#x27;s path. This means that if a parent route&#x27;s path string is &#x27;one&#x27; and a child route&#x27;s path string is &#x27;two&#x27;, the child will match when the pathname is &#x27;one/two&#x27;.</p><div class="subsection" data-reactid="100"><h3 data-reactid="101">preload</h3><p data-reactid="102"><!-- react-text: 103 -->A function that will only be called the first time that a route matches. This should only be used for loading resources that are required for the route to display properly. For example, if you are doing code splitting with Webpack using <!-- /react-text --><code class="language-javascript" data-reactid="104">import()</code><!-- react-text: 105 -->, you would load the modules in preload.<!-- /react-text --></p><p data-reactid="106">The preload function must return a Promise.</p><pre class="language-javascript" data-reactid="107">const about = {
  name: &#x27;About&#x27;,
  path: &#x27;about&#x27;,
  preload: () =&gt; {
    return import(&#x27;./components/About&#x27;)
      .then(module =&gt; AsyncStore.register(module.default));
  }
};</pre></div><div class="subsection" data-reactid="108"><h3 data-reactid="109">load</h3><p data-reactid="110">A function that can be used for data fetching as well as for triggering redirects. The load function will be passed the params object that is parsed from the location&#x27;s pathname (using the route and its ancestor&#x27;s paths) and the modifiers object that can be used to modify the response object that will be created.</p><p data-reactid="111">Like preload, load must return a Promise.</p><pre class="language-javascript" data-reactid="112">const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  load: (params, mod) =&gt; {
    return fetch(`/api/users/${params.id}`)
      .then(resp =&gt; JSON.parse(resp))
      .then(data =&gt; mod.setData(data);)
      .catch(err =&gt; {
        mod.fail(err);
        mod.setStatus(404);
      });
  }
}</pre><p data-reactid="113"><!-- react-text: 114 -->What is that modifiers object that gets passed to the load function? It contains a number of functions that you can use to modify the response. These functions are <!-- /react-text --><code class="language-javascript" data-reactid="115">redirect</code><!-- react-text: 116 -->, <!-- /react-text --><code class="language-javascript" data-reactid="117">fail</code><!-- react-text: 118 -->,<!-- /react-text --><!-- react-text: 119 --> <!-- /react-text --><code class="language-javascript" data-reactid="120">setStatus</code><!-- react-text: 121 -->, and <!-- /react-text --><code class="language-javascript" data-reactid="122">setData</code><!-- react-text: 123 -->.<!-- /react-text --></p><ul data-reactid="124"><li data-reactid="125"><code class="language-javascript" data-reactid="126">redirect(to, code)</code><!-- react-text: 127 --> - This allows you to turn the response into a redirect response. When you application receives a redirect response, it should redirect to the new location (using your history object) instead of re-rendering. If you do not provide a code, then 301 will be used. The <!-- /react-text --><code class="language-javascript" data-reactid="128">to</code><!-- react-text: 129 --> argument can be whatever you want it to be, you will just need to know how to deal with it in your render function.<!-- /react-text --></li><li data-reactid="130"><code class="language-javascript" data-reactid="131">fail(error)</code><!-- react-text: 132 --> - A method to call when something goes wrong. This will add an error property to the response.<!-- /react-text --></li><li data-reactid="133"><code class="language-javascript" data-reactid="134">setStatus(code)</code><!-- react-text: 135 --> - This method will set a new status for the response (the default status is 200 when a route matches and 404 when no routes match).<!-- /react-text --></li><li data-reactid="136"><code class="language-javascript" data-reactid="137">setData(data)</code><!-- react-text: 138 --> - The value passed to this method will be set as the response&#x27;s data property.<!-- /react-text --></li></ul></div></div><div data-reactid="139"><h2 data-reactid="140">Next</h2><p data-reactid="141"><!-- react-text: 142 -->Now that you know how to setup your routes, we can get to the good part: actually rendering your application using response objects. Check out the<!-- /react-text --><!-- react-text: 143 --> <!-- /react-text --><a href="/curi/guides/responses/" data-reactid="144">Rendering with Responses</a><!-- react-text: 145 --> guide to learn how.<!-- /react-text --></p></div></div><div class="sidebar" data-reactid="146"><h2 data-reactid="147">Guides</h2><ul data-reactid="148"><li data-reactid="149"><a href="/curi/guides/installation/" data-reactid="150">Installation</a></li><li data-reactid="151"><a href="/curi/guides/getting-started/" data-reactid="152">Getting Started</a></li><li data-reactid="153"><a class="active" href="/curi/guides/routes/" data-reactid="154">All About Routes</a></li><li data-reactid="155"><a href="/curi/guides/responses/" data-reactid="156">Rendering with Responses</a></li><li data-reactid="157"><a href="/curi/guides/addons/" data-reactid="158">Using Addons</a></li><li data-reactid="159"><a href="/curi/guides/side-effects/" data-reactid="160">Using Side Effects</a></li><li data-reactid="161"><a href="/curi/guides/response-caching/" data-reactid="162">Response Caching</a></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@15.6.1/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.min.js"></script>
    <script src="/curi/static/js/prism.js"></script>
    <script src="/curi/static/js/vendor.js"></script>
    <script src="/curi/static/js/bundle.js"></script>
  </body>
</html>
