<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tutorial Part 3: Curi Routes | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot=""><header><nav><ul><li><a class="home-link" href="/">Curi</a></li><li><a href="/packages">Packages</a></li><li><a href="/tutorial/01-introduction">Tutorial</a></li><li><a href="/guides/getting-started/">Guides</a></li><li><a href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main><div class="tutorial"><div class="content"><h1>Part 3: Curi Routes</h1><p>Now that we have our project setup, it is time to start thinking about the route structure of our website.</p><div><p>In this tutorial, we will be doing the following:</p><ul><li>Deciding what pages our website will contain.</li><li>Learning about basic route properties.</li><li>Creating route objects for each of our website&#x27;s pages.</li></ul></div><div class="section"><h2 id="pages">Pages<a class="header-link" href="/tutorial/03-routes#pages">#</a></h2><p>We should start by identifying the pages that we want to have in our website. This can always be modified later, but it is a good idea to know what pages you are going to need to create.</p><p>For this website, we will be creating the following pages:</p><ol><li>Home - the landing page for the website</li><li>Contact - a listing of how to contact the site&#x27;s creators</li><li>Book list - a list of all of the books available for purchase</li><li>Book - a page for each book</li><li>Checkout - a page to &quot;buy&quot; books that have been added to the shopping cart</li></ol><p>Additionally, we should have a 404 page that is displayed when the user visits a location that has no matching route.</p><p>Each page in our website must have a pathname associated with it. These may either be static (literal) or dynamic (include parts that change, like IDs).</p><ol><li>Home - <code class="language-javascript">/</code></li><li>Contact - <code class="language-javascript">/contact</code></li><li>Book list - <code class="language-javascript">/books</code></li><li>Book - <code class="language-javascript">/books/&lt;book id&gt;</code> e.g. <code class="language-javascript">/books/2468</code></li><li>Checkout - <code class="language-javascript">/checkout</code></li></ol></div><div class="section"><h2 id="routes">Routes<a class="header-link" href="/tutorial/03-routes#routes">#</a></h2><p>At their core, routes are a way to describe the valid pathnames for our website. With Curi, routes are simply JavaScript objects with some known properties. The two most important properties of a route object are <code class="language-javascript">name</code> and<!-- --> <code class="language-javascript">path</code>. The <code class="language-javascript">name</code> is a <strong>unique</strong> string that you will use to identify a particular route. The <code class="language-javascript">path</code> is a<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class="language-javascript">path-to-regexp</code></a> <!-- -->formatted string.</p><div class="note"><strong>Note:</strong> <code class="language-javascript">path-to-regexp</code> provides pathname matching. You give it a path string (possibly with special formatting) and it returns a regular expression that can be used for matching routes. The regular expression matching will be handled internally by Curi, so you only have to care about formatting path strings. Further along in this tutorial, we will cover the basics of how to do this. However, for advanced usage, you should check out the documention in the<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class="language-javascript">path-to-regexp</code></a> GitHub repo.</div><p>All of the base routes of our application should be placed in an array. Nested routes will be defined using a property of their parent route.</p><pre class="language-javascript">const routes = [];</pre><p>The first route that we will define is for our homepage. We can name it anything we want, but we&#x27;ll just call it &quot;Home&quot;. For the home page&#x27;s <code class="language-javascript">path</code>, we will use an empty string (<code class="language-javascript">&#x27;&#x27;</code>).</p><p>Up above, we said that the pathname for our &quot;Home&quot; route is<!-- --> <code class="language-javascript">/</code>. However, with Curi, <code class="language-javascript">path</code> strings never begin with a forward slash. For all of the pathnames for pages that are listed above, we just need to strip off the leading slash.</p><pre class="language-javascript">const routes = [
  { name: &#x27;Home&#x27;, path: &#x27;&#x27; }
];</pre><p>That is simple enough, yes? Let&#x27;s go ahead and add our &quot;Contact&quot; and &quot;Checkout&quot; routes. They should look just like our &quot;Home&quot; route.</p><pre class="language-javascript">const routes = [
  { name: &#x27;Home&#x27;, path: &#x27;&#x27; },
  { name: &#x27;Contact&#x27;, path: &#x27;contact&#x27; },
  { name: &#x27;Checkout&#x27;, path: &#x27;checkout&#x27; }
];</pre><p>Now, if a user visits <code class="language-javascript">https://&lt;our website domain&gt;/checkout</code>, our checkout page will match (and likewise for <code class="language-javascript">/contact</code> <!-- -->and our contact page).</p><p>We still have more routes to define, but there are two concepts to introduce first: path params and the <code class="language-javascript">children</code> property of route objects.</p><div class="aside"><h3 id="path-params">Path Params<a class="header-link" href="/tutorial/03-routes#path-params">#</a></h3><p>With <code class="language-javascript">path-to-regexp</code>, when you create a path string, it is normally interpreted literally. That means that the the path<!-- --> <code class="language-javascript">&#x27;products/hat&#x27;</code> will only match the location whose pathname is <code class="language-javascript">/products/hat</code>. What if we also have a shirt? And socks? And shorts? Do you want to define a path for each individual product? Of course not. Instead, <code class="language-javascript">path-to-regexp</code> allows us to define dynamic parts of pathnames using &quot;params&quot;.</p><p>What is a param? It is a way to tell <code class="language-javascript">path-to-regexp</code> to capture part of the pathname at a particular point and store its value using the param&#x27;s name. The param starts with a colon and then specifies the param&#x27;s name.</p><pre class="language-javascript">{ path: &#x27;product/:name&#x27; }</pre><p>Using the above path, we will capture the portion of the pathname that comes after <code class="language-javascript">product/</code> and store it in an object using the key &quot;name&quot;. When you visit <code class="language-javascript">&#x27;/products/hat&#x27;</code>,<!-- --> <code class="language-javascript">path-to-regexp</code> will match and return the params object<!-- --> <code class="language-javascript">{ name: &#x27;hat&#x27; }</code>. Likewise, <code class="language-javascript">&#x27;/products/shirt&#x27;</code> <!-- -->and <code class="language-javascript">&#x27;/products/shorts&#x27;</code> will capture &quot;shirt&quot; and &quot;shorts&quot; as the name param.</p><p>By default, a param will match all characters up until the next forward slash or the end of the string. You can also perform more specific matching, but that is outside of the scope of this tutorial.</p></div><div class="aside"><h3 id="children">Route Children<a class="header-link" href="/tutorial/03-routes#children">#</a></h3><p>Sometimes, you will have routes whose <code class="language-javascript">path</code> extends the path of another route. For example, you might have a route whose path is <code class="language-javascript">&#x27;parent&#x27;</code> and a child route with the path<!-- --> <code class="language-javascript">&#x27;parent/child&#x27;</code>.</p><p>Using the <code class="language-javascript">children</code> property of route objects, you can attach an array of child routes to a parent route. The <code class="language-javascript">path</code> <!-- -->of each child route will extend the parent route&#x27;s <code class="language-javascript">path</code>. That means that using the parent/child paths from above, we can define the parent route to have the path <code class="language-javascript">&#x27;parent&#x27;</code> and a child route whose path is <code class="language-javascript">&#x27;child&#x27;</code>. Curi will treat that child route as if its path is <code class="language-javascript">&#x27;parent/child&#x27;</code>.</p><pre class="language-javascript">{
  name: &#x27;Parent&#x27;,
  path: &#x27;parent&#x27;,
  children: [
    {
      name: &#x27;Child&#x27;,
      path: &#x27;child&#x27; // will match the pathname /parent/child
    }
  ]
}</pre></div><p>Now, we can go ahead and use path params and route children to define our book list/book routes.</p><p>For this tutorial, we will identify books from a pathname using their <code class="language-javascript">id</code>. We can name this anything we want, but &quot;id&quot; is simple and to the point.</p><pre class="language-javascript">const routes = [
  { name: &#x27;Home&#x27;, path: &#x27;&#x27; },
  { name: &#x27;Contact&#x27;, path: &#x27;contact&#x27; },
  { name: &#x27;Checkout&#x27;, path: &#x27;checkout&#x27; },
  {
    name: &#x27;Book List&#x27;,
    path: &#x27;books&#x27;,
    children: [
      {
        name: &#x27;Book&#x27;,
        path: &#x27;:id&#x27;
      }
    ]
  }
];</pre><div class="subsection"><h3 id="wildcard">Wildcard Routes<a class="header-link" href="/tutorial/03-routes#wildcard">#</a></h3><p>We have one last &quot;route&quot; to define. This isn&#x27;t really a route, just a catch all that we can use to identify locations that we don&#x27;t have a route defined for. <code class="language-javascript">path-to-regexp</code> allows us to capture everything using the path string <code class="language-javascript">(.*)</code>.</p><div class="note"><strong>Note:</strong> <code class="language-javascript">(.*)</code> uses another of the special <code class="language-javascript">path-to-regexp</code> <!-- -->formats. If you provide a regular expression within parentheses,<!-- --> <code class="language-javascript">path-to-regexp</code> will only match content that is matched by the regular expression. This can also be paired with a named path param (e.g. <code class="language-javascript">:id(\d{4})</code>), but is not necessary.</div><p>Since the regular expression <code class="language-javascript">.*</code> <!-- -->matches everything, we can use this to match all possible pathnames that someone using the website might navigate to.</p><pre class="language-javascript">const routes = [
  { name: &#x27;Home&#x27;, path: &#x27;&#x27; },
  { name: &#x27;Contact&#x27;, path: &#x27;contact&#x27; },
  { name: &#x27;Checkout&#x27;, path: &#x27;checkout&#x27; },
  {
    name: &#x27;Book List&#x27;,
    path: &#x27;books&#x27;,
    children: [
      {
        name: &#x27;Book&#x27;,
        path: &#x27;:id&#x27;
      }
    ]
  },
  {
    name: &#x27;Not Found&#x27;,
    path: &#x27;(.*)&#x27;
  }
];
// don&#x27;t forget to export the routes
export default routes;</pre></div><div class="subsection"><h3 id="order">Route Order<a class="header-link" href="/tutorial/03-routes#order">#</a></h3><p>One last thing to note about routes is that their order in the routes array is important. Curi will iterate over them in (depth-first) order. This means that with the above config, Curi will first check if <code class="language-javascript">&#x27;&#x27;</code> matches the pathname, if it does not, it will move on to <code class="language-javascript">&#x27;contact&#x27;</code>, so on and so forth. If no other routes match, then we know that our &quot;Not Found&quot; route will.</p><p>Curi will only attempt to match children routes if their parent route (partially) matches the location&#x27;s pathname. That means that when the pathname is <code class="language-javascript">&#x27;/somewhere&#x27;</code>, because our &quot;Book List&quot; route does not match, Curi will not attempt to match our &quot;Book&quot; route.</p></div></div><div class="section"><h2 id="next">Next<a class="header-link" href="/tutorial/03-routes#next">#</a></h2><p>Now that our routes are defined, it is time to talk about history in <!-- --> <a href="/tutorial/04-hickory">Part 4: Hickory</a></p></div></div><div class="sidebar"><h2>Tutorials</h2><ul class="link-list"><li class="solo"><a href="/tutorial/01-introduction">Part 1: Introduction to Curi</a></li><li class="solo"><a href="/tutorial/02-setup">Part 2: Curi Setup</a></li><li class="solo"><a class="active" href="/tutorial/03-routes">Part 3: Curi Routes</a></li><li class="solo"><a href="/tutorial/04-hickory">Part 4: Hickory</a></li><li class="solo"><a href="/tutorial/05-config">Part 5: The Curi Configuration Object</a></li><li class="solo"><p>Part 6: Rendering Pages</p><ul class="frameworks"><li><a href="/tutorial/06-pages-react">react</a></li><li><a href="/tutorial/06-pages-vue">vue</a></li></ul></li><li class="solo"><a href="/tutorial/07-load">Part 7: The Load Function</a></li><li class="solo"><p>Part 8: Rendering Data</p><ul class="frameworks"><li><a href="/tutorial/08-render-data-react">react</a></li><li><a href="/tutorial/08-render-data-vue">vue</a></li></ul></li><li class="solo"><p>Part 9: Forms &amp; Programmatic Navigation</p><ul class="frameworks"><li><a href="/tutorial/09-nav-react">react</a></li><li><a href="/tutorial/09-nav-vue">vue</a></li></ul></li><li class="solo"><a href="/tutorial/10-now-what">Part 10: Now What?</a></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@16.0.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
