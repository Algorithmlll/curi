<!doctype html>
<html lang="en">
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tutorial React Basics | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><header><nav><ul><li><a class="home-link " href="/">Curi</a></li><li><a class=" " href="/packages">Packages</a></li><li><a class=" " href="/guides">Guides</a></li><li><a class=" active" href="/tutorial">Tutorials</a></li><li><a class=" " href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main tabindex="-1" style="outline:none"><div class="page tutorial"><div class="content" style="outline:none"><h1>React Basics Tutorial</h1><p>In this tutorial, we will be building a website for a bookstore. This will focus on the front-end part of the application.</p><div class="tutorial-outline"><p>In this tutorial, we will be doing the following:</p><ul><li>Learn how to define routes and setup the Curi router.</li><li>Learn how to render React components based on the current location.</li><li>Learn how to navigate within the application.</li></ul></div><div class="section" id="demo"><h2>Demo<a class="header-link" href="/tutorial/react-basics#demo">#</a></h2><p>You can run a demo of the site we are building with CodeSandbox.</p><div class="demo"><iframe src="https://codesandbox.io/embed/github/curijs/react-basic-tutorial/tree/master/" width="100%" height="600px" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe><p>Use the three buttons at the top of the Sandbox to toggle view modes. Clicking the menu button in the top left corner opens a menu to switch between files.</p></div></div><div class="section" id="setup"><h2>Setup<a class="header-link" href="/tutorial/react-basics#setup">#</a></h2><p>We will be using<!-- --> <a href="https://github.com/facebook/create-react-app"><code class="inline-code language-javascript">create-react-app</code></a> <!-- -->to develop this website.</p><div class="note"><strong>Note:</strong> <!-- -->The instructions here assume that you have NodeJS and NPM &gt; 5.2 installed on your computer. If you do not, cannot, or prefer to avoid setup altogether, you can follow along using<!-- --> <a href="https://codesandbox.io/">CodeSandbox</a>. Some of the boilerplate will be different, but the differences are minor.</div><p>Begin by opening a terminal and navigating to the directory where you want to save your code. Then, we will use <code class="inline-code language-javascript">npx</code> to create the application.</p><pre><code class="language-bash">npx create-react-app curi-bookstore # create the app
cd curi-bookstore # enter the new app directory
yarn start # start the dev server</code></pre><p><code class="inline-code language-javascript">create-react-app</code>&#x27;s dev server will automatically update when we change files, so we can leave that running. We will still be working in the terminal, so you will want to open up a new terminal window/tab and navigate to the application&#x27;s directory. Once you have done that, there are a few packages that need to be installed.</p><pre><code class="language-bash">yarn add @hickory/browser @curi/router @curi/react-dom</code></pre><p>The <code class="inline-code language-javascript">@hickory/browser</code> package will be used to create an object that interacts with the browser to power navigation (e.g. updates the URI in the address bar when you click a link).<!-- --> <code class="inline-code language-javascript">@curi/router</code> provides the function to actually create the router. <code class="inline-code language-javascript">@curi/react-dom</code> gives us some React components that interact with the router.</p></div><div class="section" id="history"><h2>History and Locations<a class="header-link" href="/tutorial/react-basics#history">#</a></h2><p>URIs can be broken into parts to identify a location. With a single-page application, we don&#x27;t care about the URI&#x27;s protocol (http, https) or its hostname (www.example.com). The properties we care about are the <code class="inline-code language-javascript">pathname</code>, <code class="inline-code language-javascript">hash</code>, and <code class="inline-code language-javascript">query</code>.</p><pre><code class="language-javascript">// uri = &quot;https://example.com/one?key=value#id
{
  pathname: &quot;/one&quot;,
  query: &quot;key=value&quot;,
  hash: &quot;id&quot;
}</code></pre><p>The router will match its routes against a location&#x27;s<!-- --> <code class="inline-code language-javascript">pathname</code> to figure out which route matches. The<!-- --> <code class="inline-code language-javascript">query</code> and <code class="inline-code language-javascript">hash</code> values are not used for matching routes.</p><p>Curi uses the <a href="https://github.com/pshrmn/hickory">Hickory</a> <!-- -->library to create a history object that will enable us to navigate within our application. Hickory provides a few different packages to create history objects for different environments, but the only one we care about right now is the browser history, which comes from the<!-- --> <code class="inline-code language-javascript">@hickory/browser</code> package. A browser history object will interact with the browser&#x27;s native<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API">History API</a> <!-- -->so that our application can change locations (and the URI in the address bar) without making a request to a server and reloading the page.</p><p>We can import the <code class="inline-code language-javascript">Browser</code> function from<!-- --> <code class="inline-code language-javascript">@hickory/browser</code> in our index file (<code class="inline-code language-javascript">src/index.js</code>, which <code class="inline-code language-javascript">create-react-app</code> created for us). To create a history object, we call that function.</p><div class="note"><strong>Note:</strong> <!-- -->The history object can be configured with<!-- --> <a href="https://github.com/pshrmn/hickory/blob/master/docs/api/Browser.md#options">an options object</a>, but we will stick with the defaults.</div><pre data-line="4,10"><code class="language-jsx">// src/index.js
import React from &#x27;react&#x27;;
import ReactDOM from &#x27;react-dom&#x27;;
import Browser from &#x27;@hickory/browser&#x27;;

import &#x27;./index.css&#x27;;
import App from &#x27;./App&#x27;;
import registerServiceWorker from &#x27;./registerServiceWorker&#x27;;

const history = Browser();

ReactDOM.render(&lt;App /&gt;, document.getElementById(&#x27;root&#x27;));
registerServiceWorker();</code></pre></div><div class="section" id="defining-routes"><h2>Defining the Routes<a class="header-link" href="/tutorial/react-basics#defining-routes">#</a></h2><p>Routes are JavaScript objects that define the valid locations for a router. They have a <code class="inline-code language-javascript">name</code> and a <code class="inline-code language-javascript">path</code>.</p><pre><code class="language-javascript">// this is a route
{ name: &quot;Home&quot;, path: &quot;&quot; }</code></pre><p>A route&#x27;s <code class="inline-code language-javascript">name</code> needs to be unique. We will use route names when we navigate within the application. A route&#x27;s <code class="inline-code language-javascript">path</code> <!-- -->describes the location pathname that it should match.</p><div class="aside" id="path-basics"><h3>Path basics<a class="header-link" href="/tutorial/react-basics#path-basics">#</a></h3><p>Route paths are strings describing the pathname segments they should match.</p><pre><code class="language-javascript">{ path: &#x27;&#x27; } // matches &quot;/&quot;
{ path: &#x27;about/stuff&#x27; } // matches &quot;/about/stuff&quot;</code></pre><p>Paths never begin with a slash.</p><pre><code class="language-javascript">// yes
{ path: &#x27;&#x27; }
// no
{ path: &#x27;/&#x27; }</code></pre><p>Paths can include dynamic parameters. These are specified with a string that starts with a colon (<code class="inline-code language-javascript">:</code>) followed by the name of the params.</p><pre><code class="language-javascript">// a param named &quot;id&quot;
{ path: &#x27;:id&#x27; }</code></pre><p>Routes can be nested using the <code class="inline-code language-javascript">children</code> property of a route. A nested route inherits the path from its ancestor route(s), so its <code class="inline-code language-javascript">path</code> is only the additional part of the pathname that should be matched.</p><pre><code class="language-javascript">{
  name: &quot;Parent&quot;,
  path: &quot;parent&quot;, // matches /parent
  children: [
    // matches /parent/daughter
    { name: &quot;Daughter&quot;, path: &quot;daughter&quot; },
    // matches /parent/son
    { name: &quot;Son&quot;, path: &quot;son&quot; }
  ]
}</code></pre></div><p>The website will start with four routes.</p><table><thead><tr><th>name</th><th>path</th><th>Description</th></tr></thead><tbody><tr><td>Home</td><td><code class="inline-code language-javascript">&quot;&quot;</code></td><td>Lists books available for purchase</td></tr><tr><td>Book</td><td><code class="inline-code language-javascript">&quot;book/:id&quot;</code></td><td>Details about an individual book</td></tr><tr><td>Checkout</td><td><code class="inline-code language-javascript">&quot;checkout&quot;</code></td><td>&quot;Buy&quot; the books in the shopping cart</td></tr><tr><td>Catch All</td><td><code class="inline-code language-javascript">&quot;(.*)&quot;</code></td><td>Display a not found page for all other locations</td></tr></tbody></table><div class="note"><strong>Note:</strong> <!-- -->The catch all route uses a regular expression syntax to indicate that it should match everything. Curi uses the<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class="inline-code language-javascript">path-to-regexp</code></a> <!-- -->package for route matching. We will only be using some of its basic syntax, but you can read its documentation to learn about more advanced path syntax.</div><p>Inside of the <code class="inline-code language-javascript">src</code> directory, we will create a<!-- --> <code class="inline-code language-javascript">routes.js</code> file where we can define the application&#x27;s routes.</p><pre><code class="language-bash">touch src/routes.js</code></pre><pre><code class="language-javascript">// src/routes.js
export default [
  {
    name: &quot;Home&quot;,
    path: &quot;&quot;
  },
  {
    name: &quot;Book&quot;,
    path: &quot;book/:id&quot;
  },
  {
    name: &quot;Checkout&quot;,
    path: &quot;checkout&quot;
  },
  {
    name: &quot;Catch All&quot;,
    path: &quot;(.*)&quot;
  }
];</code></pre></div><div class="section" id="router"><h2>The Router<a class="header-link" href="/tutorial/react-basics#router">#</a></h2><p>With the history object created and the routes defined, we are ready to create the router. Back in the <code class="inline-code language-javascript">src/index.js</code> file, we should import the <code class="inline-code language-javascript">curi</code> function from<!-- --> <code class="inline-code language-javascript">@curi/router</code> as well as our routes from<!-- --> <code class="inline-code language-javascript">src/routes.js</code>. Creating the router is done by calling the<!-- --> <code class="inline-code language-javascript">curi()</code> function and passing it the <code class="inline-code language-javascript">history</code> <!-- -->object and the <code class="inline-code language-javascript">routes</code> array.</p><pre data-line="4,8,13"><code class="language-jsx">// src/index.js
import React from &#x27;react&#x27;;
import ReactDOM from &#x27;react-dom&#x27;;
import { curi } from &#x27;@curi/router&#x27;;
import Browser from &#x27;@hickory/browser&#x27;;

import &#x27;./index.css&#x27;;
import routes from &#x27;./routes&#x27;;
import App from &#x27;./App&#x27;;
import registerServiceWorker from &#x27;./registerServiceWorker&#x27;;

const history = Browser();
const router = curi(history, routes);

ReactDOM.render(&lt;App /&gt;, document.getElementById(&#x27;root&#x27;));
registerServiceWorker();</code></pre></div><div class="section" id="rendering"><h2>Rendering with React<a class="header-link" href="/tutorial/react-basics#rendering">#</a></h2><p>We can now render our application. To do this, we will use the<!-- --> <code class="inline-code language-jsx">&lt;<!-- -->curiProvider()<!-- -->&gt;</code> function from the <code class="inline-code language-javascript">@curi/react-dom</code> <!-- -->package. This function takes the Curi router and returns a component that does two things:</p><ol><li>It places router-related values on the context for other<!-- --> <code class="inline-code language-javascript">@curi/react-dom</code> components</li><li>It re-renders the application whenever the location changes.</li></ol><p>The returned component can be called anything you like, but here we will call it <code class="inline-code language-jsx">&lt;<!-- -->Router<!-- -->&gt;</code>.</p><p>The <code class="inline-code language-jsx">&lt;<!-- -->Router<!-- -->&gt;</code> takes one prop: a render-invoked function, passed as the <code class="inline-code language-javascript">children</code> prop. This function will receive an object that has three properties: <code class="inline-code language-javascript">router</code>,<!-- --> <code class="inline-code language-javascript">response</code>, and <code class="inline-code language-javascript">navigation</code>.</p><pre><code class="language-jsx">import { curiProvider } from &quot;@curi/react-dom&quot;;
        
const Router = curiProvider(router);
        
&lt;Router&gt;
  {({ router, response, navigation }) =&gt; {
    return &lt;div&gt;This is the website&lt;/div&gt;;
  }}
&lt;/Router&gt;</code></pre><p>The <code class="inline-code language-javascript">router</code> is our Curi router, but what are the other two?</p><div class="aside" id="responses"><h3>Responses and Navigation<a class="header-link" href="/tutorial/react-basics#responses">#</a></h3><p>Whenever Curi receives a location, it matches its routes against it and generates a response. This is an object with data related to the route that matched the location. Later on we will modify this data ourselves, but for now the important thing to know is that the response lets us know about the current route.</p><pre><code class="language-javascript">// a sample response object
{
  body: undefined,
  data: undefined,
  error: undefined,
  location: { pathname: &#x27;/&#x27;, ... },
  name: &#x27;Home&#x27;,
  params: {},
  partials: [],
  status: 200
}</code></pre><p>The router uses an observer model to let functions subscribe to be called when a new response is generated. The <code class="inline-code language-jsx">&lt;<!-- -->Router<!-- -->&gt;</code> <!-- -->observes the router so that it can re-render the application whenever there is a new one.</p><p>The <code class="inline-code language-javascript">navigation</code> object contains additional information about a navigation that doesn&#x27;t make sense to include in the response object. This includes the navigation&#x27;s &quot;action&quot; (<code class="inline-code language-javascript">PUSH</code>, <code class="inline-code language-javascript">POP</code>, or <code class="inline-code language-javascript">REPLACE</code>) and the previous response object.</p></div><p>Most of the time, the response is the only property you will need to use to render, but the other two may occasionally be useful.</p><p>How do we use the response to render? Any way you want. Based on the sample response above, the <code class="inline-code language-javascript">name</code> stands out as the best way to identify which route matched. We can make this even easier by adding another property to the response: <code class="inline-code language-javascript">body</code>.</p><p>Earlier it was mentioned that response objects can be modified. This is done by returning an object from a route&#x27;s <code class="inline-code language-javascript">response()</code> <!-- -->function. <code class="inline-code language-javascript">response()</code> receives an object with a whole bunch of properties that we can use to help determine how to modify the response, but for the time being, we don&#x27;t care about any of those. All we need to know is that if we return an object with a<!-- --> <code class="inline-code language-javascript">body</code> property, that value will be set on our response object.</p><pre><code class="language-javascript">{
  name: &quot;Home&quot;,
  path: &quot;&quot;,
  response() {
    return {
      body: &quot;Home, sweet home.&quot;
    };
    /*
      * response = {
      *   body: &quot;Home, sweet home.&quot;,
      *   // ...
      * }
      */
  }
}</code></pre><p>If the return object&#x27;s <code class="inline-code language-javascript">body</code> is a React component, we can render it in the <code class="inline-code language-jsx">&lt;<!-- -->Router<!-- -->&gt;</code>&#x27;s children function. We haven&#x27;t actually defined components for our routes yet, so we should throw together some placeholders.</p><pre><code class="language-bash">mkdir -p src/components
touch src/components/Home.js src/components/Book.js \
  src/components/Checkout.js src/components/NotFound.js</code></pre><pre><code class="language-jsx">// src/components/Home.js
import React from &#x27;react&#x27;;

export default () =&gt; (
  &lt;div&gt;Home&lt;/div&gt;
);</code></pre><pre><code class="language-jsx">// src/components/Book.js
import React from &#x27;react&#x27;;

export default () =&gt; (
  &lt;div&gt;Book&lt;/div&gt;
);</code></pre><pre><code class="language-jsx">// src/components/Checkout.js
import React from &#x27;react&#x27;;

export default () =&gt; (
  &lt;div&gt;Checkout&lt;/div&gt;
);</code></pre><pre><code class="language-jsx">// src/components/NotFound.js
import React from &#x27;react&#x27;;

export default () =&gt; (
  &lt;div&gt;Not Found&lt;/div&gt;
);</code></pre><p>These components can be imported in <code class="inline-code language-javascript">src/routes.js</code> and attached to their respective routes.</p><pre data-line="2-5,11-15,20-24,29-33,38-42"><code class="language-javascript">// src/routes.js
import Home from &#x27;./components/Home&#x27;;
import Book from &#x27;./components/Book&#x27;;
import Checkout from &#x27;./components/Checkout&#x27;;
import NotFound from &#x27;./components/NotFound&#x27;;

export default [
  {
    name: &quot;Home&quot;,
    path: &quot;&quot;,
    response() {
      return {
        body: Home
      };
    }
  },
  {
    name: &quot;Book&quot;,
    path: &quot;book/:id&quot;,
    response() {
      return {
        body: Book
      };
    }
  },
  {
    name: &quot;Checkout&quot;,
    path: &quot;checkout&quot;,
    response() {
      return {
        body: Checkout
      };
    }
  },
  {
    name: &quot;Catch All&quot;,
    path: &quot;(.*)&quot;,
    response() {
      return {
        body: NotFound
      };
    }
  }
];</code></pre><p>We can now render the <code class="inline-code language-jsx">&lt;<!-- -->Router<!-- -->&gt;</code> in our index file. The<!-- --> <code class="inline-code language-jsx">&lt;<!-- -->Router<!-- -->&gt;</code> gets passed a render-invoked function as the component&#x27;s <code class="inline-code language-javascript">children</code>. In the render-invoked function, we can use <code class="inline-code language-javascript">response.body</code> to render the component for the matched route. We will also pass the <code class="inline-code language-javascript">response</code> as a prop to the rendered component, which will be useful soon.</p><pre data-line="6,14,16-25"><code class="language-jsx">// src/index.js
import React from &#x27;react&#x27;;
import ReactDOM from &#x27;react-dom&#x27;;
import { curi } from &#x27;@curi/router&#x27;;
import Browser from &#x27;@hickory/browser&#x27;;
import { curiProvider } from &#x27;@curi/react-dom&#x27;;

import &#x27;./index.css&#x27;;
import routes from &#x27;./routes&#x27;;
import registerServiceWorker from &#x27;./registerServiceWorker&#x27;;

const history = Browser();
const router = curi(history, routes);
const Router = curiProvider(router);

ReactDOM.render((
  &lt;Router&gt;
    {({ response }) =&gt; {
      const { body:Body } = response;
      return (
        &lt;Body response={response} /&gt;
      );
    }}
  &lt;/Router&gt;
), document.getElementById(&#x27;root&#x27;));
registerServiceWorker();</code></pre><p>We can also remove the <code class="inline-code language-jsx">&lt;<!-- -->App<!-- -->&gt;</code> component import and delete the related files.</p><pre><code class="language-bash">rm src/App.js src/App.css src/App.test.js</code></pre><p>At this point in time our app is rendering, but is isn&#x27;t very interesting because we cannot navigate between locations.</p></div><div class="section" id="navigating"><h2>Navigating between locations<a class="header-link" href="/tutorial/react-basics#navigating">#</a></h2><p>The <code class="inline-code language-javascript">@curi/react-dom</code> package provides a <code class="inline-code language-jsx">&lt;<!-- -->Link<!-- -->&gt;</code> <!-- -->component that we can use to navigate between locations within our application.</p><div class="aside" id="link-component"><h3><span>The <code class="inline-code language-jsx">&lt;<!-- -->Link<!-- -->&gt;</code> Component</span><a class="header-link" href="/tutorial/react-basics#link-component">#</a></h3><p>Navigation isn&#x27;t done by manually typing the pathname of the location the link should navigate to. Instead, we specify the name of the route using the <code class="inline-code language-javascript">to</code> prop.</p><pre><code class="language-jsx">// { name: &quot;Home&quot;, path: &quot;&quot; }
&lt;Link to=&quot;Home&quot;&gt;Home&lt;/Link&gt;
// &lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;</code></pre><p>If a route has params, we provide these to the <code class="inline-code language-jsx">&lt;<!-- -->Link<!-- -->&gt;</code> as a<!-- --> <code class="inline-code language-javascript">params</code> object. For a nested route, we would also need to provide params for any ancestor routes.</p><pre><code class="language-jsx">// { name: &quot;Book&quot;, path: &quot;book/:id&quot; }
&lt;Link to=&quot;Book&quot; params={{ id: 7 }}&gt;The Dark Forest&lt;/Link&gt;
// &lt;a href=&quot;/book/7&quot;&gt;The Dark Forest&lt;/a&gt;</code></pre><p>The <code class="inline-code language-jsx">&lt;<!-- -->Link<!-- -->&gt;</code> is only for in-app navigation. If you want to link to pages outside of the application, use an anchor.</p><pre><code class="language-jsx">// in-app
&lt;Link to=&quot;Some Route&quot;&gt;Some Route&lt;/Link&gt;

// out of app
&lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;</code></pre><p>If you need to attach query or hash data to a <code class="inline-code language-jsx">&lt;<!-- -->Link<!-- -->&gt;</code>, use the <code class="inline-code language-javascript">query</code> and <code class="inline-code language-javascript">hash</code> props.</p><pre><code class="language-jsx">// { name: &quot;Checkout&quot;, path: &quot;checkout&quot; }
&lt;Link to=&quot;Checkout&quot; query=&#x27;affiliate=123&#x27;&gt;Checkout&lt;/Link&gt;
// &lt;a href=&quot;/checkout?affiliate=123&quot;&gt;Checkout&lt;/a&gt;</code></pre></div><div class="subsection" id="nav-menu"><h3>A Navigation Menu<a class="header-link" href="/tutorial/react-basics#nav-menu">#</a></h3><p>We will start with creating a navigation menu component with links to our home page and checkout page.</p><pre><code class="language-bash">touch src/components/NavMenu.js</code></pre><pre><code class="language-jsx">// src/components/NavMenu.js
import React from &#x27;react&#x27;;
import { Link } from &#x27;@curi/react-dom&#x27;;

export default () =&gt; (
  &lt;nav&gt;
    &lt;ul&gt;
      &lt;li&gt;
        &lt;Link to=&quot;Home&quot;&gt;Home&lt;/Link&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;Link to=&quot;Checkout&quot;&gt;Checkout&lt;/Link&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/nav&gt;
);</code></pre><p>We can import that in our index file and add it to our<!-- --> <code class="inline-code language-javascript">children</code> function. This is a good opportunity to also add some structure to the elements returned by the <code class="inline-code language-javascript">children</code> <!-- -->function.</p><pre data-line="10,22-29"><code class="language-jsx">// src/index.js
import React from &#x27;react&#x27;;
import ReactDOM from &#x27;react-dom&#x27;;
import { curi } from &#x27;@curi/router&#x27;;
import Browser from &#x27;@hickory/browser&#x27;;
import { curiProvider } from &#x27;@curi/react-dom&#x27;;

import &#x27;./index.css&#x27;;
import routes from &#x27;./routes&#x27;;
import NavMenu from &#x27;./components/NavMenu&#x27;;
import registerServiceWorker from &#x27;./registerServiceWorker&#x27;;

const history = Browser();
const router = curi(history, routes);
const Router = curiProvider(router);

ReactDOM.render((
  &lt;Router&gt;
    {({ response }) =&gt; {
      const { body:Body } = response;
      return (
        &lt;div&gt;
          &lt;header&gt;
            &lt;NavMenu /&gt;
          &lt;/header&gt;
          &lt;main&gt;
            &lt;Body response={response} /&gt;
          &lt;/main&gt;
        &lt;/div&gt;
      );
    }}
  &lt;/Router&gt;
), document.getElementById(&#x27;root&#x27;));
registerServiceWorker();</code></pre></div><div class="subsection" id="book-links"><h3>Linking to Books<a class="header-link" href="/tutorial/react-basics#book-links">#</a></h3><p>We want to be able to link to individual books from the home page. First, we need data about the books. For now, we&#x27;re going to hard-code the books in the <code class="inline-code language-javascript">src/books.js</code> module.</p><pre><code class="language-bash">touch src/books.js</code></pre><p>You can copy+paste or modify the data, but the structure of the provided data should stay the same.</p><pre><code class="language-javascript">// src/books.js
export default [
  {
    id: 0,
    title: &#x27;The Name of the Wind&#x27;,
    author: &#x27;Patrick Rothfuss&#x27;,
    published: &#x27;2007&#x27;,
    pages: 662
  },
  {
    id: 1,
    title: &quot;The Wise Man&#x27;s Fear&quot;,
    author: &#x27;Patrick Rothfuss&#x27;,
    published: &#x27;2011&#x27;,
    pages: 994
  },
  {
    id: 2,
    title: &#x27;The Way of Kings&#x27;,
    author: &#x27;Brandon Sanderson&#x27;,
    published: &#x27;2010&#x27;,
    pages: 1007
  },
  {
    id: 3,
    title: &#x27;A Storm of Swords&#x27;,
    author: &#x27;George R.R. Martin&#x27;,
    published: &#x27;2003&#x27;,
    pages: 1177
  },
  {
    id: 78,
    title: &#x27;Words of Radiance&#x27;,
    author: &#x27;Brandon Sanderson&#x27;,
    published: &#x27;2014&#x27;,
    pages: 1087
  }
];</code></pre><p>The data can be imported in the <code class="inline-code language-jsx">&lt;<!-- -->Home<!-- -->&gt;</code> component. We will iterate over the books with a <code class="inline-code language-jsx">&lt;<!-- -->Link<!-- -->&gt;</code> to each one.</p><pre data-line="4,7-17"><code class="language-jsx">// src/components/Home.js
import React from &#x27;react&#x27;;
import { Link } from &#x27;@curi/react-dom&#x27;;

import books from &#x27;../books&#x27;;

export default () =&gt; (
  &lt;div&gt;
    &lt;ul&gt;
      {books.map(book =&gt; (
        &lt;li key={book.id}&gt;
          &lt;Link to=&quot;Book&quot; params={{ id: book.id }} &gt;
            {book.title} by {book.author}
          &lt;/Link&gt;
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  &lt;/div&gt;
);</code></pre><p>Now that we can navigate to the books, we should fill out the UI for the <code class="inline-code language-jsx">&lt;<!-- -->Book<!-- -->&gt;</code> component. Up above, we passed the<!-- --> <code class="inline-code language-javascript">response</code> object as a prop to the <code class="inline-code language-javascript">response.body</code> <!-- -->component. Now, we can use that object in the <code class="inline-code language-jsx">&lt;<!-- -->Book<!-- -->&gt;</code> <!-- -->component to access the captured route params so that we know which book to show.</p><p>We will once again import the <code class="inline-code language-javascript">books.js</code> data. We can use<!-- --> <code class="inline-code language-javascript">params.id</code> to select the correct book.<!-- --> <code class="inline-code language-javascript">params.id</code> is a string, so we will need to parse it into an integer. Sometimes there won&#x27;t be a valid book for the<!-- --> <code class="inline-code language-javascript">params.id</code>. In that case, we will also want to display a message that the requested book could not be found.</p><pre data-line="4,6-20"><code class="language-jsx">// src/components/Book.js
import React from &#x27;react&#x27;;

import books from &#x27;../books&#x27;;

export default ({ response }) =&gt; {
  const id = parseInt(response.params.id, 10);
  const book = books.find(b =&gt; b.id === id);
  if (!book) {
    return &lt;div&gt;The requested book could not be found&lt;/div&gt;;
  }
  return (
    &lt;div&gt;
      &lt;h1&gt;{book.title}&lt;/h1&gt;
      &lt;h2&gt;by {book.author}&lt;/h2&gt;
      &lt;p&gt;Published in {book.published}&lt;/p&gt;
      &lt;p&gt;{book.pages} pages&lt;/p&gt;
    &lt;/div&gt;
  );
}</code></pre></div></div><div class="section" id="shopping"><h2>Let&#x27;s go shopping<a class="header-link" href="/tutorial/react-basics#shopping">#</a></h2><p>We want to be able to add books to our shopping cart. Since this is a play site, we will store the cart data in memory.</p><pre><code class="language-bash">touch src/cart.js</code></pre><p>The shopping cart implementation will be a JavaScript <code class="inline-code language-javascript">Map</code>. We can call its <code class="inline-code language-javascript">set</code> method to add books, its<!-- --> <code class="inline-code language-javascript">clear</code> method to reset the cart, and iterate over its<!-- --> <code class="inline-code language-javascript">entries</code> with a <code class="inline-code language-javascript">for...of</code> loop.</p><pre><code class="language-javascript">// src/cart.js
const cart = new Map();

export default {
  add(book, quantity) {
    cart.set(book, quantity);
  },
  items() {
    const books = [];
    for (let [book, quantity] of cart.entries()) {
      books.push({
        title: book.title,
        quantity
      });
    }
    return books;
  },
  reset() {
    cart.clear();
  }
};</code></pre><p>Before we edit the <code class="inline-code language-jsx">&lt;<!-- -->Book<!-- -->&gt;</code> component, we should quickly revisit the <code class="inline-code language-jsx">&lt;<!-- -->Router<!-- -->&gt;</code>&#x27;s <code class="inline-code language-javascript">children</code> function. In addition to passing the <code class="inline-code language-javascript">response</code> to<!-- --> <code class="inline-code language-javascript">response.body</code>, we should also pass it our router. This will allow us to do programmatic navigation.</p><pre data-line="19,27"><code class="language-jsx">// src/index.js
import React from &#x27;react&#x27;;
import ReactDOM from &#x27;react-dom&#x27;;
import { curi } from &#x27;@curi/router&#x27;;
import Browser from &#x27;@hickory/browser&#x27;;
import { curiProvider } from &#x27;@curi/react-dom&#x27;;

import &#x27;./index.css&#x27;;
import routes from &#x27;./routes&#x27;;
import NavMenu from &#x27;./components/NavMenu&#x27;;
import registerServiceWorker from &#x27;./registerServiceWorker&#x27;;

const history = Browser();
const router = curi(history, routes);
const Router = curiProvider(router);

ReactDOM.render((
  &lt;Router&gt;
    {({ response, router }) =&gt; {
      const { body:Body } = response;
      return (
        &lt;div&gt;
          &lt;header&gt;
            &lt;NavMenu /&gt;
          &lt;/header&gt;
          &lt;main&gt;
            &lt;Body response={response} router={router} /&gt;
          &lt;/main&gt;
        &lt;/div&gt;
      );
    }}
  &lt;/Router&gt;
), document.getElementById(&#x27;root&#x27;));
registerServiceWorker();</code></pre><p>We can now access our <code class="inline-code language-javascript">router</code> in the <code class="inline-code language-jsx">&lt;<!-- -->Book<!-- -->&gt;</code> <!-- -->component. The router&#x27;s <code class="inline-code language-javascript">navigate()</code> function can be used to navigate to a new location. This means that when the user clicks a button to add a book to their shopping cart, we can automatically navigate to the checkout page.</p><div class="aside" id="nav-method"><h3>Navigate Method<a class="header-link" href="/tutorial/react-basics#nav-method">#</a></h3><p><code class="inline-code language-javascript">router.navigate()</code> is used to navigate to new locations. There are three methods of navigation: <code class="inline-code language-javascript">PUSH</code>,<!-- --> <code class="inline-code language-javascript">REPLACE</code>, and <code class="inline-code language-javascript">ANCHOR</code>.</p><p><code class="inline-code language-javascript">PUSH</code> pushes a new location after the current index, removing any locations after the current location.</p><pre><code class="language-javascript">// session = [&#x27;/one&#x27;, &#x27;/two&#x27;, &#x27;/three&#x27;], index = 1
router.navigate({ name: &quot;New&quot;, method: &quot;PUSH&quot; });
// session = [&#x27;/one&#x27;, &#x27;/two&#x27;, &#x27;/new&#x27;], index = 2</code></pre><p><code class="inline-code language-javascript">REPLACE</code> replaces the location at the current index.</p><pre><code class="language-javascript">// session = [&#x27;/one&#x27;, &#x27;/two&#x27;, &#x27;/three&#x27;], index = 1
router.navigate({ name: &quot;Replace&quot;, method: &quot;REPLACE&quot; });
// session = [&#x27;/one&#x27;, &#x27;/replacement&#x27;, &#x27;/three&#x27;], index = 1</code></pre><p><code class="inline-code language-javascript">ANCHOR</code> is a mix between <code class="inline-code language-javascript">PUSH</code> and<!-- --> <code class="inline-code language-javascript">REPLACE</code>. It mimics the behavior of clicking on links, so if you navigate to the same location as the current one it will replace, and if you navigate to a new location it will push.</p><p>If <code class="inline-code language-javascript">method.navigate()</code> is called without a navigation<!-- --> <code class="inline-code language-javascript">method</code>, it will default to <code class="inline-code language-javascript">ANCHOR</code>.</p><pre><code class="language-javascript">// session = [&#x27;/one&#x27;, &#x27;/two&#x27;, &#x27;/three&#x27;], index = 1
router.navigate({ name: &quot;Two&quot;, method: &quot;ANCHOR&quot; });
// session = [&#x27;/one&#x27;, &#x27;/two&#x27;, &#x27;/three&#x27;], index = 1
router.navigate({ name: &quot;New&quot;, method: &quot;ANCHOR&quot; });
// session = [&#x27;/one&#x27;, &#x27;/two&#x27;, &#x27;/new&#x27;], index = 2<!-- -->`}</code></pre></div><p>We also want to import our shopping cart API so that we can add a book to the cart.</p><pre data-line="5,19-28"><code class="language-jsx">// src/components/Book.js
import React from &#x27;react&#x27;;

import books from &#x27;../books&#x27;;
import cart from &#x27;../cart&#x27;;

export default ({ response, router }) =&gt; {
  const id = parseInt(response.params.id, 10);
  const book = books.find(b =&gt; b.id === id);
  if (!book) {
    return &lt;div&gt;The requested book could not be found&lt;/div&gt;;
  }
  return (
    &lt;div&gt;
      &lt;h1&gt;{book.title}&lt;/h1&gt;
      &lt;h2&gt;by {book.author}&lt;/h2&gt;
      &lt;p&gt;Published in {book.published}&lt;/p&gt;
      &lt;p&gt;{book.pages} pages&lt;/p&gt;
      &lt;button
        type=&quot;button&quot;
        onClick={() =&gt; {
          cart.add(book, 1);
          router.navigate({ name: &quot;Checkout&quot; });
        }}
      &gt;
        Add to Cart
      &lt;/button&gt;
    &lt;/div&gt;
  );
}</code></pre><p>Finally, we can update our <code class="inline-code language-jsx">&lt;<!-- -->Checkout<!-- -->&gt;</code> component to display the books in the shopping cart. To do this, we will import our cart and books. Our cart only stores book <code class="inline-code language-javascript">id</code>s, so we will need to merge the book data with the cart data.</p><p>When a user &quot;buys&quot; the books in their shopping cart, we need to clear out the cart. We will also replace the current location with one whose<!-- --> <code class="inline-code language-javascript">location.hash</code> is the string &quot;thanks&quot;. When that is present in the URI, we can render a &quot;Thanks for your purchase&quot; message to &quot;confirm&quot; the purchase.</p><pre><code class="language-jsx">// src/components/Checkout.js
import React from &#x27;react&#x27;;

import cart from &#x27;../cart&#x27;;

export default ({ router, response }) =&gt; {
  const books = cart.items();  
  if (!books.length) {
    return response.location.hash === &#x27;thanks&#x27;
      ? &lt;div&gt;Thanks for your purchase!&lt;/div&gt;
      : &lt;div&gt;The cart is currently empty&lt;/div&gt;;
  }
  return (
    &lt;div&gt;
      &lt;h1&gt;Checkout&lt;/h1&gt;
      &lt;table&gt;
        &lt;thead&gt;
          &lt;tr&gt;
            &lt;th&gt;Title&lt;/th&gt;
            &lt;th&gt;Quantity&lt;/th&gt;
          &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
          {books.map(book =&gt; (
            &lt;tr key={book.title}&gt;
              &lt;td&gt;{book.title}&lt;/td&gt;
              &lt;td&gt;{book.quantity}&lt;/td&gt;
            &lt;/tr&gt;
          ))}
        &lt;/tbody&gt;
      &lt;/table&gt;
      &lt;button
        type=&quot;button&quot;
        onClick={() =&gt; {
          cart.reset();
          const pathname = router.route.pathname(&#x27;Checkout&#x27;);
          router.navigate({
            name: &quot;Checkout&quot;,
            hash: &quot;thanks&quot;,
            method: &quot;REPLACE&quot;
          });
        }}
      &gt;
        Buy
      &lt;/button&gt;
    &lt;/div&gt;
  );
};</code></pre></div><div class="section" id="next"><h2>What&#x27;s next?<a class="header-link" href="/tutorial/react-basics#next">#</a></h2><p>We now have a functional website built with React and Curi. What should you do next? Build another site! You can also check out the<!-- --> <a href="/guides">guides</a> for information on advanced techniques.</p></div></div><div class="page-links"><button type="button" class="toggler">Menu</button><div class="children"><h2>Tutorials</h2><ul class="link-list"><li class="link-group"><div><button title="Toggle group visibility" style="cursor:pointer;font-size:24px;font-family:&quot;Zilla Slab&quot;, serif;text-align:left;width:100%;background:none;border:0;padding:0">Basic<div style="float:right">-</div></button></div><ul class="link-list"><li class="solo"><a class=" active" href="/tutorial/react-basics">React Basics</a></li><li class="solo"><a class=" " href="/tutorial/vue-basics">Vue Basics</a></li></ul></li></ul><ul class="link-list"><li class="link-group"><div><button title="Toggle group visibility" style="cursor:pointer;font-size:24px;font-family:&quot;Zilla Slab&quot;, serif;text-align:left;width:100%;background:none;border:0;padding:0">Advanced<div style="float:right">-</div></button></div><ul class="link-list"><li class="solo"><a class=" " href="/tutorial/react-advanced">React Advanced</a></li></ul></li></ul></div></div></div></main></div>
    <script src="https://cdn.polyfill.io/v2/polyfill.js?features=Object.assign"></script>
    <script src="https://unpkg.com/react@16.5.1/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.5.1/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
