<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tutorial Part 5: The Curi Configuration Object | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot=""><header><nav><ul><li><a class="home-link" href="/">Curi</a></li><li><a href="/packages">Packages</a></li><li><a href="/tutorial/01-introduction">Tutorial</a></li><li><a href="/guides/getting-started/">Guides</a></li><li><a href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main><div class="tutorial"><div class="content"><h1>Part 5: The Curi Configuration Object</h1><p>Curi uses a centralized configuration object to handle routing. Essentially, whenever the location changes (and when your application first loads), the configuration object will iterate over your routes to find one that matches the location. Then, it will use that route to generate a response object. This response contains a bunch of properties that are useful for rendering your application.</p><div><p>In this tutorial, we will be doing the following:</p><ul><li>Creating a Curi configuration object using our routes and history object.</li><li>Learning about some of the properties of the configuration object and how Curi works.</li></ul></div><div class="tutorial-branch"><p>If you are following along using the<!-- --> <a href="https://github.com/pshrmn/curi-tutorial">tutorial repo</a>, please checkout the <code class="language-javascript">05-config</code> branch.</p><pre class="language-bash">git checkout 05-config</pre></div><div class="aside"><h2 id="installation">Installation<a class="header-link" href="/tutorial/05-config#installation">#</a></h2><p>If you skipped the setup, you should install <code class="language-javascript">@curi/core</code> now.</p><pre class="language-bash">npm install @curi/core</pre></div><div class="section"><h2 id="create">Creating our Config<a class="header-link" href="/tutorial/05-config#create">#</a></h2><p><code class="language-javascript">@curi/core</code> only has a single, default export, which is a function that will create a configuration object. In this tutorial, we will import it as <code class="language-javascript">createConfig</code> (of course, you can name it whatever you like).</p><pre class="language-javascript">import createConfig from &#x27;@curi/core&#x27;;</pre><p><code class="language-javascript">createConfig</code> can take three arguments; the first two arguments are required while the third is not.</p><ol><li><code class="language-javascript">history</code> - The first argument to pass to<!-- --> <code class="language-javascript">createConfig</code> is a Hickory history object.</li><li><code class="language-javascript">routes</code> - The second argument is an array of route objects.</li><li><code class="language-javascript">config</code> - The third argument is an object that contains additional configuration data. We will not be using this object in this tutorial.</li></ol><p>Using the routes that we defined in the<!-- --> <a href="/tutorial/03-routes">Routes Tutorial</a> <!-- -->and the<!-- --> <a href="/tutorial/04-hickory">Hickory history object</a>, we are ready to create our configuration object.</p><pre class="language-javascript">import createConfig from &#x27;@curi/core&#x27;;
import Browser from &#x27;@hickory/browser&#x27;;

import routes from &#x27;./routes&#x27;;

const history = Browser();
const config = createConfig(history, routes);</pre></div><div class="aside"><h2 id="subscriber">Subscriber Model<a class="header-link" href="/tutorial/05-config#subscriber">#</a></h2><p>In order to let your application know about location changes, Curi uses a subscriber model. Whenever a location change happens, Curi will create a new response and then emit this response to all of its subscribed functions. These subscribed functions are called response handlers since they handle the new respond. Using <code class="language-javascript">config.respond</code>, we can give Curi a response handler to call when a new response has been created.</p><p>What does a response handler function look like? It can take two arguments. The first will be the <code class="language-javascript">response</code> object generated for the new location. The second is the <code class="language-javascript">action</code> type from the navigation (<code class="language-javascript">&#x27;PUSH&#x27;</code>,<code class="language-javascript">&#x27;POP&#x27;</code>, and <code class="language-javascript">&#x27;REPLACE&#x27;</code>).</p><pre class="language-javascript">function responseLogger(response, action) {
  console.log(&quot;RESPONSE:&quot;, response);
  console.log(&quot;ACTION&quot;, action)
}
config.respond(responseLogger);</pre><p><code class="language-javascript">curi.respond</code> will return a function that you can use to stop responding to new responses.</p><pre class="language-javascript">function responseLogger(response, action) {
  console.log(&quot;I will be called for every response until I unsubscribe&quot;);
}
const stopResponding = config.respond(responseLogger);
// any navigation that happens now will be logged
// ...
stopResponding();
// after unsubscribing, any new navigation will not be logged</pre><p>While most response handlers should be subscribers (that is to say, you want them to be called every time a new response is generated), you might sometimes want to only call a response handler once. For example, a response handler might be a &quot;ready&quot; function that you only want called once you know that a response exists. To do that, you can use the second argument to <code class="language-javascript">config.respond</code>, which is an options object. When the <code class="language-javascript">once</code> object is <code class="language-javascript">true</code>, then that response handler will only be called one time.</p><pre class="language-javascript">function responseLogger(response, action) {
  console.log(&quot;I will only be called once&quot;);
}
config.respond(responseLogger, { once: true });</pre></div><div class="section"><h2 id="review">Review<a class="header-link" href="/tutorial/05-config#review">#</a></h2><p>If you are following the React path:</p><div class="tutorial-branch"><p>You can view the complete source code for this tutorial here:<!-- --> <a href="https://github.com/pshrmn/curi-tutorial/tree/06-pages-react">06-pages-react</a>.</p></div><p>If you are following the Vue path:</p><div class="tutorial-branch"><p>You can view the complete source code for this tutorial here:<!-- --> <a href="https://github.com/pshrmn/curi-tutorial/tree/06-pages-vue">06-pages-vue</a>.</p></div></div><div class="section"><h2 id="next">Next<a class="header-link" href="/tutorial/05-config#next">#</a></h2><p>With our configuration object created, we are finally ready to render. Now, we are at a bit of a fork in the road. While most of the tutorials apply to everyone, the next tutorial is framework specific.</p><p>If you are following along using React, continue on to<!-- --> <a href="/tutorial/06-pages-react">Part 6: React Pages</a></p><p>If you are following along using Vue, you instead you should go to<!-- --> <a href="/tutorial/06-pages-vue">Part 6: Vue Pages</a></p></div></div><div class="sidebar"><h2>Tutorials</h2><ul class="link-list"><li class="solo"><a href="/tutorial/01-introduction">Part 1: Introduction to Curi</a></li><li class="solo"><a href="/tutorial/02-setup">Part 2: Curi Setup</a></li><li class="solo"><a href="/tutorial/03-routes">Part 3: Curi Routes</a></li><li class="solo"><a href="/tutorial/04-hickory">Part 4: Hickory</a></li><li class="solo"><a class="active" href="/tutorial/05-config">Part 5: The Curi Configuration Object</a></li><li class="solo"><p>Part 6: Rendering Pages</p><ul class="frameworks"><li><a href="/tutorial/06-pages-react">react</a></li><li><a href="/tutorial/06-pages-vue">vue</a></li></ul></li><li class="solo"><a href="/tutorial/07-loading-data">Part 7: Loading Data</a></li><li class="solo"><p>Part 8: Rendering Data</p><ul class="frameworks"><li><a href="/tutorial/08-render-data-react">react</a></li><li><a href="/tutorial/08-render-data-vue">vue</a></li></ul></li><li class="solo"><p>Part 9: Forms &amp; Programmatic Navigation</p><ul class="frameworks"><li><a href="/tutorial/09-nav-react">react</a></li><li><a href="/tutorial/09-nav-vue">vue</a></li></ul></li><li class="solo"><a href="/tutorial/10-now-what">Part 10: Now What?</a></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@16.0.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
