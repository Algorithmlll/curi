<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Route Interactions Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><style data-emotion-css="aasxp9-header">.css-aasxp9-header{background:#222233;width:100%;padding:30px 15px;}.css-aasxp9-header nav{color:#efefef;}.css-aasxp9-header nav ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;list-style:none;padding:0;margin:0;}.css-aasxp9-header nav li{padding:0 10px;}.css-aasxp9-header nav a{color:#efefef;font-size:1.1em;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:50px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #222233;}.css-aasxp9-header nav a:hover{color:#ff9800;}.css-aasxp9-header nav a.active{color:#ff9800;border-bottom-color:#ff9800;}.css-aasxp9-header .home-link{font-size:1.5em;color:#ff9800;}@media only screen and (min-width:641px){.css-aasxp9-header{padding:0;position:fixed;z-index:1;}.css-aasxp9-header nav ul{max-width:100%;}.css-aasxp9-header nav ul li{margin-right:20px;padding:0;}.css-aasxp9-header nav a{border-bottom-width:3px;padding:0 5px;}}</style><header class="css-aasxp9-header"><nav><ul><li><a class="home-link " href="/">Curi</a></li><li><a class=" " href="/packages">Packages</a></li><li><a class=" " href="/guides/getting-started/">Guides</a></li><li><a class=" " href="/tutorial">Tutorials</a></li><li><a class=" " href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><style data-emotion-css="x6k3qt-main">.css-x6k3qt-main{width:calc(100vw - 20px);padding:10px 10px 0;margin-bottom:20px;}.css-x6k3qt-main a{color:#222233;}@media only screen and (min-width:641px){.css-x6k3qt-main{padding:50px 25px 0;}}</style><main class="css-x6k3qt-main"><style data-emotion-css="jb12jd-page">.css-jb12jd-page{position:relative;}@media only screen and (min-width:641px){.css-jb12jd-page{padding-top:15px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row-nowrap;-ms-flex-flow:row-nowrap;flex-flow:row-nowrap;}}</style><div class="css-jb12jd-page guide"><style data-emotion-css="1oop4xp-content">.css-1oop4xp-content ul{padding:0;list-style:none;}@media only screen and (min-width:641px){.css-1oop4xp-content{-webkit-order:2;-ms-flex-order:2;order:2;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 50px;}}</style><div class="css-1oop4xp-content"><h1>Route Interactions</h1><style data-emotion-css="1kutd5m-sidebySide">.css-1kutd5m-sidebySide{margin:10px 0 20px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}@media only screen and (min-width:641px){.css-1kutd5m-sidebySide > :first-child{margin-right:20px;}}</style><div class="css-1kutd5m-sidebySide"><style data-emotion-css="18ghg7h-explanation">.css-18ghg7h-explanation{width:100%;}.css-18ghg7h-explanation p{margin:0 0 25px;}@media only screen and (min-width:641px){.css-18ghg7h-explanation{-webkit-flex:1 1 50%;-ms-flex:1 1 50%;flex:1 1 50%;max-width:600px;}}</style><div class="css-18ghg7h-explanation"><p>Route interactions let you interact with a registered route using its name.</p><p>A registered route is generally any route that is in the array of routes that you used to create your router. However, some interactions only register routes that meet some criteria. For example, the<!-- --> <code class="language-javascript">prefetch</code> interaction only registers routes with asynchronous methods.</p><p>Route interactions are defined using objects with four properties: name, register, get, and reset.</p></div><style data-emotion-css="18z6812-codeBlock">.css-18z6812-codeBlock{width:100%;}.css-18z6812-codeBlock pre{height:100%;vertical-align:top;}@media only screen and (min-width:641px){.css-18z6812-codeBlock{-webkit-flex:1 0 50%;-ms-flex:1 0 50%;flex:1 0 50%;}.css-18z6812-codeBlock code{min-width:200px;}}</style><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">{
  // The string you will use to call the interaction.
  name: &#x27;my&#x27;,

  // A function used internally to register routes
  // with the interaction. You only need to use this when
  // writing your own interactions.
  register: function(route, parentData) {...},

  // This is the function that you will call. For example,
  // with this interaction, the get function will be
  // called when you call router.route.my(&#x27;...&#x27;)
  get: function(route) {...},
  reset: function() {...}
}</code></pre></div></div><div class="css-1kutd5m-sidebySide"><div class="css-18ghg7h-explanation"><p>Instead of importing the actual route interaction object, you typically import a factory function to create the object. This isn&#x27;t absolutely necessary, but is useful for server-side rendering.</p></div><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">// interactions/my.js
export default function createMyInteraction() {
  return {
    name: &quot;my&quot;,
    register() {...},
    get() {...},
    reset() {...}
  };
}

// index.js
import createMyInteraction from &quot;./interactions/my&quot;;

const interaction = createMyInteraction();</code></pre></div></div><style data-emotion-css="1ten54b-section">.css-1ten54b-section.section,.css-1ten54b-section.subsection{margin-top:15px;}.css-1ten54b-section.section .header-link,.css-1ten54b-section.subsection .header-link{margin-left:10px;-webkit-text-decoration:none;text-decoration:none;color:#666;}.css-1ten54b-section.aside{padding:5px 10px;border-left:2px solid #4caf50;background:#e8f5e9;margin-top:15px;}.css-1ten54b-section.aside .header-link{margin-left:10px;-webkit-text-decoration:none;text-decoration:none;color:#666;}.css-1ten54b-section.aside:not(pre) > code[class*="language-"]{background:#81c784;}</style><div class="css-1ten54b-section section" id="adding"><h2>Adding Interactions<a class="header-link" href="/guides/route-interactions/#adding">#</a></h2><div class="css-1kutd5m-sidebySide"><div class="css-18ghg7h-explanation"><p>Route interactions are provided to the router call as an array using the <code class="language-javascript">route</code> property of the options object (the third argument).</p></div><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">const router = curi(history, routes, {
  route: [createMyInteraction()]
});</code></pre></div></div><div class="css-1kutd5m-sidebySide"><div class="css-18ghg7h-explanation"><p>The route interaction will be added to the router&#x27;s <code class="language-javascript">route</code> <!-- -->property. When you call an interaction, you pass the name of the route that you want to interact with.</p></div><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">const myValue = router.route.my(&#x27;Some Route&#x27;, ...);</code></pre></div></div></div><div class="css-1ten54b-section section" id="creating"><h2>Creating Route Interactions<a class="header-link" href="/guides/route-interactions/#creating">#</a></h2><div class="css-1kutd5m-sidebySide"><div class="css-18ghg7h-explanation"><p>There are a few steps to creating your own route interactions.</p><p>Remember to export a function that will create the interaction object, not the actual interaction object.</p></div><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">// we&#x27;ll create an interaction that confirms
// a route is registered
export default function confirmInteraction() {
  ...
}</code></pre></div></div><div class="css-1kutd5m-sidebySide"><div class="css-18ghg7h-explanation"><p>The function should return an object with four properties:<!-- --> <code class="language-javascript">name</code>, <code class="language-javascript">register</code>, <code class="language-javascript">get</code>, and<!-- --> <code class="language-javascript">reset</code>.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>a unique identifier for the route interaction</td></tr><tr><td>register</td><td>a function to internally store information about routes</td></tr><tr><td>get</td><td>a function that will receive a route&#x27;s name (and possibly other arguments) and perform some task using the related route</td></tr><tr><td>reset</td><td>a function that will reset the interaction&#x27;s internal state (this is used if you call <code class="language-javascript">router.replaceRoutes()</code>)</td></tr></tbody></table></div><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">export default function confirmInteraction() {
  // maintain an object of known routes
  let knownRoutes = {};
  return {
    name: &#x27;confirm&#x27;,
    // when a route is registered,
    // we store it using its name
    register: route =&gt; {
      knownRoutes[route.name] = true;
    },
    // get checks the known routes to see if one exists
    // with the requested name
    get: (name) =&gt; {
      return knownRoutes[name] != null
    },
    // reset the known routes
    reset: () =&gt; {
      knownRoutes = {};
    }
  };
}</code></pre></div></div><div class="css-1kutd5m-sidebySide"><div class="css-18ghg7h-explanation"><p>In your application, you can import it, call the factory to create the interaction, and register the interaction when you create the router.</p></div><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">import curi from &#x27;@curi/core&#x27;;
import confirmFactory from &#x27;./interactions/confirm&#x27;

const routes = [{ name: &#x27;Home&#x27;, path: &#x27;&#x27; }];

const router = curi(history, routes, {
  route: [confirmFactory()]
});

router.route.confirm(&#x27;Home&#x27;); // true
router.route.confirm(&#x27;Elsewhere&#x27;); // false</code></pre></div></div><div class="css-1ten54b-section subsection" id="Slightly-more-advanced"><h3>Slightly more advanced<a class="header-link" href="/guides/route-interactions/#Slightly-more-advanced">#</a></h3><div class="css-1kutd5m-sidebySide"><div class="css-18ghg7h-explanation"><p>You might want to write an interaction that uses data from parent routes when registering a route. For example, the built-in pathname interaction joins a route&#x27;s path with it parent path(s).</p><p>The second argument passed to a router interaction&#x27;s<!-- --> <code class="language-javascript">register()</code> function is a parent data object. For root routes, this will be <code class="language-javascript">undefined</code>. For nested routes, this is the value returned by the parent route&#x27;s <code class="language-javascript">register()</code> <!-- -->function.</p></div><div class="css-18z6812-codeBlock"><pre><code class="language-javascript">function ParentFactory() {
  let routeTree = {};
  return {
    name: &#x27;routeParent&#x27;,
    register: (route, parent) =&gt; {
      routeTree[route.name] = parent;
      // we return route.name and any child routes will
      // receive that as their parent value
      return route.name;
    },
    get: (name) =&gt; {
      return routeTree[name];
    },
    reset: () =&gt; {
      routeTree = {};
    }
  }
}</code></pre></div></div></div></div><div><h2>Next</h2><p>Next on the list are side effects, which you can learn more about in the<!-- --> <a href="/guides/side-effects/">Using Side Effects</a> <!-- -->guide.</p></div></div><style data-emotion-css="36dilg-pageLinks">.css-36dilg-pageLinks ul{margin:3px 0;padding-left:0px;list-style:none;}.css-36dilg-pageLinks li{margin:3px 0;}.css-36dilg-pageLinks a{-webkit-text-decoration:none;text-decoration:none;}.css-36dilg-pageLinks h3{border-bottom:1px solid #666;}.css-36dilg-pageLinks .active{font-weight:bold;}.css-36dilg-pageLinks .link-group{margin-bottom:15px;}.css-36dilg-pageLinks .link-list li.with{margin:10px 0;}.css-36dilg-pageLinks .link-list p{margin:0;}.css-36dilg-pageLinks button.toggler{position:fixed;right:5px;bottom:5px;width:75px;height:75px;border-radius:40px;border:0;background:#ff9800;font-size:1em;z-index:1;}.css-36dilg-pageLinks .children{display:none;background:#efefef;padding:10px;}.css-36dilg-pageLinks .children.visible{display:block;position:fixed;top:0;bottom:0;left:0;right:0;overflow-y:scroll;}@media only screen and (min-width:641px){.css-36dilg-pageLinks{position:relative;width:200px;min-width:200px;margin-right:15px;-webkit-order:1;-ms-flex-order:1;order:1;}.css-36dilg-pageLinks h3{font-size:1.1em;}.css-36dilg-pageLinks button.toggler{display:none;}.css-36dilg-pageLinks .children{display:block;background:transparent;}}</style><div class="css-36dilg-pageLinks"><button type="button" class="toggler">Menu</button><div class="children"><h2>Guides</h2><ul><li class="link-group"><h3>basic</h3><ul class="link-list"><li class="solo"><a class=" " href="/guides/installation/">Installation</a></li><li class="solo"><a class=" " href="/guides/getting-started/">Getting Started</a></li><li class="solo"><a class=" " href="/guides/sync-or-async/">Sync or Async</a></li><li class="solo"><a class=" " href="/guides/routes/">Routes</a></li><li class="solo"><a class=" " href="/guides/responses/">Responses</a></li><li class="solo"><a class=" " href="/guides/observers/">Observers</a></li><li class="solo"><a class=" " href="/guides/navigation-objects/">Navigation Objects</a></li></ul></li><li class="link-group"><h3>advanced</h3><ul class="link-list"><li class="solo"><a class=" active" href="/guides/route-interactions/">Route Interactions</a></li><li class="solo"><a class=" " href="/guides/side-effects/">Side Effects</a></li><li class="solo"><a class=" " href="/guides/code-splitting/">Code Splitting</a></li><li class="solo"><a class=" " href="/guides/loading/">Loading Route Data</a></li><li class="solo"><a class=" " href="/guides/react-native/">React Native Tips</a></li><li class="solo"><a class=" " href="/guides/apollo/">Apollo Integration</a></li></ul></li><li class="link-group"><h3>migration</h3><ul class="link-list"><li class="solo"><a class=" " href="/guides/migrate-rrv3/">React Router v2/3</a></li><li class="solo"><a class=" " href="/guides/migrate-rrv4/">React Router v4</a></li></ul></li></ul></div></div></div></main></div>
    <script src="https://unpkg.com/react@16.3.2/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.3.2/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
