<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sync or Async Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot=""><header><nav><ul><li><a class="home-link" href="/">Curi</a></li><li><a href="/packages">Packages</a></li><li><a href="/tutorial">Tutorials</a></li><li><a class="active" href="/guides">Guides</a></li><li><a href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main><div class="guide"><div class="content"><h1>Sync or Async</h1><p>Curi can match routes synchronously or asynchronously.</p><p>Synchronous matching means when a navigation event is triggered (e.g. clicking a link or button), the router will immediately match a route and emit a response.</p><p>Asynchronous matching, on the other hand, allows you to make data requests related to the matched route, and the response will not be emitted until after those requests have completed. This is useful for code-splitting and preloading data for a route.</p><p>By default, Curi will perform synchronous matching. If any of your routes have async match methods (<code class="language-javascript">match.initial</code> and<!-- --> <code class="language-javascript">match.every</code>), the router will become asynchronous.</p><pre><code class="language-javascript">// sync
const routes = [
  { name: &quot;Home&quot;, path: &quot;&quot; },
  { name: &quot;About&quot;, path: &quot;about }
];

// async
const routes = [
  { name: &quot;Home&quot;, path: &quot;&quot; },
  {
    name: &quot;About&quot;,
    path: &quot;about,
    match: {
      // this trigger async matching
      initial: () =&gt; import(&quot;./components/About&quot;)
    }
  }
];</code></pre><div class="note"><strong>Note:</strong> <!-- -->When Curi does asynchronous matching, <strong>all</strong> routes and matched asynchronously, not just the ones with <code class="language-javascript">match.initial</code>/<code class="language-javascript">match.every</code> <!-- -->functions.</div><p>For the most part, it shouldn&#x27;t matter to you (or your users) whether Curi is performing synchronous or asynchronous matching. However, there are a couple of things that you should be aware of when it comes to async matching.</p><ol><li><p>In async mode, you should wait for the initial response before rendering. This can be done by using <code class="language-javascript">router.respond</code> to delay rendering until the initial response is ready. This isn&#x27;t absolutely necessary, but if you do not do this, the initial render might be performed with a response that is <code class="language-javascript">undefined</code></p><pre><code class="language-javascript">const router = curi(history, routes);
router.respond(() =&gt; {
  // the initial response is ready, so it is safe to render
  ReactDOM.render(...);
});</code></pre></li><li><p>Navigation is async, which means there might be a slight delay between when the user clicks a link and when the new response is emitted. During this time, the navigation can be interrupted with a new navigation. Curi handles this internally, but you might want to update your UI after a link/button is clicked to indicate that the next page is loading. You can see an example of this in the<!-- --> <a href="/examples/react/data-loading/">Data Loading Example</a>.</p></li></ol><h2>Next</h2><p>We should take a look at how to write routes with the<!-- --> <a href="/guides/routes/">All About Routes</a> <!-- -->guide.</p></div><div class="sidebar"><h2>Guides</h2><ul><li class="link-group"><h3>basic</h3><ul class="link-list"><li class="solo"><a href="/guides/installation/">Installation</a></li><li class="solo"><a href="/guides/getting-started/">Getting Started</a></li><li class="solo"><a class="active" href="/guides/sync-or-async/">Sync or Async</a></li><li class="solo"><a href="/guides/routes/">Routes</a></li><li class="solo"><a href="/guides/response-handlers/">Response Handlers</a></li><li class="solo"><a href="/guides/responses/">Response Objects</a></li><li class="solo"><a href="/guides/navigation-objects/">Navigation Objects</a></li></ul></li><li class="link-group"><h3>advanced</h3><ul class="link-list"><li class="solo"><a href="/guides/addons/">Using Add-ons</a></li><li class="solo"><a href="/guides/side-effects/">Using Side Effects</a></li><li class="solo"><a href="/guides/response-caching/">Response Caching</a></li><li class="solo"><a href="/guides/code-splitting/">Code Splitting</a></li><li class="solo"><a href="/guides/loading/">Loading Route Data</a></li><li class="solo"><a href="/guides/react/">React Basics</a></li><li class="solo"><a href="/guides/react-native/">React Native Tips</a></li></ul></li><li class="link-group"><h3>migration</h3><ul class="link-list"><li class="solo"><a href="/guides/migrate-rrv3/">Migrate from React Router v2/3 to Curi</a></li></ul></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@16.0.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
