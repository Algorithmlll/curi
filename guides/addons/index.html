<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Using Addons Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot="" data-reactid="1" data-react-checksum="258570642"><header data-reactid="2"><nav data-reactid="3"><ul data-reactid="4"><li data-reactid="5"><a class="home-link" href="/" data-reactid="6">Curi</a></li><li data-reactid="7"><a href="/packages" data-reactid="8">Packages</a></li><li data-reactid="9"><a href="/guides/getting-started/" data-reactid="10">Guides</a></li><li data-reactid="11"><a href="/examples" data-reactid="12">Examples</a></li><li data-reactid="13"><a href="https://github.com/pshrmn/curi" data-reactid="14">GitHub</a></li></ul></nav></header><main data-reactid="15"><div class="guide" data-reactid="16"><div class="content" data-reactid="17"><h1 data-reactid="18">Using Addons</h1><p data-reactid="19">Addons in Curi allow you to interact with a registered route using its name. A registered route is generally any route that is in the array of routes that you used to create your configuration object. However, some addons only register routes that meet some criteria.</p><p data-reactid="20">Addons are objects with three properties: name, register, and get.</p><pre class="language-javascript" data-reactid="21">{
  // the string you will use to call the addon
  name: &#x27;MyAddon&#x27;,

  // a function used internally to register routes
  // with the addon. You only need to use this when
  // writing your own addons
  register: function(route, parentData) {...},

  // this is the function that will be added to your
  // config object&#x27;s addons property. For example, with
  // this addon, the get function will be called when
  // you call config.addons.MyAddon(&#x27;...&#x27;)
  get: function(route) {...},
  reset: function() {...}
}</pre><p data-reactid="22">However, when you import them, you are actually importing an addon factory function. You need to call the function to create the addon that you will pass to your Curi configuration</p><pre class="language-javascript" data-reactid="23">function myAddonFactory() {
  return { name: ..., register: ..., get: ..., };
}</pre><div class="section" data-reactid="24"><h2 id="adding" data-reactid="25"><!-- react-text: 26 -->Adding addons<!-- /react-text --><a class="header-link" href="/guides/addons/#adding" data-reactid="27">#</a></h2><p data-reactid="28">As stated above, whenever you include addons in your configuration object, you do not pass the actual addon object. Instead, you pass an addon instance (multiple configuration objects would each have their own instance of the addon), which can be useful for server-side rendering.</p><p data-reactid="29"><!-- react-text: 30 -->Addons are provided to the <!-- /react-text --><code class="language-javascript" data-reactid="31">createConfig</code><!-- react-text: 32 --> call as an array using the addons property of the options object (the third argument to <!-- /react-text --><code class="language-javascript" data-reactid="33">createConfig</code><!-- react-text: 34 -->).<!-- /react-text --></p><pre class="language-javascript" data-reactid="35">const config = createConfig(history, routes, {
  addons: [createMyAddon()]
});</pre><p data-reactid="36">The addon will be added to the configuration object&#x27;s addons property. To call an addon, you simply use its name.</p><pre class="language-javascript" data-reactid="37">const myValue = config.addons.myAddon(&#x27;Some Route&#x27;, ...);</pre></div><div class="section" data-reactid="38"><h2 id="creating" data-reactid="39"><!-- react-text: 40 -->Creating Addons<!-- /react-text --><a class="header-link" href="/guides/addons/#creating" data-reactid="41">#</a></h2><p data-reactid="42">You may find yourself wanting to add a custom addon to your application. There are just a few steps that you should follow in order to write your own addon.</p><p data-reactid="43">Remember that you need to export a function that will create the addon object, not the actual addon object.</p><pre class="language-javascript" data-reactid="44">export default function myAddonFactory() {
  ...
}</pre><p data-reactid="45"><!-- react-text: 46 -->The function should return an object with four properties: <!-- /react-text --><code class="language-javascript" data-reactid="47">name</code><!-- react-text: 48 -->, <!-- /react-text --><code class="language-javascript" data-reactid="49">register</code><!-- react-text: 50 -->,<!-- /react-text --><!-- react-text: 51 --> <!-- /react-text --><code class="language-javascript" data-reactid="52">get</code><!-- react-text: 53 -->, and <!-- /react-text --><code class="language-javascript" data-reactid="54">reset</code><!-- react-text: 55 -->. name is a unique identifier for the addon, register is a function that will be used for your addon to store information about each route, get is a function that will receive a route&#x27;s name (and possibly other arguments) and perform some task using the related route, and reset is a function that will reset the addon&#x27;s internal state (this is used if you call <!-- /react-text --><code class="language-javascript" data-reactid="56">config.refresh</code><!-- react-text: 57 -->).<!-- /react-text --></p><pre class="language-javascript" data-reactid="58">export default function myAddonFactory() {
  let knownRoutes = {};
  return {
    name: &#x27;MyFirstAddon&#x27;,
    register: route =&gt; {
      knownRoutes[route.name] = true;
    },
    get: (name) =&gt; {
      return knownRoutes[name] != null
    },
    reset: () =&gt; {
      knownRoutes = {};
    }
  };
}</pre><p data-reactid="59">That is all there is to creating a basic addon. Now, you just need to make sure to pass it to your configuration object and you will be able to call your addon&#x27;s get function from your configuration object.</p><pre class="language-javascript" data-reactid="60">import createConfig from &#x27;curi&#x27;;
import myAddonFactory from &#x27;./myAddon&#x27;

const routes = [{ name: &#x27;Home&#x27;, path: &#x27;&#x27; }];

const config = createConfig(history, routes, {
  addons: [myAddonFactory()]
});

config.addons.MyFirstAddon(&#x27;Home&#x27;); // true
config.addons.MyFirstAddon(&#x27;Elsewhere&#x27;); // false</pre><div class="subsection" data-reactid="61"><h3 id="Slightly-more-advanced" data-reactid="62"><!-- react-text: 63 -->Slightly more advanced<!-- /react-text --><a class="header-link" href="/guides/addons/#Slightly-more-advanced" data-reactid="64">#</a></h3><p data-reactid="65">You might want to write an addon that uses data from parent routes when registering a route. For example, the built-in pathname addon joins a route&#x27;s path with it parent path(s).</p><p data-reactid="66">If you want your addon to provide similar functionality, all you have to do is have the register function return the data that should be passed to its child routes. Then, when any children of that route are registered, they will be passed the return value from their parent as the second argument of the register function.</p><pre class="language-javascript" data-reactid="67">function ParentFactory() {
  let routeTree = {};
  return {
    name: &#x27;routeParent&#x27;,
    register: (route, parent) =&gt; {
      // parent is the value returned by the route&#x27;s parent route
      // and will be undefined when a route does not have a parent
      routeTree[route.name] = parent;
      return route.name;
    },
    get: (name) =&gt; {
      return routeTree[name];
    },
    reset: () =&gt; {
      routeTree = {};
    }
  }
}</pre></div></div><div data-reactid="68"><h2 data-reactid="69">Next</h2><p data-reactid="70"><!-- react-text: 71 -->Next on the list are side effects, which you can learn more about in the<!-- /react-text --><!-- react-text: 72 --> <!-- /react-text --><a href="/guides/side-effects/" data-reactid="73">Using Side Effects</a><!-- react-text: 74 --> guide.<!-- /react-text --></p></div></div><div class="sidebar" data-reactid="75"><h2 data-reactid="76">Guides</h2><ul data-reactid="77"><li class="link-group" data-reactid="78"><h3 data-reactid="79">basic</h3><ul class="link-list" data-reactid="80"><li class="solo" data-reactid="81"><a href="/guides/installation/" data-reactid="82">Installation</a></li><li class="solo" data-reactid="83"><a href="/guides/getting-started/" data-reactid="84">Getting Started</a></li><li class="solo" data-reactid="85"><a href="/guides/routes/" data-reactid="86">All About Routes</a></li><li class="solo" data-reactid="87"><a href="/guides/responses/" data-reactid="88">Rendering with Responses</a></li></ul></li><li class="link-group" data-reactid="89"><h3 data-reactid="90">advanced</h3><ul class="link-list" data-reactid="91"><li class="solo" data-reactid="92"><a class="active" href="/guides/addons/" data-reactid="93">Using Addons</a></li><li class="solo" data-reactid="94"><a href="/guides/side-effects/" data-reactid="95">Using Side Effects</a></li><li class="solo" data-reactid="96"><a href="/guides/response-caching/" data-reactid="97">Response Caching</a></li><li class="solo" data-reactid="98"><a href="/guides/code-splitting/" data-reactid="99">Code Splitting with the Preload Property</a></li><li class="solo" data-reactid="100"><a href="/guides/load/" data-reactid="101">The Load Property</a></li><li class="solo" data-reactid="102"><a href="/guides/react/" data-reactid="103">React Basics</a></li></ul></li><li class="link-group" data-reactid="104"><h3 data-reactid="105">migration</h3><ul class="link-list" data-reactid="106"><li class="solo" data-reactid="107"><a href="/guides/migrate-rrv3/" data-reactid="108">Migrate from React Router v2/3 to Curi</a></li></ul></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@15.6.1/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
