<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All About Routes Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot="" data-reactid="1" data-react-checksum="324130559"><header data-reactid="2"><nav data-reactid="3"><ul data-reactid="4"><li data-reactid="5"><a class="home-link" href="/" data-reactid="6">Curi</a></li><li data-reactid="7"><a href="/packages" data-reactid="8">Packages</a></li><li data-reactid="9"><a href="/guides/getting-started/" data-reactid="10">Guides</a></li><li data-reactid="11"><a href="/examples" data-reactid="12">Examples</a></li><li data-reactid="13"><a href="https://github.com/pshrmn/curi" data-reactid="14">GitHub</a></li></ul></nav></header><main data-reactid="15"><div class="guide" data-reactid="16"><div class="content" data-reactid="17"><h1 data-reactid="18">All About Routes</h1><p data-reactid="19">Routes are simply JavaScript objects with two required props: name and path. There are also a number of other props that you can use to enhance the routes. We will cover these below.</p><pre class="language-javascript" data-reactid="20">{
  name: &#x27;Home&#x27;,
  path: &#x27;&#x27;
};</pre><div class="section" data-reactid="21"><h2 id="matching-routes" data-reactid="22"><!-- react-text: 23 -->Matching Routes<!-- /react-text --><a class="header-link" href="/guides/routes/#matching-routes" data-reactid="24">#</a></h2><p data-reactid="25">First, we should cover how route matching works. Curi takes an array of route objects. Whenever Curi receives a new location, it will walk over the route objects in the order that they are defined in the array.</p><p data-reactid="26">Sometimes a route&#x27;s path with only partially match the location&#x27;s pathname. When this happens, the matching behavior will vary based on the route&#x27;s props. By default, routes perform exact matching. This means that when the route only matches part of the pathname, it does not count as a match.</p><pre class="language-javascript" data-reactid="27">// when the pathname is &#x27;/a/Run+The+Jewels+3/Hey+Kids&#x27;,
// the Album route will partially match the pathname. However,
// Curi looks for complete matches, so it will move on to the
// next route
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;
}</pre><p data-reactid="28">However, if the route has children, then Curi will check if any of those routes form a complete match before moving on to the next route in the routes array.</p><pre class="language-javascript" data-reactid="29">// when the pathname is &#x27;/a/Coloring+Book/All+Night&#x27;,
// the Album route will partially match the pathname. Then,
// its child route Song will be tested and fully match the pathname.
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;,
  children: [
    {
      name: &#x27;Song&#x27;,
      path: &#x27;:title&#x27;
    }
  ]
}</pre><p data-reactid="30"><!-- react-text: 31 -->Another possibility happens when you use the <!-- /react-text --><code class="language-javascript" data-reactid="32">pathOptions</code><!-- react-text: 33 --> object to set<!-- /react-text --><!-- react-text: 34 --> <!-- /react-text --><code class="language-javascript" data-reactid="35">end: false</code><!-- react-text: 36 -->. When you do that, then a route the partially matches will consider itself matched.<!-- /react-text --></p><pre class="language-javascript" data-reactid="37">// when the pathname is &#x27;/a/Good+Kid,+M.A.A.D+City/Poetic+Justice&#x27;,
// the Album route will partially match. However, because it sets
// end to false, the partial match will be used.
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:albumID&#x27;,
  pathOptions: {
    end: false
  }
}</pre><p data-reactid="38"><!-- react-text: 39 -->If none of your routes match a pathname, then Curi will set a &quot;404&quot; status on the response object. The body property of the response will also be <!-- /react-text --><code class="language-javascript" data-reactid="40">undefined</code><!-- react-text: 41 -->, so it is important that your application checks the response&#x27;s status when it goes to render a response. You can also add a wildcard route (<!-- /react-text --><code class="language-javascript" data-reactid="42">path: &#x27;*&#x27;</code><!-- react-text: 43 -->) to the end of your routes array, and that route will always match. You may want to still manually set the status to &quot;404&quot; for the wildcard route, but it is not required.<!-- /react-text --></p></div><div class="section" data-reactid="44"><h2 id="route-properties" data-reactid="45"><!-- react-text: 46 -->Route properties<!-- /react-text --><a class="header-link" href="/guides/routes/#route-properties" data-reactid="47">#</a></h2><div class="subsection" data-reactid="48"><h3 id="name" data-reactid="49"><!-- react-text: 50 -->name<!-- /react-text --><a class="header-link" href="/guides/routes/#name" data-reactid="51">#</a></h3><p data-reactid="52">A unique identifier. This should be a string or a symbol.</p></div><div class="subsection" data-reactid="53"><h3 id="path" data-reactid="54"><!-- react-text: 55 -->path<!-- /react-text --><a class="header-link" href="/guides/routes/#path" data-reactid="56">#</a></h3><p data-reactid="57"><!-- react-text: 58 -->A path-to-regexp style string. This should <!-- /react-text --><strong data-reactid="59">not</strong><!-- react-text: 60 --> have a leading slash. The string will be passed to path-to-regexp to generate a regular expression. Any<!-- /react-text --><!-- react-text: 61 --> <!-- /react-text --><a href="https://github.com/pillarjs/path-to-regexp#parameters" data-reactid="62">parameters</a><!-- react-text: 63 --> will be identified so that they can be parsed out when matching against a location&#x27;s pathname.<!-- /react-text --></p><div class="note" data-reactid="64"><strong data-reactid="65">Note:</strong><!-- react-text: 66 --> <!-- /react-text --><!-- react-text: 67 -->While path-to-regexp supports arrays and RegExps, only string paths are supported here. This is because the path must also be reversible to create a pathname given params.<!-- /react-text --></div></div><div class="subsection" data-reactid="68"><h3 id="pathOptions" data-reactid="69"><!-- react-text: 70 -->pathOptions<!-- /react-text --><a class="header-link" href="/guides/routes/#pathOptions" data-reactid="71">#</a></h3><p data-reactid="72"><!-- react-text: 73 -->If you need to provide different path options than<!-- /react-text --><!-- react-text: 74 --> <!-- /react-text --><a href="https://github.com/pillarjs/path-to-regexp#usage" data-reactid="75">the defaults</a><!-- react-text: 76 --> used by path-to-regexp, you should specify them with a <!-- /react-text --><code class="language-javascript" data-reactid="77">pathOptions</code><!-- react-text: 78 --> object.<!-- /react-text --></p><div class="note" data-reactid="79"><strong data-reactid="80">Note:</strong><!-- react-text: 81 --> <!-- /react-text --><!-- react-text: 82 -->If a route has a children array property, it will <!-- /react-text --><strong data-reactid="83">always</strong><!-- react-text: 84 --> have the <!-- /react-text --><code class="language-javascript" data-reactid="85">end</code><!-- react-text: 86 --> <!-- /react-text --><!-- react-text: 87 --> path option set to false.<!-- /react-text --></div></div><div class="subsection" data-reactid="88"><h3 id="body" data-reactid="89"><!-- react-text: 90 -->body<!-- /react-text --><a class="header-link" href="/guides/routes/#body" data-reactid="91">#</a></h3><p data-reactid="92">The body property gives you the opportunity to set the body property of a response for a given route. This must be a function and its return value will be what is set as the response object&#x27;s body property.</p><pre class="language-javascript" data-reactid="93">// when the user visits /contact, the response object&#x27;s body
// property will be the Contact value
const contact = {
  name: &#x27;Contact&#x27;,
  path: &#x27;contact&#x27;,
  body: () =&gt; Contact
};</pre><p data-reactid="94"><!-- react-text: 95 -->While the above example returns a single value, you might have multiple page values that you want to associate with a route. In that case, you can return an object with a property for each one. Then, when you render the application, you would access the values using <!-- /react-text --><code class="language-javascript" data-reactid="96">response.body.&lt;property-name&gt;</code><!-- react-text: 97 -->.<!-- /react-text --><!-- react-text: 98 --> <!-- /react-text --><!-- react-text: 99 -->If you take this approach, each route&#x27;s <!-- /react-text --><code class="language-javascript" data-reactid="100">body</code><!-- react-text: 101 --> function should return an object with the same properties.<!-- /react-text --></p><pre class="language-javascript" data-reactid="102">const routes = [
  {
    name: &#x27;Home&#x27;,
    path: &#x27;&#x27;,
    body: () =&gt; ({ main: Home, nav: HomeNav })
  },
  {
    name: &#x27;Contact&#x27;,
    path: &#x27;contact&#x27;,
    body: () =&gt; ({ main: Contact, nav: ContactNav })
  }
];

function render(response) {
  const { main, nav } = response.body
  ...
}</pre></div><div class="subsection" data-reactid="103"><h3 id="title" data-reactid="104"><!-- react-text: 105 -->title<!-- /react-text --><a class="header-link" href="/guides/routes/#title" data-reactid="106">#</a></h3><p data-reactid="107"><!-- react-text: 108 -->You can use the title property of a route to specify a title string that should be set on the response when that route matches. This can either be a string or a function. If it is a string, then<!-- /react-text --><code class="language-javascript" data-reactid="109">response.title</code><!-- react-text: 110 --> will be set to the value of <!-- /react-text --><code class="language-javascript" data-reactid="111">route.title</code><!-- react-text: 112 -->. If it is a function, it will be called (and passed the <!-- /react-text --><code class="language-javascript" data-reactid="113">response.params</code><!-- react-text: 114 --> and<!-- /react-text --><!-- react-text: 115 --> <!-- /react-text --><code class="language-javascript" data-reactid="116">response.data</code><!-- react-text: 117 --> values) to generate the title string.<!-- /react-text --></p><p data-reactid="118">If a route does not have a title property, when it matches, the response&#x27;s title property will be an empty string.</p><pre class="language-javascript" data-reactid="119">// as a string
{
  name: &#x27;Contact&#x27;,
  path: &#x27;contact&#x27;,
  title: &#x27;How to contact us&#x27;
}

// as a function
{
  name: &#x27;Contact Method&#x27;,
  path: &#x27;:method&#x27;,
  title: (params, data) =&gt; `Contact via ${params.method}`
}</pre></div><div class="subsection" data-reactid="120"><h3 id="children" data-reactid="121"><!-- react-text: 122 -->children<!-- /react-text --><a class="header-link" href="/guides/routes/#children" data-reactid="123">#</a></h3><p data-reactid="124">An optional array of route objects. Any child routes will be matched relative to their parent route&#x27;s path. This means that if a parent route&#x27;s path string is &#x27;one&#x27; and a child route&#x27;s path string is &#x27;two&#x27;, the child will match when the pathname is &#x27;one/two&#x27;.</p></div><div class="subsection" data-reactid="125"><h3 id="preload" data-reactid="126"><!-- react-text: 127 -->preload<!-- /react-text --><a class="header-link" href="/guides/routes/#preload" data-reactid="128">#</a></h3><p data-reactid="129"><!-- react-text: 130 -->A function that will only be called the first time that a route matches. This should only be used for loading resources that are required for the route to display properly. For example, if you are doing code splitting with Webpack using <!-- /react-text --><code class="language-javascript" data-reactid="131">import()</code><!-- react-text: 132 -->, you would load the modules in preload.<!-- /react-text --></p><p data-reactid="133">The preload function must return a Promise.</p><pre class="language-javascript" data-reactid="134">const about = {
  name: &#x27;About&#x27;,
  path: &#x27;about&#x27;,
  preload: () =&gt; {
    return import(&#x27;./components/About&#x27;)
      .then(module =&gt; AsyncStore.register(module.default));
  }
};</pre></div><div class="subsection" data-reactid="135"><h3 id="load" data-reactid="136"><!-- react-text: 137 -->load<!-- /react-text --><a class="header-link" href="/guides/routes/#load" data-reactid="138">#</a></h3><p data-reactid="139"><!-- react-text: 140 -->A function that can be used for data fetching as well as for triggering redirects. The load function will be passed the params object that is parsed from the location&#x27;s pathname (using the route and its ancestor&#x27;s paths), the current location, a modifiers object that can be used to modify the response object that will be created, and an object containing all of the registered Curi addons (the <!-- /react-text --><code class="language-javascript" data-reactid="141">pathname</code><!-- react-text: 142 --> addon being particularly useful).<!-- /react-text --></p><p data-reactid="143">Like preload, load must return a Promise.</p><pre class="language-javascript" data-reactid="144">// set response data
const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  load: (params, location, mod, addons) =&gt; {
    return fetch(`/api/users/${params.id}`)
      .then(resp =&gt; JSON.parse(resp))
      .then(data =&gt; mod.setData(data);)
      .catch(err =&gt; {
        mod.fail(err);
        mod.setStatus(404);
      });
  }
}

// set a permanent redirect
const routes = [
  {
    name: &#x27;Photo&#x27;,
    path: &#x27;p/:id&#x27;
  },
  {
    name: &#x27;Old Photo&#x27;,
    path: &#x27;photo/:id&#x27;,
    load: (params, location, mod, addons) =&gt; {
      const pathname = addons.pathname(&#x27;Photo&#x27;, params);
      mod.redirect({ ...location, pathname }, 301);
    }
  }
]
// navigating to /photo/123 will automatically redirect to /p/123</pre><p data-reactid="145"><!-- react-text: 146 -->What is that modifiers object that gets passed to the load function? It contains a number of functions that you can use to modify the response. These functions are <!-- /react-text --><code class="language-javascript" data-reactid="147">redirect</code><!-- react-text: 148 -->, <!-- /react-text --><code class="language-javascript" data-reactid="149">fail</code><!-- react-text: 150 -->,<!-- /react-text --><!-- react-text: 151 --> <!-- /react-text --><code class="language-javascript" data-reactid="152">setStatus</code><!-- react-text: 153 -->, and <!-- /react-text --><code class="language-javascript" data-reactid="154">setData</code><!-- react-text: 155 -->.<!-- /react-text --></p><ul data-reactid="156"><li data-reactid="157"><code class="language-javascript" data-reactid="158">redirect(to, code)</code><!-- react-text: 159 --> - This allows you to turn the response into a redirect response. When you application receives a redirect response, it should redirect to the new location (using your history object) instead of re-rendering. If you do not provide a code, then 301 will be used. Setting the status code is mostly important for rendering on the server. The <!-- /react-text --><code class="language-javascript" data-reactid="160">to</code><!-- react-text: 161 --> argument should be a string or a location object. Once the response has been created, Curi will automatically redirect to the <!-- /react-text --><code class="language-javascript" data-reactid="162">to</code><!-- react-text: 163 --> location.<!-- /react-text --></li><li data-reactid="164"><code class="language-javascript" data-reactid="165">fail(error)</code><!-- react-text: 166 --> - A method to call when something goes wrong. This will add an error property to the response.<!-- /react-text --></li><li data-reactid="167"><code class="language-javascript" data-reactid="168">setStatus(code)</code><!-- react-text: 169 --> - This method will set a new status for the response (the default status is 200 when a route matches and 404 when no routes match).<!-- /react-text --></li><li data-reactid="170"><code class="language-javascript" data-reactid="171">setData(data)</code><!-- react-text: 172 --> - The value passed to this method will be set as the response&#x27;s data property.<!-- /react-text --></li></ul></div><div class="subsection" data-reactid="173"><h3 id="extra" data-reactid="174"><!-- react-text: 175 -->extra<!-- /react-text --><a class="header-link" href="/guides/routes/#extra" data-reactid="176">#</a></h3><p data-reactid="177"><!-- react-text: 178 -->If you have any additional properties that you want attached to a route, use the <!-- /react-text --><code class="language-javascript" data-reactid="179">extra</code><!-- react-text: 180 --> property. You will be able to use <!-- /react-text --><code class="language-javascript" data-reactid="181">route.extra</code><!-- react-text: 182 --> in any custom addons or when a route matches via <!-- /react-text --><code class="language-javascript" data-reactid="183">response.route.extra</code><!-- react-text: 184 -->.<!-- /react-text --></p><p data-reactid="185"><!-- react-text: 186 -->You can attach anything you want to <!-- /react-text --><code class="language-javascript" data-reactid="187">extra</code><!-- react-text: 188 --> or you may never find yourself needing to use this. One possible use case for <!-- /react-text --><code class="language-javascript" data-reactid="189">extra</code><!-- react-text: 190 --> is that you could specify entrance/exit animation types. One route might want to fade in, while another might slide in.<!-- /react-text --></p><pre class="language-javascript" data-reactid="191">const routes = [
  {
    name: &#x27;A Route&#x27;,
    path: &#x27;a-route&#x27;,
    extra: {
      transition: &#x27;fade&#x27;
    }
  },
  {
    name: &#x27;B Route&#x27;,
    path: &#x27;b-route&#x27;,
    extra: {
      enter: &#x27;slide-right&#x27;
    }
  }
];</pre></div></div><div data-reactid="192"><h2 data-reactid="193">Next</h2><p data-reactid="194"><!-- react-text: 195 -->Now that you know how to setup your routes, we can get to the good part: actually rendering your application using response objects. Check out the<!-- /react-text --><!-- react-text: 196 --> <!-- /react-text --><a href="/guides/responses/" data-reactid="197">Rendering with Responses</a><!-- react-text: 198 --> guide to learn how.<!-- /react-text --></p></div></div><div class="sidebar" data-reactid="199"><h2 data-reactid="200">Guides</h2><ul data-reactid="201"><li class="link-group" data-reactid="202"><h3 data-reactid="203">basic</h3><ul class="link-list" data-reactid="204"><li class="solo" data-reactid="205"><a href="/guides/installation/" data-reactid="206">Installation</a></li><li class="solo" data-reactid="207"><a href="/guides/getting-started/" data-reactid="208">Getting Started</a></li><li class="solo" data-reactid="209"><a class="active" href="/guides/routes/" data-reactid="210">All About Routes</a></li><li class="solo" data-reactid="211"><a href="/guides/responses/" data-reactid="212">Rendering with Responses</a></li></ul></li><li class="link-group" data-reactid="213"><h3 data-reactid="214">advanced</h3><ul class="link-list" data-reactid="215"><li class="solo" data-reactid="216"><a href="/guides/addons/" data-reactid="217">Using Addons</a></li><li class="solo" data-reactid="218"><a href="/guides/side-effects/" data-reactid="219">Using Side Effects</a></li><li class="solo" data-reactid="220"><a href="/guides/response-caching/" data-reactid="221">Response Caching</a></li><li class="solo" data-reactid="222"><a href="/guides/code-splitting/" data-reactid="223">Code Splitting with the Preload Property</a></li><li class="solo" data-reactid="224"><a href="/guides/load/" data-reactid="225">The Load Property</a></li><li class="solo" data-reactid="226"><a href="/guides/react/" data-reactid="227">React Basics</a></li></ul></li><li class="link-group" data-reactid="228"><h3 data-reactid="229">migration</h3><ul class="link-list" data-reactid="230"><li class="solo" data-reactid="231"><a href="/guides/migrate-rrv3/" data-reactid="232">Migrate from React Router v2/3 to Curi</a></li></ul></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@15.6.1/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
