<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All About Routes Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/curi/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot="" data-reactid="1" data-react-checksum="1482036567"><header data-reactid="2"><nav data-reactid="3"><ul data-reactid="4"><li data-reactid="5"><a class="home-link" href="/curi/" data-reactid="6">Curi</a></li><li data-reactid="7"><a href="/curi/packages/" data-reactid="8">Packages</a></li><li data-reactid="9"><a href="/curi/guides/getting-started/" data-reactid="10">Guides</a></li><li data-reactid="11"><a href="/curi/examples/" data-reactid="12">Examples</a></li><li data-reactid="13"><a href="https://github.com/pshrmn/curi" data-reactid="14">GitHub</a></li></ul></nav></header><main data-reactid="15"><div class="guide" data-reactid="16"><div class="content" data-reactid="17"><h1 data-reactid="18">All About Routes</h1><p data-reactid="19">Routes are simply JavaScript objects with two required props: name and path. There are also a number of other props that you can use to enhance the routes. We will cover these below.</p><pre class="language-javascript" data-reactid="20">{
  name: &#x27;Home&#x27;,
  path: &#x27;&#x27;
};</pre><div class="section" data-reactid="21"><h2 id="matching-routes" data-reactid="22"><!-- react-text: 23 -->Matching Routes<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#matching-routes" data-reactid="24">#</a></h2><p data-reactid="25">First, we should cover how route matching works. Curi takes an array of route objects. Whenever Curi receives a new location, it will walk over the route objects in the order that they are defined in the array.</p><p data-reactid="26">Sometimes a route&#x27;s path with only partially match the location&#x27;s pathname. When this happens, the matching behavior will vary based on the route&#x27;s props. By default, routes perform exact matching. This means that when the route only matches part of the pathname, it does not count as a match.</p><pre class="language-javascript" data-reactid="27">// when the pathname is &#x27;/a/Run+The+Jewels+3/Hey+Kids&#x27;,
// the Album route will partially match the pathname. However,
// Curi looks for complete matches, so it will move on to the
// next route
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;
}</pre><p data-reactid="28">However, if the route has children, then Curi will check if any of those routes form a complete match before moving on to the next route in the routes array.</p><pre class="language-javascript" data-reactid="29">// when the pathname is &#x27;/a/Coloring+Book/All+Night&#x27;,
// the Album route will partially match the pathname. Then,
// its child route Song will be tested and fully match the pathname.
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;,
  children: [
    {
      name: &#x27;Song&#x27;,
      path: &#x27;:title&#x27;
    }
  ]
}</pre><p data-reactid="30"><!-- react-text: 31 -->Another possibility happens when you use the <!-- /react-text --><code class="language-javascript" data-reactid="32">pathOptions</code><!-- react-text: 33 --> object to set<!-- /react-text --><!-- react-text: 34 --> <!-- /react-text --><code class="language-javascript" data-reactid="35">end: false</code><!-- react-text: 36 -->. When you do that, then a route the partially matches will consider itself matched.<!-- /react-text --></p><pre class="language-javascript" data-reactid="37">// when the pathname is &#x27;/a/Good+Kid,+M.A.A.D+City/Poetic+Justice&#x27;,
// the Album route will partially match. However, because it sets
// end to false, the partial match will be used.
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:albumID&#x27;,
  pathOptions: {
    end: false
  }
}</pre><p data-reactid="38"><!-- react-text: 39 -->If none of your routes match a pathname, then Curi will set a &quot;404&quot; status on the response object. The body property of the response will also be <!-- /react-text --><code class="language-javascript" data-reactid="40">undefined</code><!-- react-text: 41 -->, so it is important that your application checks the response&#x27;s status when it goes to render a response. You can also add a wildcard route (<!-- /react-text --><code class="language-javascript" data-reactid="42">path: &#x27;*&#x27;</code><!-- react-text: 43 -->) to the end of your routes array, and that route will always match. You may want to still manually set the status to &quot;404&quot; for the wildcard route, but it is not required.<!-- /react-text --></p></div><div class="section" data-reactid="44"><h2 id="route-properties" data-reactid="45"><!-- react-text: 46 -->Route properties<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#route-properties" data-reactid="47">#</a></h2><div class="subsection" data-reactid="48"><h3 id="name" data-reactid="49"><!-- react-text: 50 -->name<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#name" data-reactid="51">#</a></h3><p data-reactid="52">A unique identifier. This should be a string or a symbol.</p></div><div class="subsection" data-reactid="53"><h3 id="path" data-reactid="54"><!-- react-text: 55 -->path<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#path" data-reactid="56">#</a></h3><p data-reactid="57"><!-- react-text: 58 -->A path-to-regexp style string. This should <!-- /react-text --><strong data-reactid="59">not</strong><!-- react-text: 60 --> have a leading slash. The string will be passed to path-to-regexp to generate a regular expression. Any<!-- /react-text --><!-- react-text: 61 --> <!-- /react-text --><a href="https://github.com/pillarjs/path-to-regexp#parameters" data-reactid="62">parameters</a><!-- react-text: 63 --> will be identified so that they can be parsed out when matching against a location&#x27;s pathname.<!-- /react-text --></p><div class="note" data-reactid="64"><strong data-reactid="65">Note:</strong><!-- react-text: 66 --> <!-- /react-text --><!-- react-text: 67 -->While path-to-regexp supports arrays and RegExps, only string paths are supported here. This is because the path must also be reversible to create a pathname given params.<!-- /react-text --></div></div><div class="subsection" data-reactid="68"><h3 id="pathOptions" data-reactid="69"><!-- react-text: 70 -->pathOptions<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#pathOptions" data-reactid="71">#</a></h3><p data-reactid="72"><!-- react-text: 73 -->If you need to provide different path options than<!-- /react-text --><!-- react-text: 74 --> <!-- /react-text --><a href="https://github.com/pillarjs/path-to-regexp#usage" data-reactid="75">the defaults</a><!-- react-text: 76 --> used by path-to-regexp, you should specify them with a <!-- /react-text --><code class="language-javascript" data-reactid="77">pathOptions</code><!-- react-text: 78 --> object.<!-- /react-text --></p><div class="note" data-reactid="79"><strong data-reactid="80">Note:</strong><!-- react-text: 81 --> <!-- /react-text --><!-- react-text: 82 -->If a route has a children array property, it will <!-- /react-text --><strong data-reactid="83">always</strong><!-- react-text: 84 --> have the <!-- /react-text --><code class="language-javascript" data-reactid="85">end</code><!-- react-text: 86 --> <!-- /react-text --><!-- react-text: 87 --> path option set to false.<!-- /react-text --></div></div><div class="subsection" data-reactid="88"><h3 id="body" data-reactid="89"><!-- react-text: 90 -->body<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#body" data-reactid="91">#</a></h3><p data-reactid="92">The body property gives you the opportunity to set the body property of a response for a given route. This must be a function and its return value will be what is set as the response object&#x27;s body property.</p><pre class="language-javascript" data-reactid="93">// when the user visits /contact, the response object&#x27;s body
// property will be the Contact value
const contact = {
  name: &#x27;Contact&#x27;,
  path: &#x27;contact&#x27;,
  body: () =&gt; Contact
};</pre></div><div class="subsection" data-reactid="94"><h3 id="title" data-reactid="95"><!-- react-text: 96 -->title<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#title" data-reactid="97">#</a></h3><p data-reactid="98"><!-- react-text: 99 -->You can use the title property of a route to specify a title string that should be set on the response when that route matches. This can either be a string or a function. If it is a string, then<!-- /react-text --><code class="language-javascript" data-reactid="100">response.title</code><!-- react-text: 101 --> will be set to the value of <!-- /react-text --><code class="language-javascript" data-reactid="102">route.title</code><!-- react-text: 103 -->. If it is a function, it will be called (and passed the <!-- /react-text --><code class="language-javascript" data-reactid="104">response.params</code><!-- react-text: 105 --> and<!-- /react-text --><!-- react-text: 106 --> <!-- /react-text --><code class="language-javascript" data-reactid="107">response.data</code><!-- react-text: 108 --> values) to generate the title string.<!-- /react-text --></p><p data-reactid="109">If a route does not have a title property, when it matches, the response&#x27;s title property will be an empty string.</p><pre class="language-javascript" data-reactid="110">// as a string
{
  name: &#x27;Contact&#x27;,
  path: &#x27;contact&#x27;,
  title: &#x27;How to contact us&#x27;
}

// as a function
{
  name: &#x27;Contact Method&#x27;,
  path: &#x27;:method&#x27;,
  title: (params, data) =&gt; `Contact via ${params.method}`
}</pre></div><div class="subsection" data-reactid="111"><h3 id="children" data-reactid="112"><!-- react-text: 113 -->children<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#children" data-reactid="114">#</a></h3><p data-reactid="115">An optional array of route objects. Any child routes will be matched relative to their parent route&#x27;s path. This means that if a parent route&#x27;s path string is &#x27;one&#x27; and a child route&#x27;s path string is &#x27;two&#x27;, the child will match when the pathname is &#x27;one/two&#x27;.</p></div><div class="subsection" data-reactid="116"><h3 id="preload" data-reactid="117"><!-- react-text: 118 -->preload<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#preload" data-reactid="119">#</a></h3><p data-reactid="120"><!-- react-text: 121 -->A function that will only be called the first time that a route matches. This should only be used for loading resources that are required for the route to display properly. For example, if you are doing code splitting with Webpack using <!-- /react-text --><code class="language-javascript" data-reactid="122">import()</code><!-- react-text: 123 -->, you would load the modules in preload.<!-- /react-text --></p><p data-reactid="124">The preload function must return a Promise.</p><pre class="language-javascript" data-reactid="125">const about = {
  name: &#x27;About&#x27;,
  path: &#x27;about&#x27;,
  preload: () =&gt; {
    return import(&#x27;./components/About&#x27;)
      .then(module =&gt; AsyncStore.register(module.default));
  }
};</pre></div><div class="subsection" data-reactid="126"><h3 id="load" data-reactid="127"><!-- react-text: 128 -->load<!-- /react-text --><a class="header-link" href="/curi/guides/routes/#load" data-reactid="129">#</a></h3><p data-reactid="130">A function that can be used for data fetching as well as for triggering redirects. The load function will be passed the params object that is parsed from the location&#x27;s pathname (using the route and its ancestor&#x27;s paths) and the modifiers object that can be used to modify the response object that will be created.</p><p data-reactid="131">Like preload, load must return a Promise.</p><pre class="language-javascript" data-reactid="132">const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  load: (params, mod) =&gt; {
    return fetch(`/api/users/${params.id}`)
      .then(resp =&gt; JSON.parse(resp))
      .then(data =&gt; mod.setData(data);)
      .catch(err =&gt; {
        mod.fail(err);
        mod.setStatus(404);
      });
  }
}</pre><p data-reactid="133"><!-- react-text: 134 -->What is that modifiers object that gets passed to the load function? It contains a number of functions that you can use to modify the response. These functions are <!-- /react-text --><code class="language-javascript" data-reactid="135">redirect</code><!-- react-text: 136 -->, <!-- /react-text --><code class="language-javascript" data-reactid="137">fail</code><!-- react-text: 138 -->,<!-- /react-text --><!-- react-text: 139 --> <!-- /react-text --><code class="language-javascript" data-reactid="140">setStatus</code><!-- react-text: 141 -->, and <!-- /react-text --><code class="language-javascript" data-reactid="142">setData</code><!-- react-text: 143 -->.<!-- /react-text --></p><ul data-reactid="144"><li data-reactid="145"><code class="language-javascript" data-reactid="146">redirect(to, code)</code><!-- react-text: 147 --> - This allows you to turn the response into a redirect response. When you application receives a redirect response, it should redirect to the new location (using your history object) instead of re-rendering. If you do not provide a code, then 301 will be used. The <!-- /react-text --><code class="language-javascript" data-reactid="148">to</code><!-- react-text: 149 --> argument can be whatever you want it to be, you will just need to know how to deal with it in your render function.<!-- /react-text --></li><li data-reactid="150"><code class="language-javascript" data-reactid="151">fail(error)</code><!-- react-text: 152 --> - A method to call when something goes wrong. This will add an error property to the response.<!-- /react-text --></li><li data-reactid="153"><code class="language-javascript" data-reactid="154">setStatus(code)</code><!-- react-text: 155 --> - This method will set a new status for the response (the default status is 200 when a route matches and 404 when no routes match).<!-- /react-text --></li><li data-reactid="156"><code class="language-javascript" data-reactid="157">setData(data)</code><!-- react-text: 158 --> - The value passed to this method will be set as the response&#x27;s data property.<!-- /react-text --></li></ul></div></div><div data-reactid="159"><h2 data-reactid="160">Next</h2><p data-reactid="161"><!-- react-text: 162 -->Now that you know how to setup your routes, we can get to the good part: actually rendering your application using response objects. Check out the<!-- /react-text --><!-- react-text: 163 --> <!-- /react-text --><a href="/curi/guides/responses/" data-reactid="164">Rendering with Responses</a><!-- react-text: 165 --> guide to learn how.<!-- /react-text --></p></div></div><div class="sidebar" data-reactid="166"><h2 data-reactid="167">Guides</h2><ul data-reactid="168"><li data-reactid="169"><a href="/curi/guides/installation/" data-reactid="170">Installation</a></li><li data-reactid="171"><a href="/curi/guides/getting-started/" data-reactid="172">Getting Started</a></li><li data-reactid="173"><a class="active" href="/curi/guides/routes/" data-reactid="174">All About Routes</a></li><li data-reactid="175"><a href="/curi/guides/responses/" data-reactid="176">Rendering with Responses</a></li><li data-reactid="177"><a href="/curi/guides/addons/" data-reactid="178">Using Addons</a></li><li data-reactid="179"><a href="/curi/guides/side-effects/" data-reactid="180">Using Side Effects</a></li><li data-reactid="181"><a href="/curi/guides/response-caching/" data-reactid="182">Response Caching</a></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@15.6.1/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.min.js"></script>
    <script src="/curi/static/js/prism.js"></script>
    <script src="/curi/static/js/vendor.js"></script>
    <script src="/curi/static/js/bundle.js"></script>
  </body>
</html>
