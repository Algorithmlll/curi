<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Response Caching Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot=""><header><nav><ul><li><a class="home-link" href="/">Curi</a></li><li><a href="/packages">Packages</a></li><li><a href="/tutorial">Tutorial</a></li><li><a href="/guides/getting-started/">Guides</a></li><li><a href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main><div class="guide"><div class="content"><h1>Response Caching</h1><p>The cache option passed to <code class="language-javascript">curi</code> allows you to save response objects. The actual caching mechanism is left up to you. It only has two requirements:</p><ul><li>It provides a set function which receives a response object as its argument.</li><li>It provides a get function which receives a location object as its argument and returns a response object associated with the location (if one exists)</li></ul><pre class="language-javascript">const createSimpleCache = () =&gt; {
  const cache = {};

  return {
    get: location =&gt; {
      const { key } = location;
      return cache[key];
    },
    set: response =&gt; {
      const { key } = response.location;
      cache[key] = response;
    }
  };
}

const myCache = createSimpleCache();

const router = curi(history, routes, {
  cache: myCache
});</pre><p>The above cache uses a location&#x27;s key property to store values.</p><p>So why would you want to use a cache? When the user uses the browser&#x27;s forward/back buttons, Curi will generate a new response. This means that if the route has a <code class="language-javascript">match.every</code> function, it will be re-called. You can mitigate this by adding a cache to that function, but you may also find it preferable to just re-use the existing response.</p><p>This isn&#x27;t built-in because it is possible that you don&#x27;t actually want responses to be re-used. If you are caching responses, you will need to be aware of what to do when an authenticated user logs out. You will probably want to clear the cache so that they aren&#x27;t still seeing content as if they were logged in.</p></div><div class="sidebar"><h2>Guides</h2><ul><li class="link-group"><h3>basic</h3><ul class="link-list"><li class="solo"><a href="/guides/installation/">Installation</a></li><li class="solo"><a href="/guides/getting-started/">Getting Started</a></li><li class="solo"><a href="/guides/routes/">All About Routes</a></li><li class="solo"><a href="/guides/responses/">Rendering with Responses</a></li></ul></li><li class="link-group"><h3>advanced</h3><ul class="link-list"><li class="solo"><a href="/guides/addons/">Using Add-ons</a></li><li class="solo"><a href="/guides/side-effects/">Using Side Effects</a></li><li class="solo"><a class="active" href="/guides/response-caching/">Response Caching</a></li><li class="solo"><a href="/guides/code-splitting/">Code Splitting</a></li><li class="solo"><a href="/guides/loading/">Loading Route Data</a></li><li class="solo"><a href="/guides/react/">React Basics</a></li></ul></li><li class="link-group"><h3>migration</h3><ul class="link-list"><li class="solo"><a href="/guides/migrate-rrv3/">Migrate from React Router v2/3 to Curi</a></li></ul></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@16.0.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
