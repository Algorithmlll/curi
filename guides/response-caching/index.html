<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Response Caching Guide | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><div data-reactroot="" data-reactid="1" data-react-checksum="-706430749"><header data-reactid="2"><nav data-reactid="3"><ul data-reactid="4"><li data-reactid="5"><a class="home-link" href="/" data-reactid="6">Curi</a></li><li data-reactid="7"><a href="/packages/" data-reactid="8">Packages</a></li><li data-reactid="9"><a href="/guides/getting-started/" data-reactid="10">Guides</a></li><li data-reactid="11"><a href="/examples/" data-reactid="12">Examples</a></li><li data-reactid="13"><a href="https://github.com/pshrmn/curi" data-reactid="14">GitHub</a></li></ul></nav></header><main data-reactid="15"><div class="guide" data-reactid="16"><div class="content" data-reactid="17"><h1 data-reactid="18">Response Caching</h1><p data-reactid="19"><!-- react-text: 20 -->The cache option passed to <!-- /react-text --><code class="language-javascript" data-reactid="21">createConfig</code><!-- react-text: 22 --> allows you to save response objects. The actual caching mechanism is left up to you. It only has two requirements:<!-- /react-text --></p><ul data-reactid="23"><li data-reactid="24">It provides a set function which receives a response object as its argument.</li><li data-reactid="25">It provides a get function which receives a location object as its argument and returns a response object associated with the location (if one exists)</li></ul><pre class="language-javascript" data-reactid="26">const createSimpleCache = () =&gt; {
  const cache = {};

  return {
    get: location =&gt; {
      const { key } = location;
      return cache[key];
    },
    set: response =&gt; {
      const { key } = response.location;
      cache[key] = response;
    }
  };
}

const myCache = createSimpleCache();

const config = createConfig(history, routes, {
  cache: myCache
});</pre><p data-reactid="27">The above cache uses a location&#x27;s key property to store values.</p><p data-reactid="28">So why would you want to use a cache? When the user uses the browser&#x27;s forward/back buttons, Curi will generate a new response. This means that if the route has a load function, it will be re-called. You can mitigate this by adding a cache to your load function, but you may also find it preferable to just re-use the existing response.</p><p data-reactid="29">This isn&#x27;t built-in because it is possible that you don&#x27;t actually want responses to be re-used. If you are caching responses, you will need to be aware of what to do when an authenticated user logs out. You will probably want to clear the cache so that they aren&#x27;t still seeing content as if they were logged in.</p></div><div class="sidebar" data-reactid="30"><h2 data-reactid="31">Guides</h2><ul data-reactid="32"><li data-reactid="33"><a href="/guides/installation/" data-reactid="34">Installation</a></li><li data-reactid="35"><a href="/guides/getting-started/" data-reactid="36">Getting Started</a></li><li data-reactid="37"><a href="/guides/routes/" data-reactid="38">All About Routes</a></li><li data-reactid="39"><a href="/guides/responses/" data-reactid="40">Rendering with Responses</a></li><li data-reactid="41"><a href="/guides/addons/" data-reactid="42">Using Addons</a></li><li data-reactid="43"><a href="/guides/side-effects/" data-reactid="44">Using Side Effects</a></li><li data-reactid="45"><a class="active" href="/guides/response-caching/" data-reactid="46">Response Caching</a></li><li data-reactid="47"><a href="/guides/code-splitting/" data-reactid="48">Code Splitting with the Preload Property</a></li><li data-reactid="49"><a href="/guides/load/" data-reactid="50">The Load Property</a></li></ul></div></div></main></div></div>
    <script src="https://unpkg.com/react@15.6.1/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
