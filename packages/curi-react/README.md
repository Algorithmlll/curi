# curi-react

`curi-react` provides a number of components to create a React appliation with `curi`. This is in part inspired by React Router, but takes a "flat" approach to rendering components. Instead of nesting route components, only the component associated with the best-matched route will be attached to the response.

## Examples

Please check out the [experiments](../curi-experiments) for examples of `curi-react` in action.

## Overview

```js
import React from 'react';
import ReactDOM from 'react-dom';
import { createBrowserHistory } from 'history';
import createConfig from 'curi';
import { Navigator } from 'curi-react';

// some route components
const Home = () => <div>Home</div>;
const Contact = () => <div>Contact</div>;
const NotFound = () => <div>404</div>;

const history = createBrowserHistory();
const routes = [
  { name: 'Home', path: path(''), value: Home },
  { name: 'Contact', path: path('contact'), value: Contact }
];

const config = createConfig(history, routes);
// make sure that the initial location has resolved before rendering
config.ready().then(() => {
  // The children function passed to the <Navigator> is the most important
  // thing to note. This is where you render your application based on the
  // generated response.
  ReactDOM.render((
    <Navigator config={config}>
      {(response, config) => (
        response.body
          ? <response.body />
          : <NotFound />
      )}
    </Navigator>
  ), document.getElementById('root'))
});
```

### `<Navigator>`

The core component is a `<Navigator>`. The `<Navigator>` takes two props: `children` and `config`.

#### `config`

A `curi` config object (created by `curi.createConfig`). This will be used to 

#### `children`

A render function. Every time that a new `response` is generated by the config object, this function will be called. It takes two arguments: `response` (the `response` object) and `config` (the config object). The function must return a valid React element.

### `<Link>`

`<Link>`s are used to perform navigation without actually reloading the application.

#### `name`

The name of the route to navigate to. The actual pathname will be generated by `curi`.

```js
const routes = [
  ...,
  { name: 'Contact', path: path('contact'), value: Contact },
  ...
];

<Link name='Contact'>Contact Us</Link>
// <a href='/contact'>Contact Us</a>
```

#### `params`

If a route uses params, you will need to provide the values that should be filled in. This is done with the `params` prop.

```js
const routes = [
  ...,
  { name: 'Product', path: path('product/:id'), value: Product },
  ...
];

<Link name='Product' params={{ id: '8140' }}>Binoculars</Link>
// <a href='/product/8140'>Binoculars</a>
```

#### `to`

The `name` and `params` are only used to generate a location's `pathname`. If you want to attach other location properties (`search`, `hash`, and `state`), you can use the `to` prop to pass those values.

```js
const routes = [
  ...,
  { name: 'Product', path: path('product/:id'), value: Product },
  ...
];

<Link
  name='Product'
  params={{ id: '2718' }}
  to={{ search: '?color=orange' }}
>
  Backpack
</Link>
// <a href='/product/2718?color=orange'>Backpack</a>
```

**Note:** You can also include a `pathname` property to `to` and it will overwrite the value generated by the `name`. You probably don't want to do this, but the functionality exists in case you have a legitimate reason to do it.
