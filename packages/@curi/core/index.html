<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@curi/core | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><header><nav><ul><li><a class="home-link " href="/">Curi</a></li><li><a class=" active" href="/packages">Packages</a></li><li><a class=" " href="/guides">Guides</a></li><li><a class=" " href="/tutorial">Tutorials</a></li><li><a class=" " href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main><div class="package"><div class="content"><h1>@curi/<!-- -->core</h1><div class="package-info"><div>v<!-- -->1.0.0-beta.31</div><a href="https://github.com/pshrmn/curi/tree/master/packages/core"><img style="height:16px;margin-right:5px" src="/static/img/github-logo.png"/>GitHub Repo</a><a href="https://npmjs.com/package/@curi/core"><img style="height:16px;margin-right:5px" src="/static/img/npm-logo.png"/>NPM Package</a></div><div class="section" id="about"><h2>About<a class="header-link" href="/packages/@curi/core/#about">#</a></h2><p>The <code class="language-javascript">@curi/core</code> package is used to create a router.</p></div><div class="section" id="installation"><h2>Installation<a class="header-link" href="/packages/@curi/core/#installation">#</a></h2><div class="side-by-side"><div class="explanation">The package can be installed from NPM.</div><div class="code-block"><pre><code class="language-bash">npm install @curi/core
yarn add @curi/core</code></pre></div></div><div class="side-by-side"><div class="explanation"><p>Prefer inline scripts? Every version is available through<!-- --> <a href="https://unpkg.com/@curi/core@1.0.0-beta.31/">Unpkg</a>.</p><p>There are both full and minified versions available.</p><p>The package will be attached to the window as<!-- --> <code class="language-javascript">window.<!-- -->Curi</code>.</p></div><div class="code-block"><pre><code class="language-markup">&lt;script
src=&quot;https://unpkg.com/@curi/core@1.0.0-beta.31/dist/curi-core.js&quot;
&gt;&lt;/script&gt;</code></pre></div></div></div><div class="section" id="API"><h2>API<a class="header-link" href="/packages/@curi/core/#API">#</a></h2><div class="section" id="constructor"><h3>constructor<a class="header-link" href="/packages/@curi/core/#constructor">#</a></h3><div class="side-by-side"><div class="explanation"><p>The Curi package&#x27;s default export is a function to create a router. It has two required arguments: a <code class="language-javascript">history</code> object and a <code class="language-javascript">routes</code> array, and an optional third argument: an<!-- --> <code class="language-javascript">options</code> object.</p></div><div class="code-block"><pre><code class="language-javascript">import curi from &#x27;@curi/core&#x27;;

const router = curi(history, routes, options);</code></pre></div></div><div class="section" id="arguments"><h4>Arguments<a class="header-link" href="/packages/@curi/core/#arguments">#</a></h4><div class="subsection" id="history"><h5>history<a class="header-link" href="/packages/@curi/core/#history">#</a></h5><div class="side-by-side"><div class="explanation"><p>A <a href="https://github.com/pshrmn/hickory">Hickory</a> <!-- -->history object. The<!-- --> <a href="/guides/getting-started/#history-object">Getting Started guide</a> <!-- -->provides more information on how to choose which history type is right for an application.</p></div><div class="code-block"><pre><code class="language-jsx">import Browser from &quot;@hickory/browser&quot;;

const history = Browser();
const router = curi(history, routes);</code></pre></div></div></div><div class="subsection" id="routes"><h5>routes<a class="header-link" href="/packages/@curi/core/#routes">#</a></h5><div class="side-by-side"><div class="explanation"><p>An array of<!-- --> <a href="/guides/routes/">route</a> <!-- -->objects</p></div><div class="code-block"><pre><code class="language-jsx">const routes = [
  { name: &quot;Home&quot;, path: &quot;&quot; },
  { name: &quot;About&quot;, path: &quot;about&quot; }
];

const router = curi(history, routes);</code></pre></div></div></div><div class="subsection" id="options"><h5>options<a class="header-link" href="/packages/@curi/core/#options">#</a></h5><p>An optional object with additional properties that can be passed to the router.</p><ul><li><div class="side-by-side"><div class="explanation"><p><code class="language-javascript">route</code> - An array of<!-- --> <a href="/guides/route-interactions/">route interactions</a>. These are functions for interacting with routes based on their <code class="language-javascript">name</code>.</p><p>The <code class="language-javascript">pathname</code> interaction is included by default; any other interactions are provided through this array.</p></div><div class="code-block"><pre><code class="language-javascript">import active from &quot;@curi/route-active&quot;;
import ancestors from &quot;@curi/route-ancestors&quot;;

const routes = [{ name: &quot;Home&quot;, path: &quot;&quot; }];

const router = curi(history, routes, {
  route: [active(), ancestors()]
});</code></pre></div></div><div class="side-by-side"><div class="explanation"><p>Route interactions are called via the router&#x27;s<!-- --> <code class="language-javascript">route</code> object.</p></div><div class="code-block"><pre><code class="language-javascript">router.route.active(&quot;Home&quot;);
// returns true when location.pathname = &quot;/&quot;

router.route.pathname(&quot;Home&quot;);
// returns &quot;/&quot;</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="language-javascript">sideEffects</code> - An array of<!-- --> <a href="/guides/side-effects/">side effect</a> <!-- -->objects.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>effect</td><td>An observer that will be called whenever a response is generated.</td></tr><tr><td>after</td><td>(default <code class="language-javascript">false</code>) controls whether the observer is called before or after regular* observers.</td></tr></tbody></table><p>* A &quot;regular&quot; observer is one added using<!-- --> <a href="/packages/@curi/core/#respond"><code class="language-javascript">router.respond()</code></a>.</p></div><div class="code-block"><pre><code class="language-javascript">import scrollEffect from &quot;@curi/side-effect-scroll&quot;;

const scroll = scrollEffect();
const router = curi(history, routes, {
  sideEffects: [{ effect: scroll, after: true }]
});</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="language-javascript">emitRedirects</code> - When <code class="language-javascript">false</code> (default is <code class="language-javascript">true</code>), response objects with the<!-- --> <code class="language-javascript">redirectTo</code> property<!-- --> <strong>will not be emitted</strong> to observers (but they will still trigger automatic redirects). This can be useful for avoiding an extra render, but should not be used on the server.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  {
    name: &quot;Old&quot;,
    path: &quot;old/:id&quot;,
    response({ params }) {
      // setup a redirect to the &quot;New&quot; route
      return {
        redirectTo: {
          name: &quot;New&quot;,
          params
        }
      };
    }
  },
  {
    name: &quot;New&quot;,
    path: &quot;new/:id&quot;
  }
];

const router = curi(history, routes, {
  emitRedirects: false                 
});
// navigating to &quot;/old/2&quot; will automatically redirect
// to &quot;/new/2&quot; without rendering a response</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="language-javascript">pathnameOptions</code> - Curi uses<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class="language-javascript">path-to-regexp</code></a> <!-- -->to handle route matching and pathname generation.<!-- --> <code class="language-javascript">path-to-regexp</code> can take a custom<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#compile-reverse-path-to-regexp"><code class="language-javascript">encode</code></a> <!-- -->function for creating pathnames, which you can specify with this options.</p><p><strong>You most likely will never need to use this.</strong></p></div><div class="code-block"><pre><code class="language-javascript">const router = curi(history, routes, {
  pathOptions: {
    encode: (value, token) =&gt; { /* ... */ }
  }
});</code></pre></div></div></li></ul></div></div><div class="section" id="properties"><h4>Router Properties<a class="header-link" href="/packages/@curi/core/#properties">#</a></h4><p>The router has a number of properties for you to use when rendering your application.</p><div class="subsection" id="navigate"><h5>navigate(details)<a class="header-link" href="/packages/@curi/core/#navigate">#</a></h5><div class="side-by-side"><div class="explanation"><p>The <code class="language-javascript">navigate()</code> method allows you to navigate programmatically. It takes a <code class="language-javascript">details</code> object with the details of where you want to navigate to as well as the<!-- --> <code class="language-javascript">method</code> of navigation.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>The name of the route to navigate to</td></tr><tr><td>params</td><td>An object of any route params for the named route (and any of its ancestors that require params).</td></tr><tr><td>hash</td><td>The hash string of the location to navigate to.</td></tr><tr><td>query</td><td>The query value of the location to navigate to.</td></tr><tr><td>state</td><td>Any serializable state to attach to the location.</td></tr><tr><td>method</td><td>How to navigate. <code class="language-javascript">&quot;PUSH&quot;</code> appends the new location after the current one. <code class="language-javascript">&quot;REPLACE&quot;</code> <!-- -->replaces the current location. <code class="language-javascript">&quot;ANCHOR&quot;</code> is the default method and acts like clicking a link. This behavior is a mix of <code class="language-javascript">&quot;PUSH&quot;</code> and<!-- --> <code class="language-javascript">&quot;REPLACE&quot;</code> where the current location is replaced if the new location has the exact same URL.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  {
    name: &quot;Album&quot;,
    path: &quot;photos/:albumID&quot;,
    children: [
      { name: &quot;Photo&quot;, path: &quot;:photoID&quot; }
    ]
  },
  // ...
];
const router = curi(history, routes);

router.navigate({
  name: &quot;Photo&quot;,
  params: { albumID: 123, photoID: 456 }
});
// navigates to &quot;/photos/123/456&quot;
// using default &quot;ANCHOR&quot; method</code></pre></div></div></div><div class="subsection" id="respond"><h5>respond(fn, options)<a class="header-link" href="/packages/@curi/core/#respond">#</a></h5><div class="side-by-side"><div class="explanation"><p>The <code class="language-javascript">respond()</code> method takes an observer function. Whenever a new response is made, the router will call that function. The function will be passed on object with three properties:</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>response</td><td>The generated response object.</td></tr><tr><td>navigation</td><td>The navigation&#x27;s <code class="language-javascript">action</code> (<code class="language-javascript">PUSH</code>,<!-- --> <code class="language-javascript">REPLACE</code>, or <code class="language-javascript">POP</code>) and the<!-- --> <code class="language-javascript">previous</code> response object.</td></tr><tr><td>router</td><td>The Curi router</td></tr></tbody></table><p>When a matched route is async (it has an<!-- --> <code class="language-javascript">on.initial()</code> or <code class="language-javascript">on.every()</code> function), the router will not call the observer functions until the<!-- --> <code class="language-javascript">on</code> function(s) have resolved.</p></div><div class="code-block"><pre><code class="language-javascript">router.respond(({ response }) =&gt; {
  // render the application based on the response
});</code></pre></div></div><div class="subsection" id="respond-options"><h6>options<a class="header-link" href="/packages/@curi/core/#respond-options">#</a></h6><div class="side-by-side"><div class="explanation"><table><thead><tr><th>option</th><th>default</th><th>description</th></tr></thead><tbody><tr><td>observe</td><td>false</td><td>When true, the function will be called for all future responses that are emitted by the router (until it stops observing) When false, the function will only be called one time.</td></tr><tr><td>initial</td><td>true</td><td>When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">router.respond(responseHandler, {
                    observe: true
                  });</code></pre></div></div><div class="side-by-side"><div class="explanation"><p><code class="language-javascript">respond()</code> returns a function to stop calling the observer function. This function is only returned when<!-- --> <code class="language-javascript">router.respond()</code> is given the<!-- --> <code class="language-javascript">observe: true</code> option.</p></div><div class="code-block"><pre><code class="language-javascript">const stopObserving = router.respond(
  () =&gt; {...},
  { observe: true }
);
// the router will now call the observer for all responses

stopObserving();
// the router no longer calls the observer</code></pre></div></div></div></div><div class="subsection" id="current-property"><h5>current()<a class="header-link" href="/packages/@curi/core/#current-property">#</a></h5><div class="side-by-side"><div class="explanation"><p>The <code class="language-javascript">router.current()</code> method returns the current<!-- --> <code class="language-javascript">response</code> and <code class="language-javascript">navigation</code> objects.</p><div class="note"><strong>Note:</strong> <!-- -->If you call <code class="language-javascript">router.current()</code> before the initial response has been emitted, the <code class="language-javascript">response</code> and<!-- --> <code class="language-javascript">navigation</code> properties will be <code class="language-javascript">null</code>.</div></div><div class="code-block"><pre><code class="language-javascript">const router = curi(history, routes);
const tooSoon = router.current();
// tooSoon.response === null
// tooSoon.navigation === null

router.respond(({ response, navigation }) =&gt; {
  const justRight = router.current();
  // justRight.response === response
  // justRight.navigation === navigation
});</code></pre></div></div></div><div class="subsection" id="router-route"><h5>route<a class="header-link" href="/packages/@curi/core/#router-route">#</a></h5><div class="side-by-side"><div class="explanation"><p>The router&#x27;s<!-- --> <a href="/guides/route-interactions/">route interactions</a> <!-- -->are accessed through the <code class="language-javascript">route</code> property. This allows you to interact with routes based on their names.</p></div></div><div class="subsection" id="pathname-interaction"><h6>pathname<a class="header-link" href="/packages/@curi/core/#pathname-interaction">#</a></h6><div class="side-by-side"><div class="explanation"><p>Curi includes one built-in interaction, <code class="language-javascript">pathname</code>, which generates location pathnames using the name of a route and an optional object containing any necessary params.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  { name: &#x27;User&#x27;, path: &#x27;user/:id&#x27; }
];
const router = curi(history, routes);
const userPathname = router.route.pathname(
  &#x27;User&#x27;,
  { id: &#x27;12345&#x27; }
);
// userPathname === &#x27;/user/12345&#x27;</code></pre></div></div></div></div><div class="subsection" id="history-property"><h5>history<a class="header-link" href="/packages/@curi/core/#history-property">#</a></h5><div class="side-by-side"><div class="explanation"><p>The route&#x27;s history object. This allows you to just pass the router throughout your project instead of both that and the history object.</p></div></div></div></div></div></div></div><div class="sidebar"><h2>Packages</h2><ul><li class="link-group"><h3>core</h3><ul class="link-list"><li class="solo"><a class=" active" href="/packages/@curi/core/">core</a></li></ul></li><li class="link-group"><h3>route</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/route-active/">route-active</a></li><li class="solo"><a class=" " href="/packages/@curi/route-ancestors/">route-ancestors</a></li><li class="solo"><a class=" " href="/packages/@curi/route-prefetch/">route-prefetch</a></li></ul></li><li class="link-group"><h3>side-effect</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/side-effect-title/">side-effect-title</a></li><li class="solo"><a class=" " href="/packages/@curi/side-effect-scroll/">side-effect-scroll</a></li></ul></li><li class="link-group"><h3>renderer</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/react/">react</a></li><li class="solo"><a class=" " href="/packages/@curi/react-native/">react-native</a></li><li class="solo"><a class=" " href="/packages/@curi/svelte/">svelte</a></li><li class="solo"><a class=" " href="/packages/@curi/vue/">vue</a></li></ul></li></ul></div></div></main></div>
    <script src="https://unpkg.com/react@16.3.1/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.3.1/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
