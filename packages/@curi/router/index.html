<!doctype html>
<html lang="en">
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@curi/router | Curi Documentation</title>
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400" rel="stylesheet">
    <link href="/static/css/prism.css" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
  </head>
  <body>
    <div id="root"><header><nav><ul><li><a class="home-link " href="/">Curi</a></li><li><a class=" active" href="/packages">Packages</a></li><li><a class=" " href="/guides/creating-a-router/">Guides</a></li><li><a class=" " href="/tutorial">Tutorials</a></li><li><a class=" " href="/examples">Examples</a></li><li><a href="https://github.com/pshrmn/curi">GitHub</a></li></ul></nav></header><main tabindex="-1" style="outline:none"><div class="page package"><div class="content" style="outline:none"><h1>@curi/<!-- -->router</h1><div class="package-info"><div>v<!-- -->1.0.0-beta.37</div><a href="https://github.com/pshrmn/curi/tree/master/packages/router"><img style="height:16px;margin-right:5px" src="/static/img/github-logo.png" alt="GitHub logo"/>GitHub Repo</a><a href="https://npmjs.com/package/@curi/router"><img style="height:16px;margin-right:5px" src="/static/img/npm-logo.png" alt="NPM logo"/>NPM Package</a></div><div class="section" id="about"><h2>About<a class="header-link" href="/packages/@curi/router/#about">#</a></h2><div class="side-by-side"><div class="explanation"><p>The <code class="inline-code language-javascript">@curi/router</code> package is used to create a router.</p></div></div></div><div class="section" id="installation"><h2>Installation<a class="header-link" href="/packages/@curi/router/#installation">#</a></h2><div class="side-by-side"><div class="explanation"><p>If you have Node and NPM installed, you can install the package through<!-- --> <code class="inline-code language-javascript">npm</code> (or <code class="inline-code language-javascript">yarn</code> if you prefer).</p></div><div class="code-block"><pre><code class="language-bash">npm install @curi/router
yarn add @curi/router</code></pre></div></div><div class="side-by-side"><div class="explanation"><p>Prefer inline scripts? Every version is available through<!-- --> <a href="https://unpkg.com/@curi/router@1.0.0-beta.37/">Unpkg</a>. There are both full and minified versions available. You can access the package&#x27;s exports through <code class="inline-code language-javascript">window.<!-- -->Curi</code>.</p></div><div class="code-block"><pre><code class="language-markup">&lt;script src=&quot;https://unpkg.com/@curi/router@1.0.0-beta.37/dist/curi-router.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
  window.Curi
&lt;/script&gt;</code></pre></div></div></div><div class="section" id="API"><h2>API<a class="header-link" href="/packages/@curi/router/#API">#</a></h2><div class="section" id="curi"><h2>curi<a class="header-link" href="/packages/@curi/router/#curi">#</a></h2><div class="side-by-side"><div class="explanation"><p>The <code class="inline-code language-javascript">curi</code> export is a function to create a router. It has two required arguments: a <code class="inline-code language-javascript">history</code> object and a<!-- --> <code class="inline-code language-javascript">routes</code> array, and an optional third argument: an<!-- --> <code class="inline-code language-javascript">options</code> object.</p></div><div class="code-block"><pre><code class="language-javascript">import { curi } from &#x27;@curi/router&#x27;;

const router = curi(history, routes, options);</code></pre></div></div><div class="section" id="arguments"><h4>Arguments<a class="header-link" href="/packages/@curi/router/#arguments">#</a></h4><div class="subsection" id="history"><h5>history<a class="header-link" href="/packages/@curi/router/#history">#</a></h5><div class="side-by-side"><div class="explanation"><p>A <a href="https://github.com/pshrmn/hickory">Hickory</a> <!-- -->history object that will power navigation within the application. The<!-- --> <a href="/guides/creating-a-router/#history-object">Creating a Router guide</a> <!-- -->provides more information on how to choose which history type is right for an application.</p></div><div class="code-block"><pre><code class="language-jsx">import Browser from &quot;@hickory/browser&quot;;

const history = Browser();
const router = curi(history, routes);</code></pre></div></div></div><div class="subsection" id="routes"><h5>routes<a class="header-link" href="/packages/@curi/router/#routes">#</a></h5><div class="side-by-side"><div class="explanation"><p>An array of<!-- --> <a href="/guides/routes/">route</a> <!-- -->objects for all valid routes in the application.</p></div><div class="code-block"><pre><code class="language-jsx">const routes = [
  { name: &quot;Home&quot;, path: &quot;&quot; },
  { name: &quot;About&quot;, path: &quot;about&quot; }
];

const router = curi(history, routes);</code></pre></div></div></div><div class="subsection" id="options"><h5>options<a class="header-link" href="/packages/@curi/router/#options">#</a></h5><p>An optional object with additional properties that can be passed to the router.</p><ul><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">route</code> - An array of<!-- --> <a href="/guides/route-interactions/">route interactions</a>. These are functions for interacting with routes based on their <code class="inline-code language-javascript">name</code>.</p><p>The <code class="inline-code language-javascript">pathname</code> interaction is included by default; any other interactions are provided through this array.</p></div><div class="code-block"><pre><code class="language-javascript">import active from &quot;@curi/route-active&quot;;
import ancestors from &quot;@curi/route-ancestors&quot;;

const routes = [{ name: &quot;Home&quot;, path: &quot;&quot; }];

const router = curi(history, routes, {
  route: [active(), ancestors()]
});</code></pre></div></div><div class="side-by-side"><div class="explanation"><p>Route interactions are called via the router&#x27;s<!-- --> <code class="inline-code language-javascript">route</code> object.</p></div><div class="code-block"><pre><code class="language-javascript">router.route.active(&quot;Home&quot;);
// returns true when location.pathname = &quot;/&quot;

router.route.pathname(&quot;Home&quot;);
// returns &quot;/&quot;</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">sideEffects</code> - An array of<!-- --> <a href="/guides/side-effects/">side effect</a> <!-- -->objects.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>effect</td><td>An observer that will be called whenever a response is generated.</td></tr><tr><td>after</td><td>(default <code class="inline-code language-javascript">false</code>) controls whether the side effect is called before or after non-side effect observers.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">import scroll from &quot;@curi/side-effect-scroll&quot;;

const router = curi(history, routes, {
  sideEffects: [scroll()]
});</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">emitRedirects</code> - When <code class="inline-code language-javascript">false</code> (default is <code class="inline-code language-javascript">true</code>), response objects with the<!-- --> <code class="inline-code language-javascript">redirectTo</code> property<!-- --> <strong>will not be emitted</strong> to observers. This can be useful for avoiding an extra render, but should not be used on the server.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  {
    name: &quot;Old&quot;,
    path: &quot;old/:id&quot;,
    response({ params }) {
      // setup a redirect to the &quot;New&quot; route
      return {
        redirectTo: {
          name: &quot;New&quot;,
          params
        }
      };
    }
  },
  {
    name: &quot;New&quot;,
    path: &quot;new/:id&quot;
  }
];

const router = curi(history, routes, {
  emitRedirects: false                 
});
// navigating to &quot;/old/2&quot; will automatically redirect
// to &quot;/new/2&quot; without emitting a response</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">pathnameOptions</code> - Curi uses<!-- --> <a href="https://github.com/pillarjs/path-to-regexp"><code class="inline-code language-javascript">path-to-regexp</code></a> <!-- -->to handle route matching and pathname generation.<!-- --> <code class="inline-code language-javascript">path-to-regexp</code> can take a custom<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#compile-reverse-path-to-regexp"><code class="inline-code language-javascript">encode</code></a> <!-- -->function for creating pathnames, which you can specify with this options.<!-- --> <strong>You most likely will never need to use this.</strong></p></div><div class="code-block"><pre><code class="language-javascript">const router = curi(history, routes, {
  pathOptions: {
    encode: (value, token) =&gt; { /* ... */ }
  }
});</code></pre></div></div></li></ul></div></div><div class="section" id="properties"><h4>Router Properties<a class="header-link" href="/packages/@curi/router/#properties">#</a></h4><p>The router has a number of properties for you to use when rendering your application.</p><div class="subsection" id="navigate"><h5>navigate(details)<a class="header-link" href="/packages/@curi/router/#navigate">#</a></h5><div class="side-by-side"><div class="explanation"><p>The <code class="inline-code language-javascript">navigate()</code> method is used to navigate programmatically. It takes a <code class="inline-code language-javascript">details</code> object with the details of where you want to navigate to as well as the<!-- --> <code class="inline-code language-javascript">method</code> of navigation.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>The name of the route to navigate to</td></tr><tr><td>params</td><td>An object of any route params for the named route (and any of its ancestors that require params).</td></tr><tr><td>hash</td><td>The hash string of the location to navigate to.</td></tr><tr><td>query</td><td>The query value of the location to navigate to.</td></tr><tr><td>state</td><td>Any serializable state to attach to the location.</td></tr><tr><td>method</td><td>How to navigate. <code class="inline-code language-javascript">&quot;PUSH&quot;</code> appends the new location after the current one. <code class="inline-code language-javascript">&quot;REPLACE&quot;</code> <!-- -->replaces the current location. <code class="inline-code language-javascript">&quot;ANCHOR&quot;</code> is the default method and acts like clicking a link. This behavior is a mix of <code class="inline-code language-javascript">&quot;PUSH&quot;</code> and<!-- --> <code class="inline-code language-javascript">&quot;REPLACE&quot;</code> where the current location is replaced if the new location has the exact same URL.</td></tr><tr><td>finished</td><td>A function to call once the navigation has finished.</td></tr><tr><td>cancelled</td><td>A function to call if the navigation is superseded by another navigation.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  {
    name: &quot;Album&quot;,
    path: &quot;photos/:albumID&quot;,
    children: [
      { name: &quot;Photo&quot;, path: &quot;:photoID&quot; }
    ]
  },
  // ...
];
const router = curi(history, routes);

router.navigate({
  name: &quot;Photo&quot;,
  params: { albumID: 123, photoID: 456 }
});
// navigates to &quot;/photos/123/456&quot;
// using default &quot;ANCHOR&quot; method</code></pre></div></div></div><div class="subsection" id="respond"><h5>respond(fn, options)<a class="header-link" href="/packages/@curi/router/#respond">#</a></h5><div class="side-by-side"><div class="explanation"><p>The <code class="inline-code language-javascript">respond()</code> method takes an observer function. Whenever a new response is made, the router will call that function. The function will be passed on object with three properties:</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>response</td><td>The generated response object.</td></tr><tr><td>navigation</td><td>The navigation&#x27;s <code class="inline-code language-javascript">action</code> (<code class="inline-code language-javascript">PUSH</code>,<!-- --> <code class="inline-code language-javascript">REPLACE</code>, or <code class="inline-code language-javascript">POP</code>) and the<!-- --> <code class="inline-code language-javascript">previous</code> response object.</td></tr><tr><td>router</td><td>The Curi router</td></tr></tbody></table><p>When a matched route is async (it has <code class="inline-code language-javascript">match</code> <!-- -->functions), the router will not call the observer functions until the async function(s) have resolved.</p></div><div class="code-block"><pre><code class="language-javascript">router.respond(({ response }) =&gt; {
  // render the application based on the response
});</code></pre></div></div><div class="subsection" id="respond-options"><h6>options<a class="header-link" href="/packages/@curi/router/#respond-options">#</a></h6><div class="side-by-side"><div class="explanation"><table><thead><tr><th>option</th><th>default</th><th>description</th></tr></thead><tbody><tr><td>observe</td><td>false</td><td>When true, the function will be called for all future responses that are emitted by the router (until it stops observing) When false, the function will only be called one time.</td></tr><tr><td>initial</td><td>true</td><td>When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted.</td></tr></tbody></table></div><div class="code-block"><pre><code class="language-javascript">router.respond(responseHandler, {
                    observe: true
                  });</code></pre></div></div><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">respond()</code> returns a function to stop calling the observer function. This function is only returned when<!-- --> <code class="inline-code language-javascript">router.respond()</code> is given the<!-- --> <code class="inline-code language-javascript">observe: true</code> option.</p></div><div class="code-block"><pre><code class="language-javascript">const stopObserving = router.respond(
  () =&gt; {...},
  { observe: true }
);
// the router will now call the observer for all responses

stopObserving();
// the router no longer calls the observer</code></pre></div></div></div></div><div class="subsection" id="current-property"><h5>current()<a class="header-link" href="/packages/@curi/router/#current-property">#</a></h5><div class="side-by-side"><div class="explanation"><p>The <code class="inline-code language-javascript">router.current()</code> method returns the current<!-- --> <code class="inline-code language-javascript">response</code> and <code class="inline-code language-javascript">navigation</code> objects.</p><div class="note"><strong>Note:</strong> <!-- -->If you call <code class="inline-code language-javascript">router.current()</code> before the initial response has been emitted, the <code class="inline-code language-javascript">response</code> and<!-- --> <code class="inline-code language-javascript">navigation</code> properties will be <code class="inline-code language-javascript">null</code>.</div></div><div class="code-block"><pre><code class="language-javascript">const router = curi(history, routes);
const tooSoon = router.current();
// tooSoon.response === null
// tooSoon.navigation === null

router.respond(({ response, navigation }) =&gt; {
  const perfect = router.current();
  // perfect.response === response
  // perfect.navigation === navigation
});</code></pre></div></div></div><div class="subsection" id="router-route"><h5>route<a class="header-link" href="/packages/@curi/router/#router-route">#</a></h5><div class="side-by-side"><div class="explanation"><p>The router&#x27;s<!-- --> <a href="/guides/route-interactions/">route interactions</a> <!-- -->are accessed through the <code class="inline-code language-javascript">route</code> property. These are used to interact with routes using their names.</p></div></div><div class="subsection" id="pathname-interaction"><h6>pathname<a class="header-link" href="/packages/@curi/router/#pathname-interaction">#</a></h6><div class="side-by-side"><div class="explanation"><p>Curi includes one built-in interaction, <code class="inline-code language-javascript">pathname</code>, which generates location pathnames using the name of a route and an optional object containing any necessary params.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  { name: &#x27;User&#x27;, path: &#x27;user/:id&#x27; }
];
const router = curi(history, routes);
const userPathname = router.route.pathname(
  &#x27;User&#x27;,
  { id: &#x27;12345&#x27; }
);
// userPathname === &#x27;/user/12345&#x27;</code></pre></div></div></div></div><div class="subsection" id="history-property"><h5>history<a class="header-link" href="/packages/@curi/router/#history-property">#</a></h5><div class="side-by-side"><div class="explanation"><p>The route&#x27;s history object, in case you need to interact directly with that.</p></div></div></div></div></div><div class="section" id="once"><h2>once<a class="header-link" href="/packages/@curi/router/#once">#</a></h2><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">once</code> takes a function as its argument and returns a new function. The first time the returned function is called, it will call the function passed to <code class="inline-code language-javascript">once()</code>. Every call after that will re-use the result from the first call.</p><p>The <code class="inline-code language-javascript">once()</code> function is useful for any async route<!-- --> <code class="inline-code language-javascript">match</code> functions that only need to be called once.</p><div class="note"><strong>Note:</strong> <!-- -->This will not work for functions whose result depends on variables that will change for a route (i.e. loading data based on route params).</div></div><div class="code-block"><pre><code class="language-javascript">import { once } from &quot;@curi/router&quot;;
            
const routes = [
  {
    name: &quot;Menu&quot;,
    path: &quot;menu&quot;,
    match: {
      // this function will be called every time the user
      // navigates to the &quot;Menu&quot; route
      nonCached: () =&gt; api.getItems(),
      // this function is only called the first time the
      // user navigates to the &quot;Menu&quot; route
      cached: once(() =&gt; api.getItems)
    }
  }
];</code></pre></div></div></div><div class="section" id="pathname"><h2>pathname<a class="header-link" href="/packages/@curi/router/#pathname">#</a></h2><div class="side-by-side"><div class="explanation"><p>Curi automatically includes a <code class="inline-code language-javascript">pathname</code> route interaction for you to generate URL pathnames for routes. If you need to access this same ability outside of a router, you can import the <code class="inline-code language-javascript">pathname</code> route interaction.</p></div><div class="code-block"><pre><code class="language-javascript">import { pathname } from &quot;@curi/router&quot;;

const pathnameGenerator = pathname();
// register routes
pathnameGenerator.register({ name: &quot;Yo&quot;, path: &quot;yo/:name&quot; });
// generate pathname
const path = pathnameGenerator.get(&quot;Yo&quot;, { name: &quot;joey&quot; })
// path = &quot;/yo/joey&quot;</code></pre></div></div></div><div class="section" id="route-properties"><h2>Route properties<a class="header-link" href="/packages/@curi/router/#route-properties">#</a></h2><div class="subsection" id="name"><h3>route.name<a class="header-link" href="/packages/@curi/router/#name">#</a></h3><div class="side-by-side"><div class="explanation"><p>A string, this must be unique for every route.</p></div><div class="code-block"><pre><code class="language-javascript">[
  { name: &#x27;Home&#x27; },
  { name: &#x27;Album&#x27; },
  { name: &#x27;Not Found&#x27; }
];</code></pre></div></div></div><div class="subsection" id="path"><h3>route.path<a class="header-link" href="/packages/@curi/router/#path">#</a></h3><div class="side-by-side"><div class="explanation"><p>A string pattern describing what the route matches. Whenever the router receives a new location, it will loop through the known route paths to determine which one matches the new location&#x27;s<!-- --> <code class="inline-code language-javascript">pathname</code> the best.</p><p>Curi uses<a href="https://github.com/pillarjs/path-to-regexp#parameters"><code class="inline-code language-javascript">path-to-regexp</code></a> <!-- -->for paths, which enables routes to have<a href="https://github.com/pillarjs/path-to-regexp#parameters">path parameters</a>. When a route with parameters matches a location, the parameters will be be parsed from the location&#x27;s<!-- --> <code class="inline-code language-javascript">pathname</code>.</p><p><code class="inline-code language-javascript">path</code> strings should <strong>not</strong> have a leading slash.</p><div class="warning"><strong>Warning:</strong> <code class="inline-code language-javascript">path-to-regexp</code> supports arrays and RegExps, but Curi only supports string paths. This is because Curi uses<!-- --> <code class="inline-code language-javascript">path-to-regexp</code> to generate pathnames from a route&#x27;s name, which it can only do from strings paths.</div></div><div class="code-block"><pre><code class="language-javascript">[
  { name: &#x27;Home&#x27;, path: &#x27;&#x27; },
  // when the pathname is a/yo, albumID = &quot;yo&quot;
  { name: &#x27;Album&#x27;, path: &#x27;a/:albumID&#x27; },
  // the path (.*) matches every pathname
  { name: &#x27;Not Found&#x27;, path: &#x27;(.*)&#x27; }
];

// don&#x27;t include a leading forward slash
// { name: &#x27;Home&#x27;, path: &#x27;/&#x27; }</code></pre></div></div></div><div class="subsection" id="match"><h3>route.match<a class="header-link" href="/packages/@curi/router/#match">#</a></h3><div class="side-by-side"><div class="explanation"><p>The <code class="inline-code language-javascript">match</code> object groups async functions that will be called when the route matches.</p><p>A route with any <code class="inline-code language-javascript">match</code> functions is asynchronous, while one with no <code class="inline-code language-javascript">match</code> functions is synchronous. You can read more about this is the<!-- --> <a href="/guides/sync-or-async/">sync or async</a> <!-- -->guide.</p><p><code class="inline-code language-javascript">match</code> functions are called every time that a route matches the current location.</p><p><code class="inline-code language-javascript">match</code> functions will be passed an object with the matched route properties: <code class="inline-code language-javascript">name</code>, <code class="inline-code language-javascript">params</code>,<!-- --> <code class="inline-code language-javascript">partials</code>, and <code class="inline-code language-javascript">location</code>.</p><div class="note"><strong>Note:</strong> <!-- -->You should not perform side effects (e.g. passing the loaded data to a Redux store) in <code class="inline-code language-javascript">match</code> functions because it is possible that navigating to the route might be cancelled. If you must perform side effects for a route, you should do so in<!-- --> <code class="inline-code language-javascript">response()</code>.</div></div><div class="code-block"><pre><code class="language-javascript">const about = {
  name: &#x27;About&#x27;,
  path: &#x27;about&#x27;,
  match: {
    body: () =&gt; import(&#x27;./components/About&#x27;),
    data: () =&gt; fetch(&#x27;/api/about&#x27;)
  }
};</code></pre></div></div></div><div class="subsection" id="response"><h3>route.response()<a class="header-link" href="/packages/@curi/router/#response">#</a></h3><div class="side-by-side"><div class="explanation"><p>A function for modifying the response object. This returns an object whose properties will be merged with the matched route properties to create the &quot;final&quot; response.</p><p>Only valid properties will be merged onto the response; everything else will be ignored. The valid properties are:</p></div></div><ol><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">body</code> - This is usually what you will render.</p></div><div class="code-block"><pre><code class="language-javascript">import Home from &quot;./components/Home&quot;;
const routes = [
  {
    name: &quot;Home&quot;,
    path: &quot;&quot;,
    response() {
      return { body: Home };
    }
  },
  // ...
];
// response = { body: Home, ... }</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">status</code> - A number. This is useful for redirects or locations caught by your catch-all route while using server-side rendering. The default status value is<!-- --> <code class="inline-code language-javascript">200</code>.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response(){
    return {
      status: 301,
      redirectTo: {...}
    };
  }
}
// response = { status: 301, ... }</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">error</code> - If an error occurs with the route&#x27;s<!-- --> <code class="inline-code language-javascript">match</code> methods, you might want to attach an error message to the response.</p></div><div class="code-block"><pre><code class="language-javascript">{
  match: {
    test: () =&gt; Promise.reject(&quot;woops!&quot;)
  },
  response({ error }) {
    return { error };
  }
}
// response = { error: &quot;woops!&quot;, ... }</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">data</code> - Anything you want it to be.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response() {
    return { data: Math.random() };
  }
}
// response = { data: 0.8651606708109429, ... }</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">title</code> - This can be used with<!-- --> <code class="inline-code language-javascript">@curi/side-effect-title</code> to update the page&#x27;s<!-- --> <code class="inline-code language-javascript">document.title</code>.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response({ params }) {
    return { title: `User ${params.id}` };
  }
}
// when visting /user/2
// response = { title: &quot;User 2&quot;, ... }</code></pre></div></div></li><li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">redirectTo</code> - An object with the <code class="inline-code language-javascript">name</code> <!-- -->of the route to redirect to, <code class="inline-code language-javascript">params</code> (if required), and optional <code class="inline-code language-javascript">hash</code>, <code class="inline-code language-javascript">query</code>, and <code class="inline-code language-javascript">state</code> properties.</p><p>The other values are copied directly, but<!-- --> <code class="inline-code language-javascript">redirectTo</code> will be turned into a location object using the object&#x27;s <code class="inline-code language-javascript">name</code> (and <code class="inline-code language-javascript">params</code> if required).</p></div><div class="code-block"><pre><code class="language-javascript">[
  {
    name: &quot;Old Photo&quot;,
    path: &quot;photo/:id&quot;,
    response({ params }) {
      return {
        redirectTo: { name: &quot;Photo&quot;, params }
      };
    }
  },
  {
    name: &quot;New Photo&quot;,
    path: &quot;p/:id&quot;
  }
]
// when the user navigates to /photo/1:
// response = { redirectTo: { pathname: &quot;/p/1&quot;, ... } }</code></pre></div></div></li></ol><div class="side-by-side"><div class="explanation"><p>This function is passed an object with a number of properties that can be useful for modifying the response.</p></div><div class="code-block"><pre><code class="language-javascript">{
  response: ({ match, resolved }) =&gt; {
    // ...
  }
}</code></pre></div></div><ul><div class="subsection" id="response-match"><li>match<a class="header-link" href="/packages/@curi/router/#response-match">#</a></li><div class="side-by-side"><div class="explanation"><p>An object with the matched route properties of a response.</p><table><thead><tr><th>property</th><th>description</th></tr></thead><tbody><tr><td>name</td><td>the name of the matched route</td></tr><tr><td>params</td><td>route parameters parsed from the location</td></tr><tr><td>partials</td><td>the names of any ancestor routes of the matched route</td></tr><tr><td>location</td><td>the location that was used to match the route</td></tr><tr><td>key</td><td>the location&#x27;s <code class="inline-code language-javascript">key</code>, which is a unique identifier</td></tr></tbody></table></div></div></div><div class="subsection" id="response-resolved"><li>resolved<a class="header-link" href="/packages/@curi/router/#response-resolved">#</a></li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">resolved</code> is an object with the values resolved by the <code class="inline-code language-javascript">match</code> functions.</p><p>If a route isn&#x27;t async, <code class="inline-code language-javascript">resolved</code> will be<!-- --> <code class="inline-code language-javascript">null</code>.</p></div><div class="code-block"><pre><code class="language-javascript">// attach resolved data to the response
const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  match: {
    data: ({ params, location }) =&gt; (
      fetch(`/api/users/${params.id}`)
        .then(resp =&gt; JSON.parse(resp))
    ),
  },
  response: ({ resolved }) =&gt; {
    return {
      data: resolved.data
    };
  }
}</code></pre></div></div></div><div class="subsection" id="response-error"><li>error<a class="header-link" href="/packages/@curi/router/#response-error">#</a></li><div class="side-by-side"><div class="explanation"><p><code class="inline-code language-javascript">error</code> is an error thrown by one of the route&#x27;s<!-- --> <code class="inline-code language-javascript">match</code> functions.</p></div><div class="code-block"><pre><code class="language-javascript">// check if any of a route&#x27;s match functions threw
const user = {
  name: &#x27;User&#x27;,
  path: &#x27;:id&#x27;,
  match: {
    data: ({ params, location }) =&gt; (
      fetch(`/api/users/${params.id}`)
        .then(resp =&gt; JSON.parse(resp))
    ),
  },
  response: ({ error, resolved }) =&gt; {
    if (error) {
      return { error };
    }
    return {
      data: resolved.data
    };
  }
}</code></pre></div></div></div></ul></div><div class="subsection" id="children"><h3>children<a class="header-link" href="/packages/@curi/router/#children">#</a></h3><div class="side-by-side"><div class="explanation"><p>An optional array of route objects for creating nested routes. Any child routes will be matched relative to their parent route&#x27;s <code class="inline-code language-javascript">path</code>. This means that if a parent route&#x27;s<!-- --> <code class="inline-code language-javascript">path</code> string is <code class="inline-code language-javascript">&#x27;one&#x27;</code> and a child route&#x27;s<!-- --> <code class="inline-code language-javascript">path</code> string is <code class="inline-code language-javascript">&#x27;two&#x27;</code>, the child will match when the pathname is <code class="inline-code language-javascript">&#x27;one/two&#x27;</code>.</p></div><div class="code-block"><pre><code class="language-javascript">// &#x27;/a/Coloring+Book/All+Night&#x27; will be matched
// by the &quot;Song&quot; route, with the params
// { album: &#x27;Coloring+Book&#x27;, title: &#x27;All+Night&#x27; }
{
  name: &#x27;Album&#x27;,
  path: &#x27;a/:album&#x27;,
  children: [
    {
      name: &#x27;Song&#x27;,
      path: &#x27;:title&#x27;
    }
  ]
}</code></pre></div></div></div><div class="subsection" id="params"><h3>params<a class="header-link" href="/packages/@curi/router/#params">#</a></h3><div class="side-by-side"><div class="explanation"><p>When <code class="inline-code language-javascript">path-to-regexp</code> matches your paths, all parameters are extracted as strings. If you prefer for some route params to be other types, you can provide functions to transform params using the <code class="inline-code language-javascript">route.params</code> object.</p><p>Properties of the <code class="inline-code language-javascript">route.params</code> object are the names of params to be parsed. The paired value should be a function that takes a string (the value from the <code class="inline-code language-javascript">pathname</code>) and returns a new value (transformed using the function you provide).</p></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  {
    name: &#x27;Number&#x27;,
    path: &#x27;number/:num&#x27;,
    params: {
      num: n =&gt; parseInt(n, 10)
    }
  }
]
// when the user visits /number/1,
// response.params will be { num: 1 }
// instead of { num: &quot;1&quot; }</code></pre></div></div></div><div class="subsection" id="pathOptions"><h3>pathOptions<a class="header-link" href="/packages/@curi/router/#pathOptions">#</a></h3><div class="side-by-side"><div class="explanation"><p>If you need to provide different path options than<!-- --> <a href="https://github.com/pillarjs/path-to-regexp#usage">the defaults</a> <!-- -->used by <code class="inline-code language-javascript">path-to-regexp</code>, you can provide them with a<!-- --> <code class="inline-code language-javascript">pathOptions</code> object.</p><div class="note"><strong>Note:</strong> <!-- -->If a route has a children array property, it will<!-- --> <strong>always</strong> have the <code class="inline-code language-javascript">end</code> path option set to false.</div></div></div></div><div class="subsection" id="extra"><h3>extra<a class="header-link" href="/packages/@curi/router/#extra">#</a></h3><div class="side-by-side"><div class="explanation"><p>If you have any additional properties that you want attached to a route, use the <code class="inline-code language-javascript">extra</code> property. You will be able to use <code class="inline-code language-javascript">route.extra</code> in any custom route interactions.</p></div><div class="code-block"><pre><code class="language-javascript">const routes = [
  {
    name: &#x27;A Route&#x27;,
    path: &#x27;a-route&#x27;,
    extra: {
      transition: &#x27;fade&#x27;
    }
  },
  {
    name: &#x27;B Route&#x27;,
    path: &#x27;b-route&#x27;,
    extra: {
      enter: &#x27;slide-right&#x27;
    }
  }
];</code></pre></div></div></div></div></div></div><div class="page-links"><button type="button" class="toggler">Menu</button><div class="children"><h2>Packages</h2><ul><li class="link-group"><h3>router</h3><ul class="link-list"><li class="solo"><a class=" active" href="/packages/@curi/router/">router</a></li></ul></li><li class="link-group"><h3>render</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/react/">react</a></li><li class="solo"><a class=" " href="/packages/@curi/react-native/">react-native</a></li><li class="solo"><a class=" " href="/packages/@curi/svelte/">svelte</a></li><li class="solo"><a class=" " href="/packages/@curi/vue/">vue</a></li></ul></li><li class="link-group"><h3>route interactions</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/route-active/">route-active</a></li><li class="solo"><a class=" " href="/packages/@curi/route-ancestors/">route-ancestors</a></li><li class="solo"><a class=" " href="/packages/@curi/route-prefetch/">route-prefetch</a></li></ul></li><li class="link-group"><h3>side effects</h3><ul class="link-list"><li class="solo"><a class=" " href="/packages/@curi/side-effect-aria-live/">side-effect-aria-live</a></li><li class="solo"><a class=" " href="/packages/@curi/side-effect-title/">side-effect-title</a></li><li class="solo"><a class=" " href="/packages/@curi/side-effect-scroll/">side-effect-scroll</a></li></ul></li></ul></div></div></div></main></div>
    <script src="https://cdn.polyfill.io/v2/polyfill.js?features=Object.assign,IntersectionObserver,IntersectionObserverEntry"></script>
    <script src="https://unpkg.com/react@16.3.1/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.3.1/umd/react-dom.production.min.js"></script>
    <script src="/static/js/prism.js"></script>
    <script src="/static/js/bundle.js"></script>
  </body>
</html>
