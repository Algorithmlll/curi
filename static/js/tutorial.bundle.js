webpackJsonp([3],{49:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=a(n(60)),r=function(e){var t=e.params,n=o.default[t.name];return n?l.default.createElement(n,null):l.default.createElement("div",null,"The requested tutorial could not be found.")};t.default=r},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),l=function(e){var t=e.id;return a.default.createElement("div",{className:"demo"},a.default.createElement("iframe",{src:"https://codesandbox.io/embed/".concat(t),width:"100%",height:"600px",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),a.default.createElement("p",null,"Use the three buttons at the top of the Sandbox to toggle view modes. Clicking the menu button in the top left corner opens a menu that allows you to switch between files."))},o=l;t.default=o},56:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=a(n(10)),r=function(e){var t=e.children;return l.default.createElement("div",{className:"tutorial"},l.default.createElement("div",{className:"content"},t||null),l.default.createElement("div",{className:"sidebar"},l.default.createElement("h2",null,"Tutorials"),l.default.createElement(o.default,null)))};t.default=r},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Outline=t.CompleteBranch=t.TutorialBranches=t.TutorialBranch=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),l=n(2),o=function(e){var t=e.name;return a.default.createElement("div",{className:"tutorial-branch"},a.default.createElement("p",null,"If you are following along using the"," ",a.default.createElement("a",{href:"https://github.com/pshrmn/curi-tutorial"},"tutorial repo"),", please checkout the ",a.default.createElement(l.InlineJS,null,t)," branch."),a.default.createElement(l.PrismBlock,{lang:"bash"},"git checkout ".concat(t)))};t.TutorialBranch=o;var r=function(e){var t=e.names;return a.default.createElement("div",{className:"tutorial-branch"},a.default.createElement("p",null,"If you are following along using the"," ",a.default.createElement("a",{href:"https://github.com/pshrmn/curi-tutorial"},"tutorial repo"),", please checkout the appropriate branch for your rendering framework."),a.default.createElement(l.PrismBlock,{lang:"bash"},t.map(function(e){return"git checkout ".concat(e)}).join("\n")))};t.TutorialBranches=r;var i=function(e){var t=e.name;return a.default.createElement("div",{className:"tutorial-branch"},a.default.createElement("p",null,"You can view the completed source code for this tutorial"," ",a.default.createElement("a",{href:"https://github.com/pshrmn/curi-tutorial/tree/".concat(t)},"on GitHub"),"."))};t.CompleteBranch=i;var u=function(e){var t=e.children;return a.default.createElement("div",{className:"tutorial-outline"},a.default.createElement("p",null,"In this tutorial, we will be doing the following:"),t)};t.Outline=u},60:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(61)),o=a(n(62)),r=a(n(63)),i=a(n(64)),u=a(n(65)),s=a(n(66)),c=a(n(67)),d=a(n(68)),m=a(n(69)),h=a(n(70)),p=a(n(71)),f=a(n(72)),b={"01-setup":l.default,"02-routes":o.default,"03-router":r.default,"04-pages-react":i.default,"04-pages-vue":u.default,"05-loading-data":s.default,"06-render-data-react":c.default,"06-render-data-vue":d.default,"07-nav-react":m.default,"07-nav-vue":h.default,"08-now-what":p.default,"react-basics":f.default};t.default=b},61:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 1: Setting up Curi"),l.default.createElement("p",null,"Setup is never exciting, but a little bit of it is necessary."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Initializing our project and installing the packages (from NPM) that are necessary to get started."),l.default.createElement("li",null,"Creating directories for our source and public files, as well as adding some empty files for future use."),l.default.createElement("li",null,"Setting up a simple Express server to serve our website contents."),l.default.createElement("li",null,"Setting up Babel/Webpack."))),l.default.createElement(i.TutorialBranch,{name:"01-setup"}),l.default.createElement(c.Section,{title:"The Basics",id:"basics"},l.default.createElement("p",null,"In the terminal, navigate to the parent directory where you want to keep the code for your website and create a new directory for the website. We can then navigate into our new directory."),l.default.createElement(u.PrismBlock,{lang:"bash"},"# if you're using the tutorial repo, you should skip\n# this because you'll be using the repo folder\nmkdir curi-bookstore\ncd curi-bookstore"),l.default.createElement("p",null,"Inside of the directory, run ",l.default.createElement(u.InlineJS,null,"npm init")," to generate a"," ",l.default.createElement(u.InlineJS,null,"package.json")," file. Then, we can install the most important package for Curi: ",l.default.createElement(u.InlineJS,null,"@curi/core"),". We should also install"," ",l.default.createElement(u.InlineJS,null,"@hickory/browser"),", which we'll cover later on."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm init -f # -f will force default values\nnpm install @curi/core @hickory/browser")),l.default.createElement(c.Section,{title:"File Structure",id:"structure"},l.default.createElement("p",null,"We should also get some of the directories/files for our website setup. You can restructure your application however you want, but the approach used in this project can serve as a good starting point."),l.default.createElement(u.PrismBlock,{lang:"bash"},"mkdir src\nmkdir -p public/js\ntouch src/index.js src/routes.js public/index.html"),l.default.createElement("p",null,"The above commands will leave us with the following project structure:"),l.default.createElement(u.PrismBlock,null,"curi-bookstore/\n+- src/\n|  +- index.js\n|  +- routes.js\n+- public/\n|  +- index.html\n|  +- js/\n+- package.json")),l.default.createElement(c.Section,{title:"Building the Site",id:"building"},l.default.createElement("p",null,"We will be using Babel/Webpack to build our project. We won't be diving into the details of how these work, but will provide the code necessary to get this setup."),l.default.createElement("p",null,"We can start by installing the necessary packages as well as adding configuration files for both Babel and Webpack. We will be using Babel 7, so we can use a JavaScript file instead of JSON for our Babel router."),l.default.createElement("p",null,"We will also be using ",l.default.createElement(u.InlineJS,null,"webpack-dev-server")," in place of setting up a server. This allows us to have live reloading in development."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch .babelrc.js webpack.config.js\nnpm install -D webpack webpack-dev-server @babel/core\n  @babel/preset-env babel-loader@next"),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// .babelrc.js\nmodule.exports = {\n  presets: [\n    ['@babel/env',{\n      modules: false\n    }]\n  ]\n};"),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// webpack.config.js\nconst path = require('path');\n\nconst config = {\n  context: path.resolve(__dirname, 'src'),\n  entry: './index.js',\n  output: {\n    path: path.resolve(__dirname, 'public'),\n    filename: 'js/bundle.js'\n  },\n  module: {\n    rules: [\n      {\n        test: /.js$/,\n        use: 'babel-loader'\n      }\n    ]\n  },\n  devServer: {\n    contentBase: path.resolve(__dirname, 'public'),\n    historyApiFallback: true\n  }\n};\n\nmodule.exports = config;"),l.default.createElement("p",null,"We also need to create the ",l.default.createElement(u.InlineJS,null,"index.html")," file. This just needs to include the DOM element that we will render our application in and a"," ",l.default.createElement(u.InlineComponent,null,"script")," that loads our bundled application. You can copy the code below into your ",l.default.createElement(u.InlineJS,null,"public/index.html")," file."),l.default.createElement(u.PrismBlock,{lang:"html"},'\x3c!--public/index.html--\x3e\n<!doctype html>\n<html>\n  <head>\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n  </head>\n  <body>\n    <div id="root"></div>\n    <script src="/js/bundle.js"><\/script>\n  </body>\n</html>'),l.default.createElement("p",null,"Finally, we just need to add a script to our ",l.default.createElement(u.InlineJS,null,"package.json")," ","file in order to build our bundle."),l.default.createElement(u.PrismBlock,{lang:"javascript"},'// package.json\n{\n  // ...,\n  "scripts": {\n    "dev": "webpack-dev-server"\n  }\n}'),l.default.createElement(s.Note,null,"If you're building this from scratch, you will probably want to add a"," ",l.default.createElement(u.InlineJS,null,".gitignore")," file and ignore the ",l.default.createElement(u.InlineJS,null,"node_modules/")," ","directory.")),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement(i.CompleteBranch,{name:"02-routes"})),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,"With our project setup, we are now ready to continue the tutorial with"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"02-routes"}},"Part 2: Routes"),".")))};t.default=d},62:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 2: Curi Routes"),l.default.createElement("p",null,"Now that we have our project setup, it is time to start thinking about the route structure of the website."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Deciding what pages our website will contain."),l.default.createElement("li",null,"Learning about basic route properties."),l.default.createElement("li",null,"Creating route objects for each of our website's pages."))),l.default.createElement(i.TutorialBranch,{name:"02-routes"}),l.default.createElement(c.Section,{title:"Pages",id:"pages"},l.default.createElement("p",null,"We should start by identifying the pages that we want to have in our website. This can always be modified later, but it is a good idea to know what pages you are going to need to create."),l.default.createElement("p",null,"For this website, we will be creating the following pages:"),l.default.createElement("ol",null,l.default.createElement("li",null,"Home - the landing page for the website"),l.default.createElement("li",null,"Book list - a list of all of the books available for purchase"),l.default.createElement("li",null,"Book - a page for each book"),l.default.createElement("li",null,'Checkout - a page to "buy" books that have been added to the shopping cart')),l.default.createElement("p",null,"Additionally, we should have a 404 page that is displayed when the user visits a location that has no matching route."),l.default.createElement("p",null,"Each page in our website must have a pathname associated with it. These may either be static or dynamic (include parts that change, like IDs)."),l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("th",null,"name"),l.default.createElement("th",null,"path")),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"Home"),l.default.createElement("td",null,"/")),l.default.createElement("tr",null,l.default.createElement("td",null,"Book List"),l.default.createElement("td",null,"/books")),l.default.createElement("tr",null,l.default.createElement("td",null,"Book"),l.default.createElement("td",null,"/books/:id (e.g. /books/2468)")),l.default.createElement("tr",null,l.default.createElement("td",null,"Checkout"),l.default.createElement("td",null,"/checkout"))))),l.default.createElement(c.Section,{title:"Routes",id:"routes"},l.default.createElement("p",null,"Routes describe the valid pathnames for a website. With Curi, routes are simply JavaScript objects with some known properties."),l.default.createElement("p",null,"The two most important properties of a route object are ",l.default.createElement(u.InlineJS,null,"name")," ","and ",l.default.createElement(u.InlineJS,null,"path"),". The ",l.default.createElement(u.InlineJS,null,"name")," is a ",l.default.createElement("strong",null,"unique")," ","string that you will use to identify a particular route. The"," ",l.default.createElement(u.InlineJS,null,"path")," is a formatted string that defines what the route should match."),l.default.createElement("p",null,"Route matching is done against a location's pathname. This means that given the URL ",l.default.createElement(u.InlineJS,null,"https://example.com/some/page#test"),", routes will attempt to match against the string ",l.default.createElement(u.InlineJS,null,"/some/page"),"."),l.default.createElement(s.Note,null,"Curi uses the ",l.default.createElement(u.InlineJS,null,"path-to-regexp")," to match routes. We will cover basic usage, for advanced usage you should check out the documention in the"," ",l.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp"},l.default.createElement(u.InlineJS,null,"path-to-regexp"))," ","GitHub repo."),l.default.createElement("p",null,"All of the base routes of our application should be placed in an array. Nested routes will be defined using the ",l.default.createElement(u.InlineJS,null,"children")," property of their parent route."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// routes.js\nconst routes = [];"),l.default.createElement("p",null,"The first route that we will define is for our homepage. We can name it anything we want, but for simplicity we'll just call it \"Home\". The home page's ",l.default.createElement(u.InlineJS,null,"path")," is an empty string (",l.default.createElement(u.InlineJS,null,"''"),")."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"const routes = [\n  { name: 'Home', path: '' }\n];"),l.default.createElement(s.Note,null,'Up above, we said that the pathname for our "Home" route is ',l.default.createElement(u.InlineJS,null,"/"),". However, with Curi, ",l.default.createElement(u.InlineJS,null,"path")," strings never begin with a forward slash. For all of the paths for routes that are listed above, we just need to strip off the leading slash."),l.default.createElement("p",null,'That is simple enough, yes? Let\'s add our "Checkout" route. That should look just like our "Home" route.'),l.default.createElement(u.PrismBlock,{lang:"javascript"},"const routes = [\n  { name: 'Home', path: '' },\n  { name: 'Checkout', path: 'checkout' }\n];"),l.default.createElement("p",null,"Now, if a user visits"," ",l.default.createElement(u.InlineJS,null,"https://<our website domain>/checkout"),", our checkout page will match."),l.default.createElement("p",null,"We still have more routes to define, but there are two concepts to introduce first: path params and the ",l.default.createElement(u.InlineJS,null,"children")," property of route objects."),l.default.createElement(c.Subsection,{title:"Path Params",id:"path-params",type:"aside"},l.default.createElement("p",null,"With ",l.default.createElement(u.InlineJS,null,"path-to-regexp"),", when you create a path string, it is normally interpreted literally. That means that the the path"," ",l.default.createElement(u.InlineJS,null,"'products/hat'")," will only match the location whose pathname is ",l.default.createElement(u.InlineJS,null,"/products/hat"),". What if we also have a shirt? And socks? And shorts? Do you want to define a path for each individual product? Nope. Instead, ",l.default.createElement(u.InlineJS,null,"path-to-regexp"),' allows us to define dynamic parts of pathnames using "params".'),l.default.createElement("p",null,"What is a param? It is a way to tell ",l.default.createElement(u.InlineJS,null,"path-to-regexp")," to capture part of the pathname at a particular point and store its value using the param's name. The param starts with a colon and then specifies the param's name."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"{ path: 'product/:name' }"),l.default.createElement("p",null,"Using the above path, we will capture the portion of the pathname that comes after ",l.default.createElement(u.InlineJS,null,"product/"),' and store it in an object using the key "name".'),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// { pathname: '/products/hat' }\nparams = { name: 'hat' }\n// { pathname: '/products/shirt' }\nparams = { name: 'shirt' }\n// { pathname: '/products/shorts' }\nparams = { name: 'shorts' }"),l.default.createElement("p",null,"By default, a param will match all characters up until the next forward slash or the end of the string. You can also perform more specific matching, but that is outside of the scope of this tutorial.")),l.default.createElement(c.Subsection,{title:"Route Children",id:"children",type:"aside"},l.default.createElement("p",null,"Sometimes, you will have routes whose ",l.default.createElement(u.InlineJS,null,"path")," extends the path of another route. For example, you might have a route whose path is"," ",l.default.createElement(u.InlineJS,null,"'parent'")," and a child route with the path"," ",l.default.createElement(u.InlineJS,null,"'parent/child'"),"."),l.default.createElement("p",null,"Using the ",l.default.createElement(u.InlineJS,null,"children")," property of route objects, you can attach an array of child routes to a parent route. The ",l.default.createElement(u.InlineJS,null,"path")," ","of each child route will extend the parent route's ",l.default.createElement(u.InlineJS,null,"path"),". That means that using the parent/child paths from above, we can define the parent route to have the path ",l.default.createElement(u.InlineJS,null,"'parent'")," and a child route whose path is ",l.default.createElement(u.InlineJS,null,"'child'"),". Curi will treat that child route as if its path is ",l.default.createElement(u.InlineJS,null,"'parent/child'"),"."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"{\n  name: 'Parent',\n  path: 'parent',\n  children: [\n    {\n      name: 'Child',\n      path: 'child' // will match the pathname /parent/child\n    }\n  ]\n}")),l.default.createElement("p",null,"Now, we can use path params and route ",l.default.createElement(u.InlineJS,null,"children")," to define our book list/book routes."),l.default.createElement("p",null,"For this tutorial, we will identify books from a pathname using their"," ",l.default.createElement(u.InlineJS,null,"id"),'. We can name this anything we want, but "id" is simple and to the point.'),l.default.createElement(u.PrismBlock,{lang:"javascript"},"const routes = [\n  { name: 'Home', path: '' },\n  { name: 'Checkout', path: 'checkout' },\n  {\n    name: 'Book List',\n    path: 'books',\n    children: [\n      {\n        name: 'Book',\n        path: ':id'\n      }\n    ]\n  }\n];"),l.default.createElement(c.Subsection,{title:"route.match",id:"route-match"},l.default.createElement("p",null,"We don't need it quite yet, but we should quickly cover another one of the properties of a route: ",l.default.createElement(u.InlineJS,null,"match"),". The ",l.default.createElement(u.InlineJS,null,"match")," ","property is where we can provide functions that will be called when the route matches. There are three valid functions: ",l.default.createElement(u.InlineJS,null,"initial"),","," ",l.default.createElement(u.InlineJS,null,"every"),", and ",l.default.createElement(u.InlineJS,null,"response"),"."),l.default.createElement("p",null,"We won't be using the ",l.default.createElement(u.InlineJS,null,"initial")," function, but you can read more about it in the"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"code-splitting"}},"Code Splitting")," ","guide. The ",l.default.createElement(u.InlineJS,null,"every")," function will be used later on, but for now, we only care about the ",l.default.createElement(u.InlineJS,null,"response")," function."),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"response")," function gives us an opportunity to set some properties on the response object. ",l.default.createElement(u.InlineJS,null,"response")," receives an object with a bunch of properties (which you can read about"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"routes"},details:{hash:"response"}},"here"),"), but right now we only care about the ",l.default.createElement(u.InlineJS,null,"set")," object."),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"set")," object has functions that can be called to modify the response object. For example, calling ",l.default.createElement(u.InlineJS,null,"set.body('Hi!')")," ","will set the ",l.default.createElement(u.InlineJS,null,"body"),' property of the response to "Hi!".'),l.default.createElement("p",null,"Let's add ",l.default.createElement(u.InlineJS,null,"match.response")," functions to each of our routes. We don't really have anything to set as the body, so we'll just use the route's name as a placeholder."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"const routes = [\n  {\n    name: 'Home',\n    path: '',\n    match: {\n      response: ({ set }) => {\n        set.body('Home');\n      }\n    }\n  },\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    match: {\n      response: ({ set }) => {\n        set.body('Checkout');\n      }\n    }\n  },\n  {\n    name: 'Book List',\n    path: 'books',\n    match: {\n      response: ({ set }) => {\n        set.body('Book List');\n      }\n    },\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        match: {\n          response: ({ set }) => {\n            set.body('Book');\n          }\n        }\n      }\n    ]\n  }\n];"),l.default.createElement("p",null,"Now, if a user visits the ",l.default.createElement(u.InlineJS,null,"/books")," page, the response object will include a ",l.default.createElement(u.InlineJS,null,"body"),' property whose value is "Book List".')),l.default.createElement(c.Subsection,{title:"Wildcard Routes",id:"wildcard"},l.default.createElement("p",null,"We have one last \"route\" that we should define. This isn't really a route, just a catch all that we can use to identify locations that we don't have a route defined for. ",l.default.createElement(u.InlineJS,null,"path-to-regexp")," allows us to capture everything using the path string ",l.default.createElement(u.InlineJS,null,"(.*)"),"."),l.default.createElement(s.Note,null,l.default.createElement(u.InlineJS,null,"(.*)")," uses another of the special ",l.default.createElement(u.InlineJS,null,"path-to-regexp")," ","formats. If you provide a regular expression within parentheses,"," ",l.default.createElement(u.InlineJS,null,"path-to-regexp")," will only match content that is matched by the regular expression. This can also be paired with a named path param (e.g. ",l.default.createElement(u.InlineJS,null,":id(\\d{4})"),"), but is not necessary."),l.default.createElement("p",null,"Since the regular expression ",l.default.createElement(u.InlineJS,null,".*")," matches everything, we can use this to match all possible pathnames that someone using the website might navigate to."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"const routes = [\n  // ...,\n  {\n    name: 'Not Found',\n    path: '(.*)',\n    match: {\n      response: ({ set }) => {\n        set.body('Not Found');\n      }\n    }\n  }\n];\n// don't forget to export the routes\nexport default routes;")),l.default.createElement(c.Subsection,{title:"Route Order",id:"order"},l.default.createElement("p",null,"One last thing to note about routes is that their order in the routes array is important. Curi will iterate over them in depth-first order. This means that with the above router, Curi will first check if"," ",l.default.createElement(u.InlineJS,null,"''")," matches the pathname, if it does not, it will move on to"," ",l.default.createElement(u.InlineJS,null,"'checkout'"),', so on and so forth. If no other routes match, then we know that our "Not Found" route will.'),l.default.createElement("p",null,"Curi will only attempt to match children routes if their parent route (partially) matches the location's pathname. That means that when the pathname is ",l.default.createElement(u.InlineJS,null,"'/somewhere'"),', Curi will not attempt to match the nested "Book" route because the "Book List" route does not match.'))),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement(i.CompleteBranch,{name:"03-hickory"})),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,"Now that our routes are defined, it is time to talk about history in"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"03-hickory"}},"Part 3: Hickory"))))};t.default=d},63:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 3: The Router"),l.default.createElement("p",null,"One thing that all modern JavaScript routers have in common is that they use the"," ",l.default.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/History_API"},"History API")," ","to perform in-app navigation. Curi uses a package called"," ",l.default.createElement("a",{href:"https://github.com/pshrmn/hickory"},"Hickory"),", which will interact with the History API for us."),l.default.createElement("p",null,"We need to figure out how to get our website to use the History API and then we will be ready to create the router."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Learning about the Hickory package and location objects."),l.default.createElement("li",null,"Creating the Hickory history object for our website."),l.default.createElement("li",null,"Creating our router using our routes and history object."))),l.default.createElement(i.TutorialBranch,{name:"03-hickory"}),l.default.createElement(c.Section,{title:"Hickory and History",id:"hickory"},l.default.createElement("p",null,l.default.createElement("a",{href:"https://github.com/pshrmn/hickory"},"Hickory"),' is JavaScript library that is used to create "history" objects. These history objects allow you to navigate between locations within your application. A history object interacts with the browser using the native History API so that when you navigate to a new location, the URI in the address bar is also updated. Hickory also detects and updates when you use the browser\'s forward and back buttons.'),l.default.createElement("p",null,"Curi integrates with Hickory to automatically create new responses whenever the location changes."),l.default.createElement(s.Note,null,"Hickory is split into three packages: ",l.default.createElement(u.InlineJS,null,"@hickory/browser"),","," ",l.default.createElement(u.InlineJS,null,"@hickory/hash"),", and ",l.default.createElement(u.InlineJS,null,"@hickory/in-memory"),". You can read about the differences between them in this"," ",l.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/about/choosing.md"},"Choosing Your History Type")," ","guide. We will be using the browser history (",l.default.createElement(u.InlineJS,null,"@hickory/browser"),")."),l.default.createElement(c.Subsection,{title:"Installation",id:"hickory-installation"},l.default.createElement("p",null,"If you have following along with these tutorials since the"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"01-setup"}},"setup tutorial"),", then you should already have the ",l.default.createElement(u.InlineJS,null,"@hickory/browser")," ","package installed. If not, you should install it now."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm install @hickory/browser")),l.default.createElement(c.Subsection,{title:"Making History",id:"making-history"},l.default.createElement("p",null,"In order to use Hickory in our application, we just need to import it and call the imported function."),l.default.createElement(s.Note,null,"There are a number of configuration options that you can provide when creating a history object. If you want to learn more about those, please check out the"," ",l.default.createElement("a",{href:"https://github.com/pshrmn/hickory/tree/master/docs"},"Hickory documentation"),"."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// index.js\nimport Browser from '@hickory/browser';\nconst history = Browser();"))),l.default.createElement(c.Section,{title:"Location",id:"hickory-location",type:"aside"},l.default.createElement("p",null,"Hickory (and Curi in turn) use location objects for navigation and route matching. These are simply JavaScript objects with a few properties to identify a location."),l.default.createElement("p",null,"When you load a page, Hickory will parse the URI to generate a location's ",l.default.createElement(u.InlineJS,null,"pathname"),", ",l.default.createElement(u.InlineJS,null,"query"),", and ",l.default.createElement(u.InlineJS,null,"hash")," ","properties. The pathname property of a location is what"," ",l.default.createElement(u.InlineJS,null,"path-to-regexp")," uses for matching routes."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// uri = '/products/socks?color=black#description'\n{\n pathname: '/products/socks',\n query: 'color=black',\n hash: 'description',\n key: '1.0',\n rawPathname: '/products/socks'\n}"),l.default.createElement("p",null,"Besides the properties parsed from the URI, locations also have a"," ",l.default.createElement(u.InlineJS,null,"key")," property that can be used to uniquely identify a location, a ",l.default.createElement(u.InlineJS,null,"rawPathname")," property (you probably won't need this, but it is useful when dealing with pathnames that contain encoded characters), and sometimes ",l.default.createElement(u.InlineJS,null,"state")," which is data tied to a location but not part of the URI."),l.default.createElement("p",null,"Hickory actually navigates between locations, not URIs. The only time that Curi/Hickory uses URIs is to set the ",l.default.createElement(u.InlineJS,null,"href")," attribute of anchor elements and to update the string displayed in the address bar (using the browser's native History API).")),l.default.createElement(c.Section,{title:"The Router",id:"router"},l.default.createElement(c.Subsection,{title:"Installation",id:"curi-installation"},l.default.createElement("p",null,"If you skipped the setup, you should install ",l.default.createElement(u.InlineJS,null,"@curi/core")," ","now."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm install @curi/core")),l.default.createElement(c.Subsection,{title:"Creating our router",id:"create"},l.default.createElement("p",null,l.default.createElement(u.InlineJS,null,"@curi/core")," only has a single, default export, which is a function that will create a router. In this tutorial, we will import it as ",l.default.createElement(u.InlineJS,null,"curi"),"."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"import curi from '@curi/core';"),l.default.createElement("p",null,l.default.createElement(u.InlineJS,null,"curi")," can take three arguments; the first two arguments are required while the third is not."),l.default.createElement("ol",null,l.default.createElement("li",null,l.default.createElement(u.InlineJS,null,"history")," - The first argument to pass to ",l.default.createElement(u.InlineJS,null,"curi")," ","is a Hickory history object."),l.default.createElement("li",null,l.default.createElement(u.InlineJS,null,"routes")," - The second argument is an array of route objects."),l.default.createElement("li",null,l.default.createElement(u.InlineJS,null,"options")," - The third argument is an object that contains additional configuration options. We will not be using this object in this tutorial.")),l.default.createElement("p",null,"Using the routes that we defined in the"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"02-routes"}},"Routes Tutorial")," ","and the"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"03-hickory"}},"Hickory history object"),", we are ready to create our router."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// index.js\nimport curi from '@curi/core';\nimport Browser from '@hickory/browser';\n\nimport routes from './routes';\n\nconst history = Browser();\nconst router = curi(history, routes);"))),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement("p",null,"This is where we will split off into React and Vue sections."),l.default.createElement(i.CompleteBranch,{name:"04-router"})),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,"Now that we have a router, we are ready to render. We are at a bit of a fork in the road. While most of the tutorials apply to everyone, the next tutorial is framework specific."),l.default.createElement("p",null,"If you are following along using React, continue on to"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"05-pages-react"}},"Part 5: React Pages")),l.default.createElement("p",null,"If you are following along using Vue, you instead you should go to"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"05-pages-vue"}},"Part 5: Vue Pages"))))};t.default=d},64:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=a(n(53)),m=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 4: React Pages"),l.default.createElement("p",null,"Now that we have our router ready to go, we can think about what our pages should look like. This tutorial will be rendering our website using React. If you prefer to use Vue, you should check out the"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"04-pages-vue"}},"Part 4: Vue Pages")," ","tutorial."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Modifying our Babel configuration to support React."),l.default.createElement("li",null,"Installing the ",l.default.createElement(u.InlineJS,null,"@curi/react")," package and learning about some of the components it provides (",l.default.createElement(u.InlineComponent,null,"CuriProvider")," and"," ",l.default.createElement(u.InlineComponent,null,"Link"),")."),l.default.createElement("li",null,"Render our app using React."),l.default.createElement("li",null,"Creating page components for each of the routes."),l.default.createElement("li",null,"Adding links so that users can navigate between locations in the website."))),l.default.createElement(i.TutorialBranch,{name:"04-pages-react"}),l.default.createElement(c.Section,{title:"Babel",id:"babel"},l.default.createElement("p",null,"Before we dive in, let's make sure that our build scripts can handle React. To do this, we just need to install Babel's React preset and add it to our Babel configuration file."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm install --save-dev @babel/preset-react"),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"6-7"},"// .babelrc.js\nmodule.exports = {\n  presets: [\n    ['@babel/env',{\n      modules: false\n    }],\n    '@babel/react'\n  ]\n};")),l.default.createElement(c.Section,{title:l.default.createElement("span",null,"The ",l.default.createElement(u.InlineJS,null,"@curi/react")," Package"),id:"package"},l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"@curi/react")," package provides React components that know how to interact with Curi. We will only be using two,"," ",l.default.createElement(u.InlineComponent,null,"CuriProvider")," and ",l.default.createElement(u.InlineComponent,null,"Link"),", but there are a number of other ones that you might find useful. You can read more about them in the"," ",l.default.createElement(o.Link,{to:"Package",params:{package:"react"},details:{hash:"API"}},l.default.createElement(u.InlineJS,null,"@curi/react")," documentation"),"."),l.default.createElement(c.Subsection,{title:"Installation",id:"installation"},l.default.createElement("p",null,"Let's start by installing the ",l.default.createElement(u.InlineJS,null,"@curi/react")," package, as well as the ",l.default.createElement(u.InlineJS,null,"react")," and ",l.default.createElement(u.InlineJS,null,"react-dom")," packages."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm install @curi/react react react-dom")),l.default.createElement(c.Subsection,{title:l.default.createElement("span",null,"The ",l.default.createElement(u.InlineComponent,null,"CuriProvider")," Component"),id:"CuriProvider"},l.default.createElement("p",null,"The first Curi component we will use is the ",l.default.createElement(u.InlineComponent,null,"CuriProvider"),". It is responsible for rendering the website whenever the location changes and placing some values on React's context (the other Curi components rely on the context, so they need to be rendered as descendants of the ",l.default.createElement(u.InlineComponent,null,"CuriProvider"),")."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// index.js\nimport { CuriProvider } from '@curi/react';"),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineComponent,null,"CuriProvider")," takes two props: ",l.default.createElement(u.InlineJS,null,"router")," and"," ",l.default.createElement(u.InlineJS,null,"children"),"."),l.default.createElement("ol",null,l.default.createElement("li",null,l.default.createElement(u.InlineJS,null,"router")," - a Curi router."),l.default.createElement("li",null,l.default.createElement(u.InlineJS,null,"children")," - a function that returns the React elements for the page. This will be called whenever a new response is emitted (and during the initial render). The argument passed to the function is an object with three properties: the new ",l.default.createElement(u.InlineJS,null,"response")," ","object, the ",l.default.createElement(u.InlineJS,null,"navigation")," and the Curi ",l.default.createElement(u.InlineJS,null,"router")," ","object. The second two can be useful occasionally, but the"," ",l.default.createElement(u.InlineJS,null,"response")," is what we really need for rendering.")),l.default.createElement(u.PrismBlock,{lang:"jsx"},"<CuriProvider router={router}>\n  {({ response, navigation, router }) => (\n    <div>\n      You are here: {response.location.pathname}\n    </div>\n  )}\n</CuriProvider>")),l.default.createElement(c.Subsection,{title:"Starting to render",id:"starting-to-render"},l.default.createElement("p",null,"We can now use the ",l.default.createElement(u.InlineComponent,null,"CuriProvider")," to start rendering the website."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"4-6,13-17"},"// index.js\nimport curi from '@curi/core';\nimport Browser from '@hickory/browser';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CuriProvider } from '@curi/react';\n\nimport routes from './routes';\n\nconst history = Browser();\nconst router = curi(history, routes);\n\nReactDOM.render((\n  <CuriProvider router={router}>\n    {({ response }) => null}\n  </CuriProvider>\n), document.getElementById('root'));"),l.default.createElement("p",null,"The above ",l.default.createElement(u.InlineJS,null,"children")," function isn't very interesting because our application is rendering nothing (",l.default.createElement(u.InlineJS,null,"null"),"). We'll come back to that in a minute, but first we should learn about the other React component that we'll be using.")),l.default.createElement(c.Subsection,{title:l.default.createElement("span",null,"The ",l.default.createElement(u.InlineComponent,null,"Link")," Component"),id:"Link"},l.default.createElement(u.PrismBlock,{lang:"javascript"},"import { Link } from '@curi/react';"),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineComponent,null,"Link")," component renders anchor (",l.default.createElement(u.InlineComponent,null,"a"),") elements. However, instead of having to write a URL, you use the ",l.default.createElement(u.InlineJS,null,"to")," ","prop to pass the name of the route that you want to navigate to."),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// { name: 'Home', path: '' }\n<Link to='Home'>Home</Link>\n// <a href='/'>Home</a>"),l.default.createElement("p",null,"If the route that you are navigating to has any params, you pass them using the ",l.default.createElement(u.InlineJS,null,"params"),' prop. Nested routes will also "inherit" the path segments from ancestor routes. If an ancestor route has params, you need to provide those as well.'),l.default.createElement(u.PrismBlock,{lang:"jsx"},"/*\n * { name: 'Parent', path: 'parent/:pID', children: [\n *   { name: 'Child', path: 'child/:cID' }\n * ]}\n */\n<Link to='Child' params={{ pID: 17, cID: 02 }}>\n  Child 02\n</Link>\n// <a href='/parent/17/child/02'>Child 02</a>"),l.default.createElement("p",null,"If you need to pass any other location properties (",l.default.createElement(u.InlineJS,null,"query"),","," ",l.default.createElement(u.InlineJS,null,"hash"),", or ",l.default.createElement(u.InlineJS,null,"state"),"), you can provide them using the"," ",l.default.createElement(u.InlineJS,null,"details")," prop."),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// { name: 'Contact', path: 'contact' }\n<Link to='Contact' details={{ hash: 'email' }}>\n  Contact by Email\n</Link>\n// <a href='/contact#email>Contact by Email</a>"),l.default.createElement("p",null,"Sometimes using ",l.default.createElement(u.InlineJS,null,"to"),", ",l.default.createElement(u.InlineJS,null,"params"),", and"," ",l.default.createElement(u.InlineJS,null,"details")," means that you type more characters than just writing a URL, but it also means you don't have to worry about string concatenation and typos (Curi will throw an error if you try linking to a route that does not exist)."),l.default.createElement(s.Note,null,"If you want to navigate outside of the application, use an anchor not a ",l.default.createElement(u.InlineComponent,null,"Link"),".",l.default.createElement(u.PrismBlock,{lang:"jsx"},"// internal\n<Link to='Contact'>Contact</Link>\n// external\n<a href=\"https://github.com\">GitHub</a>")))),l.default.createElement(c.Section,{title:l.default.createElement("span",null,"The ",l.default.createElement(u.InlineJS,null,"children")," function"),id:"children-function"},l.default.createElement("p",null,"Let's go back to that ",l.default.createElement(u.InlineJS,null,"children")," function that we pass to the"," ",l.default.createElement(u.InlineComponent,null,"CuriProvider"),". In the sample code above, we just returned"," ",l.default.createElement(u.InlineJS,null,"null"),". For our website we want to return the actual elements that make up a page."),l.default.createElement("p",null,"How should we do this? If we add a log statement to the"," ",l.default.createElement(u.InlineJS,null,"children")," function, we cans take a look at the properties of a basic response object."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"/*\n * {({ response }) => {\n *   console.log(response);\n *   return null;\n * }}\n */\nresponse: {\n body: 'Home',\n data: undefined,\n error: undefined,\n key: '1.0',\n location: { pathname: '/', ... },\n name: 'Home',\n params: {},\n partials: [],\n status: 200\n}"),l.default.createElement(s.Note,null,"The"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"responses"},details:{hash:"response-properties"}},"Response Handlers")," ","guide goes into more detail about each of the properties of a response object."),l.default.createElement("p",null,"In"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"02-routes"}},"Part 2: Curi Routes"),", we added ",l.default.createElement(u.InlineJS,null,"match.response")," functions that set the"," ",l.default.createElement(u.InlineJS,null,"body")," property for each of our routes. There, we just used a placeholder string, but now we can actually set the component for each route."),l.default.createElement("p",null,"Instead of returning a string, what if we passed a React component to"," ",l.default.createElement(u.InlineJS,null,"set.body()"),"? Then, our ",l.default.createElement(u.InlineJS,null,"children")," function can use the ",l.default.createElement(u.InlineJS,null,"body")," property of our response object to render our website."),l.default.createElement("p",null,"We'll expand on that later on, but for now, let's define the components for each of our routes.")),l.default.createElement(c.Section,{title:"The Route Components",id:"route-components"},l.default.createElement("p",null,'To refresh your memory, we have "Home", "Book List", "Book", "Checkout", and "Not Found" pages that we will need to create components for. We can write some barebones components and add some more content later on.'),l.default.createElement("p",null,"Let's create a ",l.default.createElement(u.InlineJS,null,"components")," directory inside of our"," ",l.default.createElement(u.InlineJS,null,"src")," directory. Then, we can add files for each route in there."),l.default.createElement(u.PrismBlock,{lang:"bash"},"mkdir -p src/components\ntouch src/components/Home.js src/components/BookList.js \\\n  src/components/Book.js src/components/Checkout.js src/components/NotFound.js"),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/Home.js\nimport React from 'react';\n\nconst Home = () => (\n  <div className='home'>\n    Welcome to our book store!\n  </div>\n);\nexport default Home;"),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/BookList.js\nimport React from 'react';\n\nconst BookList = () => (\n  <div className='book-list'>\n    Available Books\n  </div>\n);\nexport default BookList;"),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/Book.js\nimport React from 'react';\n\nconst Book = () => (\n  <div className='book'>\n    Book\n  </div>\n);\nexport default Book;"),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/Checkout.js\nimport React from 'react';\n\nconst Checkout = () => (\n  <div className='checkout'>\n    Checkout\n  </div>\n);\nexport default Checkout;"),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/NotFound.js\nimport React from 'react';\n\nconst NotFound = () => (\n  <div className='not-found'>\n    Page not found\n  </div>\n);\nexport default NotFound;"),l.default.createElement("p",null,"All of these components should be imported in our ",l.default.createElement(u.InlineJS,null,"routes.js"),". We can update our ",l.default.createElement(u.InlineJS,null,"set.body()")," calls to set the actual components as the ",l.default.createElement(u.InlineJS,null,"body")," property of responses."),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"2-6,14,23,32,41,52"},"// routes.js\nimport Home from './components/Home';\nimport BookList from './components/BookList';\nimport Book from './components/Book';\nimport Checkout from './components/Checkout';\nimport NotFound from './components/NotFound';\n\nconst routes = [\n  {\n    name: 'Home',\n    path: '',\n    match: {\n      response: ({ set }) => {\n        set.body(Home);\n      }\n    }\n  },\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    match: {\n      response: ({ set }) => {\n        set.body(Checkout);\n      }\n    }\n  },\n  {\n    name: 'Book List',\n    path: 'books',\n    match: {\n      response: ({ set }) => {\n        set.body(BookList);\n      }\n    },\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        match: {\n          response: ({ set }) => {\n            set.body(Book);\n          }\n        }\n      }\n    ]\n  },\n  {\n    name: 'Not Found',\n    path: '(.*)',\n    match: {\n      response: ({ set }) => {\n        set.body(NotFound);\n      }\n    }\n  }\n];\n\nexport default routes;"),l.default.createElement("p",null,"Our ",l.default.createElement(u.InlineJS,null,"children")," function is now able to use"," ",l.default.createElement(u.InlineJS,null,"response.body"),"."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"16-17"},"// index.js\nimport curi from '@curi/core';\nimport Browser from '@hickory/browser';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CuriProvider } from '@curi/react';\n\nimport routes from './routes';\n\nconst history = Browser();\nconst router = curi(history, routes);\n\nReactDOM.render((\n  <CuriProvider router={router}>\n    {({ response }) => {\n      const { body:Body } = response;\n      return <Body />;\n    }}\n  </CuriProvider>\n), document.getElementById('root'));"),l.default.createElement("p",null,"Now, if we load our website, we will render our home page (the"," ",l.default.createElement(u.InlineJS,null,"Home")," component). Unfortunately, there is no way to navigate to any of the other pages. In order to do this, we will need to add some"," ",l.default.createElement(u.InlineComponent,null,"Link"),"s to the application.")),l.default.createElement(c.Section,{title:"A Navigation Menu",id:"nav-menu"},l.default.createElement("p",null,"We can write a simple ",l.default.createElement(u.InlineComponent,null,"NavLinks"),' menu component to add navigation to the website. From this menu, we only need to be able to navigate to our "Home", Book List", and "Checkout" routes. Navigation to individual books will be done from the book list page.'),l.default.createElement("p",null,"We will use a ",l.default.createElement(u.InlineComponent,null,"nav")," element as the parent for our"," ",l.default.createElement(u.InlineComponent,null,"NavLinks"),". Inside of that is a ",l.default.createElement(u.InlineComponent,null,"ul")," and then each of our routes will be ",l.default.createElement(u.InlineComponent,null,"Link"),"s wrapped in ",l.default.createElement(u.InlineComponent,null,"li"),"s."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/components/NavLinks.js"),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/NavLinks.js\nimport React from 'react';\nimport { Link } from '@curi/react';\n\nconst NavLinks = () => (\n  <nav>\n    <ul>\n      <li>\n        <Link to='Home'>Home</Link>\n      </li>\n      <li>\n        <Link to='Book List'>Books for Sale</Link>\n      </li>\n      <li>\n        <Link to='Checkout'>Checkout</Link>\n      </li>\n    </ul>\n  </nav>\n);\nexport default NavLinks;"),l.default.createElement("p",null,"That is simple enough, but where should we render this? Our"," ",l.default.createElement(u.InlineComponent,null,"Link")," components rely on the context variables that are provided by the ",l.default.createElement(u.InlineComponent,null,"CuriProvider"),". This means that our"," ",l.default.createElement(u.InlineComponent,null,"NavLinks")," needs to be a descendant of the"," ",l.default.createElement(u.InlineComponent,null,"CuriProvider"),"."),l.default.createElement("p",null,"The easiest way for us to do that would be to modify our"," ",l.default.createElement(u.InlineJS,null,"children")," function. Instead of just returning the"," ",l.default.createElement(u.InlineJS,null,"response.body")," component, we can return a ",l.default.createElement(u.InlineComponent,null,"div")," that wraps both ",l.default.createElement(u.InlineJS,null,"response.body")," and our ",l.default.createElement(u.InlineComponent,null,"NavLinks")," ","component."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"9,18-27"},"// index.js\nimport curi from '@curi/core';\nimport Browser from '@hickory/browser';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CuriProvider } from '@curi/react';\n\nimport routes from './routes';\nimport NavLinks from './components/NavLinks.js';\n\nconst history = Browser();\nconst router = curi(history, routes);\n\nReactDOM.render((\n  <CuriProvider router={router}>\n    {({ response }) => {\n      const { body:Body } = response;\n      return (\n        <div>\n          <header>\n            <NavLinks />\n          </header>\n          <main>\n            <Body />\n          </main>\n        </div>\n      );\n    }}\n  </CuriProvider>\n), document.getElementById('root'));"),l.default.createElement("p",null,"With the ",l.default.createElement(u.InlineComponent,null,"NavLink"),"s, we can navigate between most of our routes. However, we still need to add navigation to our individual books.")),l.default.createElement(c.Section,{title:"Navigating to Our Books",id:"param-navigation"},l.default.createElement("p",null,'Our "Book" route is different than all of our other routes because the book path includes an ',l.default.createElement(u.InlineJS,null,"id"),' param. This means that we need to actually have "id" values to pass to our ',l.default.createElement(u.InlineComponent,null,"Link"),"s. Later on, we'll generate some better data, but for now we can just generate a placeholder list."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/books.js"),l.default.createElement(u.PrismBlock,{lang:"jsx"}," // books.js\nconst books = [\n  { id: 0 },\n  { id: 1 },\n  { id: 2 },\n  { id: 3 }\n];\nexport default books;"),l.default.createElement("p",null,"In the ",l.default.createElement(u.InlineComponent,null,"BookList")," component we can iterate over this list to generate links to our books."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"3,5,9-18"},"// components/BookList.js\nimport React from 'react';\nimport { Link } from '@curi/react';\n\nimport books from '../books';\n\nconst BookList = () => (\n  <div className='book-list'>\n    <h1>Available Books</h1>\n    <div className='books'>\n      { books.map(b => (\n        <div className='book-item' key={b.id}>\n          <Link to='Book' params={{ id: b.id }}>\n            Book {b.id}\n          </Link>\n        </div>\n      )) }\n    </div>\n  </div>\n);")),l.default.createElement(c.Section,{title:"Book Props",id:"book-props"},l.default.createElement("p",null,"The ",l.default.createElement(u.InlineComponent,null,"Link"),"s above allow us to navigate to our books, but we don't actually have any information about which book we are supposed to be seeing. It would really help if our ",l.default.createElement(u.InlineComponent,null,"Book")," was able to access the parsed params so that it can render the information for the correct book."),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"params")," object is a property of our response object. That means that if we pass our response object as a prop to the"," ",l.default.createElement(u.InlineComponent,null,"Body"),", we can access these params in our route components."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"24"},"// index.js\nimport curi from '@curi/core';\nimport Browser from '@hickory/browser';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CuriProvider } from '@curi/react';\n\nimport routes from './routes';\nimport NavLinks from './components/NavLinks.js';\n\nconst history = Browser();\nconst router = curi(history, routes);\n\nReactDOM.render((\n  <CuriProvider router={router}>\n    {({ response }) => {\n      const { body:Body } = response;\n      return (\n        <div>\n          <header>\n            <NavLinks />\n          </header>\n          <main>\n            <Body response={response}/>\n          </main>\n        </div>\n      );\n    }}\n  </CuriProvider>\n), document.getElementById('root'));"),l.default.createElement(s.Note,null,l.default.createElement("p",null,"There are a number of ways that you can pass props to your route components. The one thing to keep in mind is that ",l.default.createElement("em",null,"all")," of your route components will receive the same set of props."),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// only pass props that are necessary\n<Body params={response.params} />\n\n// pass the entire response so that you dont' have to\n// add props whenever you need another response property\n<Body response={response} />")),l.default.createElement("p",null,"Next, we just need to update our ",l.default.createElement(u.InlineComponent,null,"Book")," component so that it can access its ",l.default.createElement(u.InlineJS,null,"params")," prop and figure out which book to render content for."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"4,6"},"// components/Book.js\nimport React from 'react';\n\nconst Book = ({ response }) => (\n  <div className='book'>\n    Book {response.params.id}\n  </div>\n);")),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement("p",null,"After completing this tutorial, we now have a semi-functional website that renders basic content for each of our pages."),l.default.createElement(i.CompleteBranch,{name:"05-loading-data-react"}),l.default.createElement(d.default,{id:"github/pshrmn/curi-tutorial/tree/05-loading-data-react"})),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,"At this point, we have a website with a number of pages. It isn't particularly useful yet, but at least we can navigate between pages. Next we will take a step back from React and learn how to implement data loading with"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"05-loading-data"}},"Part 5: Loading Data"),".")))};t.default=m},65:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=a(n(53)),m=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 4: Vue Pages"),l.default.createElement("p",null,"Now that we have our router ready to go, we can think about what our pages should look like. This tutorial will be rendering our website using Vue. If you prefer to use React, you should check out the"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"04-pages-react"}},"Part 4: React Pages")," ","tutorial."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Modifying our Webpack configuration to support Vue."),l.default.createElement("li",null,"Installing the ",l.default.createElement(u.InlineJS,null,"@curi/vue")," package, learning about the"," ",l.default.createElement(u.InlineJS,null,"CuriPlugin")," and one of the components it provides (",l.default.createElement(u.InlineComponent,null,"curi-link"),")."),l.default.createElement("li",null,"Using the response object emitted by Curi to render our website."),l.default.createElement("li",null,"Defining page components for each of the routes."),l.default.createElement("li",null,"Adding links so that users can navigate between locations in the website."))),l.default.createElement(i.TutorialBranch,{name:"04-pages-vue"}),l.default.createElement(c.Section,{title:"Webpack",id:"webpack"},l.default.createElement("p",null,"Before we dive in, let's make sure that our build scripts can handle Vue. To do this, we just need to install Webpack's Vue loader and add support for ",l.default.createElement(u.InlineJS,null,".vue")," files to our Webpack configuration."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm install --save-dev vue-loader vue-template-compiler"),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"11-16,23-26"},"// webpack.config.js\nconst path = require('path');\n\nconst config = {\n  context: path.resolve(__dirname, 'src'),\n  entry: './index.js',\n  output: {\n    path: path.resolve(__dirname, 'public'),\n    filename: 'js/bundle.js'\n  },\n  resolve: {\n    extensions: ['.js', '.vue'],\n    alias: {\n      vue: 'vue/dist/vue.js'\n    }\n  },\n  module: {\n    rules: [\n      {\n        test: /.js$/,\n        use: 'babel-loader'\n      },\n      {\n        test: /.vue$/,\n        loader: 'vue-loader'\n      }\n    ]\n  },\n  devServer: {\n    contentBase: path.resolve(__dirname, 'public'),\n    historyApiFallback: true\n  }\n};\n\nmodule.exports = config;")),l.default.createElement(c.Section,{title:l.default.createElement("span",null,"The ",l.default.createElement(u.InlineJS,null,"@curi/vue")," Package"),id:"package"},l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"@curi/vue")," package exports a Vue plugin, which provides components that know how to interact with Curi. For this tutorial, we will only be using one: ",l.default.createElement(u.InlineComponent,null,"curi-link"),". You can read more about the package in the"," ",l.default.createElement(o.Link,{to:"Package",params:{package:"vue"},details:{hash:"API"}},l.default.createElement(u.InlineJS,null,"@curi/vue")," documentation"),"."),l.default.createElement(c.Subsection,{title:"Installation",id:"installation"},l.default.createElement("p",null,"Let's start by installing the ",l.default.createElement(u.InlineJS,null,"@curi/vue")," package as well as Vue."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm install @curi/vue vue")),l.default.createElement(c.Subsection,{title:"The Plugin",id:"plugin"},l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"CuriPlugin")," exported by ",l.default.createElement(u.InlineJS,null,"@curi/vue"),", should be registered with Vue after the Curi router has been created."),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"2,5,12"},"// index.js\nimport Vue from 'vue';\nimport curi from '@curi/core';\nimport Browser from '@hickory/browser';\nimport { CuriPlugin } from '@curi/vue';\n\nimport routes from './routes';\n\nconst history = Browser();\nconst router = curi(history, routes);\n\nVue.use(CuriPlugin, { router });"),l.default.createElement("p",null,"The plugin does a couple things."),l.default.createElement("ol",null,l.default.createElement("li",null,"The plugin will make your Curi router and new responses/navigations accessible to every component. The router will be accessible as"," ",l.default.createElement(u.InlineJS,null,"this.$router")," while the ",l.default.createElement(u.InlineJS,null,"response")," and"," ",l.default.createElement(u.InlineJS,null,"navigation")," objects are grouped under the"," ",l.default.createElement(u.InlineJS,null,"this.$curi")," object."),l.default.createElement("li",null,"The plugin will register Curi specific components so that they can be rendered anywhere in your application. For this tutorial, the only component that we care about is ",l.default.createElement(u.InlineComponent,null,"curi-link"),"."))),l.default.createElement(c.Subsection,{title:l.default.createElement("span",null,"The ",l.default.createElement(u.InlineComponent,null,"curi-link")," Component"),id:"Link"},l.default.createElement("p",null,"The ",l.default.createElement(u.InlineComponent,null,"curi-link")," component renders anchor (",l.default.createElement(u.InlineComponent,null,"a"),") elements. However, instead of having to write a URL, you use the"," ",l.default.createElement(u.InlineJS,null,"to")," prop to pass the name of the route that you want to navigate to."),l.default.createElement(u.PrismBlock,{lang:"jsx"},'// { name: "Home", path: "" }\n<curi-link to="Home">Home</curi-link>\n// <a href=\'/\'>Home</a>'),l.default.createElement("p",null,"If the route that you are navigating to has any params, you pass them using the ",l.default.createElement(u.InlineJS,null,"params"),' prop. Nested routes will also "inherit" the path segments from ancestor routes. If an ancestor route has params, you need to provide those as well.'),l.default.createElement(u.PrismBlock,{lang:"jsx"},"/*\n * { name: 'Parent', path: 'parent/:pID', children: [\n *   { name: 'Child', path: 'child/:cID' }\n * ]}\n */\n<curi-link to='Child' :params={{ pID: 17, cID: 02 }}>\n  Child 02\n</curi-link>\n// <a href='/parent/17/child/02'>Child 02</a>"),l.default.createElement("p",null,"If you need to pass any other location properties (",l.default.createElement(u.InlineJS,null,"query"),",",l.default.createElement(u.InlineJS,null,"hash"),", or ",l.default.createElement(u.InlineJS,null,"state"),"), you can provide them using the"," ",l.default.createElement(u.InlineJS,null,"details")," prop."),l.default.createElement(u.PrismBlock,{lang:"jsx"},'// { name: "Contact", path: "contact" }\n<curi-link to="Contact" :details="{ hash: \'email\' }">\n  Contact by Email\n</curi-link>\n// <a href=\'/contact#email>Contact by Email</a>'),l.default.createElement("p",null,"Sometimes using ",l.default.createElement(u.InlineJS,null,"to"),", ",l.default.createElement(u.InlineJS,null,"params"),", and"," ",l.default.createElement(u.InlineJS,null,"details")," means that you type more characters than just writing a URL, but it also means you don't have to worry about string concatenation and typos (Curi will throw an error if you try linking to a route that does not exist)."),l.default.createElement(s.Note,null,"If you want to navigate outside of the application, use an anchor not a ",l.default.createElement(u.InlineComponent,null,"curi-link"),".",l.default.createElement(u.PrismBlock,{lang:"jsx"},'// internal\n<curi-link to="Contact">Contact</curi-link>\n// external\n<a href="https://github.com">GitHub</a>')))),l.default.createElement(c.Section,{title:"The Response",id:"response"},l.default.createElement("p",null,"Being able to access the Curi router is nice, but what we really need is to access the response objects that are emitted by Curi whenever the location changes. The ",l.default.createElement(u.InlineJS,null,"CuriPlugin")," takes care of that step for us. ",l.default.createElement(u.InlineJS,null,"CuriPlugin")," sets up a response handler to observe the router. Whenever a new response is emitted, that response handler updates the reactive ",l.default.createElement(u.InlineJS,null,"response")," and ",l.default.createElement(u.InlineJS,null,"navigation")," ","properties of ",l.default.createElement(u.InlineJS,null,"this.$curi"),"."),l.default.createElement("p",null,"Inside of the response handler function in the ",l.default.createElement(u.InlineJS,null,"render.js")," ","file, we just need to render our root application component. All of our Curi related data will be available through ",l.default.createElement(u.InlineJS,null,"this.$curi"),", so we don't have to attach any data to the Vue instance."),l.default.createElement(s.Note,null,"You don't have to use a response handler to create your Vue instance, but if you do not, then you might render before the initial response has been created and you will need to render a loading screen."),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"8,15-19"},"// index.js\nimport Vue from 'vue';\nimport curi from '@curi/core';\nimport Browser from '@hickory/browser';\nimport { CuriPlugin } from '@curi/vue';\n\nimport routes from './routes';\nimport app from './components/app'; // we'll create this next\n\nconst history = Browser();\nconst router = curi(history, routes);\n\nVue.use(CuriPlugin, { router });\n\nconst vm = new Vue({\n  el: '#root',\n  template: '<app />',\n  components: { app }\n});")),l.default.createElement(c.Section,{title:"The App",id:"app"},l.default.createElement("p",null,"At this point we have the ability to access our router throughout our application and we are rendering some ",l.default.createElement(u.InlineComponent,null,"app")," component that we haven't actually written yet. We should write that now."),l.default.createElement(u.PrismBlock,{lang:"bash"},"mkdir -p src/components\ntouch src/components/app.vue"),l.default.createElement("p",null,"We can start with some boilerplate for the ",l.default.createElement(u.InlineComponent,null,"app"),"."),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- components/app.vue --\x3e\n<template>\n</template>\n\n<script>\n  export default {\n    name: 'app'\n  };\n<\/script>"),l.default.createElement("p",null,"Thanks to the ",l.default.createElement(u.InlineJS,null,"CuriPlugin"),", we know that our ",l.default.createElement(u.InlineComponent,null,"app")," can access the current ",l.default.createElement(u.InlineJS,null,"response")," through ",l.default.createElement(u.InlineJS,null,"this.$curi"),". How is that useful for rendering? We can add a ",l.default.createElement(u.InlineJS,null,"created")," method to the ",l.default.createElement(u.InlineComponent,null,"app")," to log the properties of our response object to see which would be helpful for rendering our website."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"/*\n * export default {\n *   name: 'app',\n *   created: function() {\n *     console.log(this.$curi.resonse);\n *   }\n *  }\n */\n{\n body: 'Home',\n data: undefined,\n error: undefined,\n key: '1.0',\n location: { pathname: '/', ... },\n name: 'Home',\n params: {},\n partials: [],\n status: 200\n}"),l.default.createElement(s.Note,null,"The"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"responses"},details:{hash:"response-properties"}},"Response Handlers")," ","guide goes into more detail about each of the properties of a response object."),l.default.createElement("p",null,"In"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"02-routes"}},"Part 2: Curi Routes"),", we added ",l.default.createElement(u.InlineJS,null,"match.response")," functions that set the"," ",l.default.createElement(u.InlineJS,null,"body")," property for each of our routes. There, we just used a placeholder string, but now we can actually set the component for each route."),l.default.createElement("p",null,"Instead of returning a string, what if ",l.default.createElement(u.InlineJS,null,"set.body")," set the"," ",l.default.createElement(u.InlineJS,null,"body")," to be a Vue component? Then, our render function can use the ",l.default.createElement(u.InlineJS,null,"body")," property of our response object to render our website."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"3"},"\x3c!-- components/app.vue --\x3e\n<template>\n  <component :is=\"$curi.response.body\" />\n</template>\n\n<script>\n  export default {\n    name: 'app'\n  };\n<\/script>"),l.default.createElement("p",null,"We'll expand on that later on, but for now, let's define the components for each of our routes.")),l.default.createElement(c.Section,{title:"The Route Components",id:"route-components"},l.default.createElement("p",null,'To refresh your memory, we have "Home", "Contact", "Book List", "Book", "Checkout", and "Not Found" pages that we will need to create components for. We can write some barebones components and add some more content later on.'),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/components/Home.vue src/components/BookList.vue \\\n  src/components/Book.vue src/components/Checkout.vue \\\n  src/components/NotFound.vue"),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/Home.vue --\x3e\n<template>\n  <div class='home'>\n    Welcome to our book store!\n  </div>\n</template>"),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/BookList.vue --\x3e\n<template>\n  <div class='book-list'>\n    Available Books\n  </div>\n</template>"),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/Book.vue --\x3e\n<template>\n  <div class='book'>\n    Book\n  </div>\n</template>"),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/Checkout.vue --\x3e\n<template>\n  <div class='checkout'>\n    Checkout\n  </div>\n</template>"),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/NotFound.vue --\x3e\n<template>\n  <div class='not-found'>\n    Page not found\n  </div>\n</template>"),l.default.createElement("p",null,"All of these components should be imported in our ",l.default.createElement(u.InlineJS,null,"routes.js")," ","and set using ",l.default.createElement(u.InlineJS,null,"set.body")," in their respective"," ",l.default.createElement(u.InlineJS,null,"match.response")," functions."),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"2-6,14,23,32,41,52"},"// routes.js\nimport Home from './components/Home';\nimport BookList from './components/BookList';\nimport Book from './components/Book';\nimport Checkout from './components/Checkout';\nimport NotFound from './components/NotFound';\n\nconst routes = [\n  {\n    name: 'Home',\n    path: '',\n    match: {\n      response: ({ set }) => {\n        set.body(Home);\n      }\n    }\n  },\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    match: {\n      response: ({ set }) => {\n        set.body(Checkout);\n      }\n    }\n  },\n  {\n    name: 'Book List',\n    path: 'books',\n    match: {\n      response: ({ set }) => {\n        set.body(BookList);\n      }\n    },\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        match: {\n          response: ({ set }) => {\n            set.body(Book);\n          }\n        }\n      }\n    ]\n  },\n  {\n    name: 'Not Found',\n    path: '(.*)',\n    match: {\n      response: ({ set }) => {\n        set.body(NotFound);\n      }\n    }\n  }\n];\n\nexport default routes;"),l.default.createElement("p",null,"Now, if we load up our application, we will render our home page. Unfortunately, there is no way to navigate to any of our other pages. We will need to add some ",l.default.createElement(u.InlineComponent,null,"curi-link"),"s to our application.")),l.default.createElement(c.Section,{title:"A Navigation Menu",id:"nav-menu"},l.default.createElement("p",null,"We can write a simple ",l.default.createElement(u.InlineComponent,null,"NavLinks"),' menu component to add navigation to our application. From this menu, we only need to be able to navigate to our "Home", "Contact", "Book List", and "Checkout" routes. Navigation to individual books will be done from the book list page.'),l.default.createElement("p",null,"We will use a ",l.default.createElement(u.InlineComponent,null,"nav")," element as the parent for our"," ",l.default.createElement(u.InlineComponent,null,"NavLinks"),". Inside of that is a ",l.default.createElement(u.InlineComponent,null,"ul")," and then each of our routes will be ",l.default.createElement(u.InlineComponent,null,"Link"),"s wrapped in ",l.default.createElement(u.InlineComponent,null,"li"),"s."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/components/NavLinks.vue"),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/NavLinks.vue --\x3e\n<template>\n  <nav>\n    <ul>\n      <li>\n        <curi-link to='Home'>Home</curi-link>\n      </li>\n      <li>\n        <curi-link to='Contact'>Contact Us</curi-link>\n      </li>\n      <li>\n        <curi-link to='Book List'>Books for Sale</curi-link>\n      </li>\n      <li>\n        <curi-link to='Checkout'>Checkout</curi-link>\n      </li>\n    </ul>\n  </nav>\n</template>"),l.default.createElement("p",null,"Let's import and render the ",l.default.createElement(u.InlineComponent,null,"NavLinks")," in our ",l.default.createElement(u.InlineComponent,null,"app"),". We'll also add some wrapper elements to keep our content organized."),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/app.vue --\x3e\n<template>\n  <div>\n    <header>\n      <NavLinks />\n    </header>\n    <main>\n      <component :is=\"$curi.response.body\" />\n    </main>\n  </div>\n</template>\n\n<script>\n  import NavLinks from './NavLinks';\n\n  export default {\n    name: 'app',\n    components: { NavLinks }\n  };\n<\/script>"),l.default.createElement("p",null,"At this point, we can navigate between most of our routes. However, we still need to add navigation to our books.")),l.default.createElement(c.Section,{title:"Navigating to Our Books",id:"param-navigation"},l.default.createElement("p",null,'Our "Book" route is different than all of our other routes because the book path includes an ',l.default.createElement(u.InlineJS,null,"id"),' param. This means that we need to actually have "id" values to pass to our ',l.default.createElement(u.InlineComponent,null,"curi-link"),"s. Later on, we'll generate some better data, but for now we can just generate a placeholder list in a module called ",l.default.createElement(u.InlineJS,null,"books.js"),"."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/books.js"),l.default.createElement(u.PrismBlock,{lang:"jsx"}," // books.js\nconst books = [\n  { id: 0 },\n  { id: 1 },\n  { id: 2 },\n  { id: 3 }\n];\nexport default books;"),l.default.createElement("p",null,"Then, in ",l.default.createElement(u.InlineComponent,null,"BookList")," we can iterate over this list to generate links to our books."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"4-11,15-22"},"\x3c!-- src/components/BookList.vue --\x3e\n<template>\n  <div class='book-list'>\n    <h1>Available Books</h1>\n    <div class='books'>\n      <div v-for=\"book in books\" :key=\"book.id\" class='book-item'>\n        <curi-link to='Book' :params=\"{ id: book.id }\">\n          Book {{book.id}}\n        </curi-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import books from '../books';\n  export default {\n    data: function() {\n      return { books };\n    }\n  };\n<\/script>")),l.default.createElement(c.Section,{title:"Book Props",id:"book-props"},l.default.createElement("p",null,"The ",l.default.createElement(u.InlineComponent,null,"curi-link"),"s above allow us to navigate to our books, but we don't actually have any information about which book we are supposed to be seeing. It would really help if our ",l.default.createElement(u.InlineComponent,null,"Book")," was able to access the parsed params so that it can render the information for the correct book."),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"params")," object is a property of our response object. We can access the response in our components using"," ",l.default.createElement(u.InlineJS,null,"this.$curi.response"),", so we don't actually have to manually pass it as a prop."),l.default.createElement("p",null,"Next, we just need to update our ",l.default.createElement(u.InlineComponent,null,"Book")," component to access the"," ",l.default.createElement(u.InlineJS,null,"params")," object and figure out which book to render content for."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"4"},"\x3c!-- src/components/Book.vue --\x3e\n<template>\n  <div class='book'>\n    Book {{$curi.response.params.id}}\n  </div>\n</template>")),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement("p",null,"After completing this tutorial, we now have a semi-functional website that renders basic content for each of our pages."),l.default.createElement(i.CompleteBranch,{name:"05-loading-data-vue"}),l.default.createElement(d.default,{id:"github/pshrmn/curi-tutorial/tree/05-loading-data-vue"})),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,"At this point, we have a website with a number of pages. It isn't particularly useful yet, but at least we can navigate between pages. Next we will take a step back from Vue and look at how we can implement data loading with with"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"05-loading-data"}},"Part 5: Loading Data"),".")))};t.default=m},66:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 5: Loading Data"),l.default.createElement("p",null,"In the previous tutorial, we wrote mocked book data in ",l.default.createElement(u.InlineJS,null,"books.js")," ",'to have some data to load, but it was just filler. We imported the data as an array, whereas in a "real" website, we would most likely make a request to our server, which would return our data.'),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Writing a fake API to simulate data requests."),l.default.createElement("li",null,"Adding ",l.default.createElement(u.InlineJS,null,"match.every"),' functions to our "Book List" and "Book" routes and updating their ',l.default.createElement(u.InlineJS,null,"match.response")," functions."))),l.default.createElement(i.TutorialBranches,{names:["05-loading-data-react","05-loading-data-vue"]}),l.default.createElement(c.Section,{title:"A Fake API",id:"api"},l.default.createElement("p",null,"There are a number of ways that we might make a request to the server, but in this tutorial we will simulate using the"," ",l.default.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"},"Fetch API"),". The ",l.default.createElement(u.InlineJS,null,"fetch")," function makes a request to the server and returns a Promise that will resolve with the server's response."),l.default.createElement("p",null,"Let's create an ",l.default.createElement(u.InlineJS,null,"api")," directory and start writing our fake fetch functions."),l.default.createElement(u.PrismBlock,{lang:"bash"},"mkdir -p src/api\ntouch src/api/books.js"),l.default.createElement("p",null,"We'll need to write two functions. The first will fetch all of our books (useful for the book list route) and the second will fetch a specific book given an ",l.default.createElement(u.InlineJS,null,"id")," (useful for the book route). Since we are emulating how ",l.default.createElement(u.InlineJS,null,"fetch")," works, both of our functions should return a Promise."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// api/books.js\nexport function fetchAllBooks() {\n  return new Promise((resolve, reject) => {\n\n  });\n}\n\nexport function fetchBook(id) {\n  return new Promise((resolve, reject) => {\n\n  });\n}"),l.default.createElement("p",null,"We need some actual data for our fetch functions to return, so let's write an array of book objects. You can make up your own data or just copy the list from below."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// api/books.js\nconst books = [\n  {\n    id: 0,\n    title: 'Harry Potter and the Deathly Hollows',\n    author: 'J.K. Rowling',\n    published: '2007',\n    pages: 759\n  },\n  {\n    id: 1,\n    title: 'The Name of the Wind',\n    author: 'Patrick Rothfuss',\n    published: '2007',\n    pages: 662\n  },\n  {\n    id: 2,\n    title: \"The Wise Man's Fear\",\n    author: 'Patrick Rothfuss',\n    published: '2011',\n    pages: 994\n  },\n  {\n    id: 3,\n    title: 'The Way of Kings',\n    author: 'Brandon Sanderson',\n    published: '2010',\n    pages: 1007\n  },\n  {\n    id: 4,\n    title: 'A Storm of Swords',\n    author: 'George R.R. Martin',\n    published: '2003',\n    pages: 1177\n  },\n  {\n    id: 5,\n    title: 'Clockwork Princess',\n    author: 'Cassandra Clare',\n    published: '2013',\n    pages: 567\n  },\n  {\n    id: 6,\n    title: 'Words of Radiance',\n    author: 'Brandon Sanderson',\n    published: '2014',\n    pages: 1087\n  },\n  {\n    id: 7,\n    title: 'Collected Fictions',\n    author: 'Jorge Luis Borges',\n    published: '1999',\n    pages: 565\n  },\n  {\n    id: 8,\n    title: 'Heir of Fire',\n    author: 'Sarah J. Maas',\n    published: '2014',\n    pages: 565\n  },\n  {\n    id: 9,\n    title: 'The House of Hades',\n    author: 'Rick Riordan',\n    published: '2013',\n    pages: 597\n  }\n];\n\n// ..."),l.default.createElement("p",null,"With this data, we can now finish our data fetching functions. Our"," ",l.default.createElement(u.InlineJS,null,"fetchAllBooks")," function should just resolve with the books array. ",l.default.createElement(u.InlineJS,null,"fetchBook")," should search the books array for the book with the requested id. If it finds a matching book object, the function should resolve with that book object. If the requested book is not found, it should reject with an error message."),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"6,12-17"},"// api/books.js\nconst books = [...];\n\nexport function fetchAllBooks() {\n  return new Promise((resolve, reject) => {\n    resolve(books);\n  });\n}\n\nexport function fetchBook(id) {\n  return new Promise((resolve, reject) => {\n    const book = books.find(book => book.id === id);\n    if (book) {\n      resolve(book);\n    } else {\n      reject(`Could not find the requested book: ${id}`);\n    }\n  });\n}")),l.default.createElement(c.Section,{title:"Async",id:"async"},l.default.createElement("p",null,"Up until this point, Curi has been acting as a synchronous router. This means that no other code is being run after navigation starts until a new response is ready. However, some of the most interesting uses of Curi are only available when Curi does asynchronous matching."),l.default.createElement("p",null,"How do we make Curi asynchronous? By adding ",l.default.createElement(u.InlineJS,null,"match.initial")," or"," ",l.default.createElement(u.InlineJS,null,"match.every"),"properties to our routes. If even one route has either of these properties, then all routes will be matched asynchronously."),l.default.createElement("p",null,"We will now be adding ",l.default.createElement(u.InlineJS,null,"match.every")," methods to some of the routes, so Curi will now be matching routes asynchronously. First, there is one small change that we have to make to our index file."),l.default.createElement(c.Subsection,{title:"Response Handler",id:"response-handler"},l.default.createElement("p",null,"The problem with being async is that we don't know when the initial response will be ready. What happens if we render before the initial response is ready? We could write our app to know how to handle this, but a better solution is probably to just wait for the initial response. We can do this using a response handler."),l.default.createElement("p",null,"The Curi router object has a method called ",l.default.createElement(u.InlineJS,null,"respond"),". This is used to register observer functions (response handler) that will be called whenever the router creates a new response (either at initialization or after navigation). Most of the time, response handlers are registered for you. However, we will want to run one here ourselves."),l.default.createElement("p",null,"In order to wait for the initial response before rendering, we just need to call any rendering in a response handler, which gets passed to"," ",l.default.createElement(u.InlineJS,null,"router.respond"),"."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// index.js\n\n// React\nrouter.respond(() => {\n  ReactDOM.render(...);\n});\n\n// Vue\nrouter.respond(() => {\n  const vm = new Vue({\n    el: '#root',\n    template: '<app />',\n    components: { app }\n  });\n})")),l.default.createElement(c.Subsection,{title:"match.every",id:"every"},l.default.createElement("p",null,l.default.createElement(u.InlineJS,null,"match.every")," is a function that will be called every time that a route matches. This makes it a great option for data loading. The function will be passed route related props (the ",l.default.createElement(u.InlineJS,null,"params")," ","object, the ",l.default.createElement(u.InlineJS,null,"location"),", and the ",l.default.createElement(u.InlineJS,null,"name")," of the matched route), which it can use to formulate any API calls."),l.default.createElement("p",null,l.default.createElement(u.InlineJS,null,"match.every")," functions are expected to return a Promise. Curi uses ",l.default.createElement(u.InlineJS,null,"Promise.all")," to wait for your"," ",l.default.createElement(u.InlineJS,null,"match.every")," and"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"routes"},details:{hash:"initial"}},l.default.createElement(u.InlineJS,null,"match.initial")," functions")," ","to resolve before it emits a response."),l.default.createElement("p",null,'We have two routes that we need to load data in: "Book List" and "Book". We should add ',l.default.createElement(u.InlineJS,null,"match.every")," functions to each one, calling their respective API functions that we defined above."),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"2,10,19,21"},"// routes.js\nimport { fetchAllBooks, fetchBook } from './api/books';\n\nconst routes = [\n  // ...,\n  {\n    name: 'Book List',\n    path: 'books',\n    match: {\n      every: () => fetchAllBooks(),\n      response: ({ set }) => {\n        set.body(BookList);\n      }\n    },\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        params: { id: n => parseInt(n, 10) },\n        match: {\n          every: ({ params }) => fetchBook(params.id),\n          response: ({ set }) => {\n            set.body(Book);\n          }\n        }\n      }\n    ]\n  }\n  // ...\n];"),l.default.createElement(s.Note,null,'In the above "Book" route, we introduce the ',l.default.createElement(u.InlineJS,null,"route.params")," ","property. This is an object whose keys are path ",l.default.createElement(u.InlineJS,null,"param")," names and whose values are functions that will parse the param string to return a new value. For example, the above function takes the input string and returns that string parsed as an integer.")),l.default.createElement(c.Subsection,{title:"match.response",id:"response"},l.default.createElement("p",null,"We want to attach our loaded data to the response so that we can use it when we render."),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"resolved")," object passed to ",l.default.createElement(u.InlineJS,null,"match.response")," ","contains the values resolved by the route's ",l.default.createElement(u.InlineJS,null,"match.initial")," ","and ",l.default.createElement(u.InlineJS,null,"match.every")," functions. ",l.default.createElement(u.InlineJS,null,"set.data")," will attach the data it is given to the response object. We can combine these two to set the response's ",l.default.createElement(u.InlineJS,null,"data")," to be the data resolved in"," ",l.default.createElement(u.InlineJS,null,"match.every"),"."),l.default.createElement("p",null,"It is also possible that someone might request a book that does not exist, to deal with that, we will use the ",l.default.createElement(u.InlineJS,null,"error")," property and the ",l.default.createElement(u.InlineJS,null,"set.error")," function."),l.default.createElement(s.Note,null,"You can view all of the properties passed to the"," ",l.default.createElement(u.InlineJS,null,"match.response")," function in the"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"routes"},details:{hash:"response"}},"All About Routes")," ","guide."),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"10,12,22,24-28"},"// routes.js\nimport { fetchAllBooks, fetchBook } from './api/books';\nconst routes = [\n  // ...,\n  {\n    name: 'Book List',\n    path: 'books',\n    match: {\n      every: () => fetchAllBooks(),\n      response: ({ resolved, set }) => {\n        set.body(BookList);\n        set.data({ books: resolved.every });\n      }\n    },\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        params: { id: n => parseInt(n, 10) },\n        match: {\n          every: ({ params }) => fetchBook(params.id),\n          response: ({ error, resolved, set }) => {\n            set.body(Book);\n            if (error) {\n              set.error(error);\n            } else {\n              set.data({ book: resolved.every });\n            }\n          }\n        }\n      }\n    ]\n  }\n  // ...\n];"),l.default.createElement(s.Note,null,"If you do not catch errors in your ",l.default.createElement(u.InlineJS,null,"every")," function, you still get the opportunity to deal with them using the ",l.default.createElement(u.InlineJS,null,"error")," ","property passed to ",l.default.createElement(u.InlineJS,null,"match.response"),". However, if you do not handle the error there, you may end up with unexpected errors in your website.")),l.default.createElement("p",null,"Now, when a user visits the ",l.default.createElement(u.InlineJS,null,"/books")," URI, the response generated by Curi will look like this:"),l.default.createElement(u.PrismBlock,{lang:"javascript"},"{\n  name: 'Book List',\n  data: {\n    books: [/*...*/]\n  },\n  // ...\n}"),l.default.createElement("p",null,"Likewise, visiting ",l.default.createElement(u.InlineJS,null,"/books/0")," will generate a response whose"," ",l.default.createElement(u.InlineJS,null,"data")," property is a book object."),l.default.createElement(u.PrismBlock,{lang:"javascript"},"{\n  name: 'Book',\n  params: { id: 0 }\n  data: {\n    book: { title: '...', /*...*/ }\n  },\n  // ...\n}")),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement("p",null,"If you are following the React path:"),l.default.createElement(i.CompleteBranch,{name:"06-render-data-react"}),l.default.createElement("p",null,"If you are following the Vue path:"),l.default.createElement(i.CompleteBranch,{name:"06-render-data-vue"})),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,'Now that we are loading data for our routes, we should modify our "Book List" and "Book" pages to render using this data. Once again, we will break this down for React and Vue users.'),l.default.createElement("p",null,"If you are using React, continue with"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"06-render-data-react"}},"Part 6: Rendering Data with React"),"."),l.default.createElement("p",null,"If you are using Vue, continue with"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"06-render-data-vue"}},"Part 6: Rendering Data with Vue"),".")))};t.default=d},67:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=a(n(53)),m=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 6: Rendering Data with React"),l.default.createElement("p",null,"Now that our responses have ",l.default.createElement(u.InlineJS,null,"data"),", we should update our"," ",l.default.createElement(u.InlineComponent,null,"BookList")," and ",l.default.createElement(u.InlineComponent,null,"Book")," components to use that. Accessing the ",l.default.createElement(u.InlineJS,null,"data")," is really easy because it is a property of our"," ",l.default.createElement(u.InlineJS,null,"response")," object."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Updating our ",l.default.createElement(u.InlineComponent,null,"BookList")," and ",l.default.createElement(u.InlineComponent,null,"Book")," components to render using ",l.default.createElement(u.InlineJS,null,"response.data"),"."))),l.default.createElement(i.TutorialBranch,{name:"06-render-data-react"}),l.default.createElement(c.Section,{title:"Using Data with the Book List",id:"book-list"},l.default.createElement("p",null,"Currently, in our ",l.default.createElement(u.InlineJS,null,"BookList.js")," file, we are importing the books from a file. We can remove that import and instead use the"," ",l.default.createElement(u.InlineJS,null,"response")," prop to access our data. Since we also have better data, we can now use each book's title for the link text."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"8-14"},"// components/BookList.js\nimport React from 'react';\n\nconst BookList = ({ response }) => (\n  <div className='book-list'>\n    <h1>Available Books</h1>\n    <div className='books'>\n      { response.data.books.map(b => (\n        <div key={b.id} className='book-item'>\n          <Link to='Book' params={{ id: b.id }}>\n            {b.title}\n          </Link>\n        </div>\n      )) }\n    </div>\n  </div>\n);"),l.default.createElement(s.Note,null,"If our ",l.default.createElement(u.InlineJS,null,"children")," function (passed to the"," ",l.default.createElement(u.InlineComponent,null,"CuriProvider"),") had just passed the ",l.default.createElement(u.InlineJS,null,"params")," instead of the whole ",l.default.createElement(u.InlineJS,null,"response"),", we would have to modify that function to also pass along the ",l.default.createElement(u.InlineJS,null,"data"),". Since we pass the entire"," ",l.default.createElement(u.InlineJS,null,"response"),", we do not have to worry about updating that function.")),l.default.createElement(c.Section,{title:"Using Data with the Book",id:"book"},l.default.createElement("p",null,"Instead of using ",l.default.createElement(u.InlineJS,null,"response.params"),", we will switch to using"," ",l.default.createElement(u.InlineJS,null,"response.data"),".."),l.default.createElement("p",null,"We also have a special case that we need to consider: what should we do when there is no matching book? In the sample data, we have books with ids that range from 0-9. What if the user navigates to"," ",l.default.createElement(u.InlineJS,null,"/books/123"),"? Our ",l.default.createElement(u.InlineJS,null,"fetchBook")," call will reject and"," ",l.default.createElement(u.InlineJS,null,"response.data")," will be ",l.default.createElement(u.InlineJS,null,"undefined"),". For now, we can just detect when ",l.default.createElement(u.InlineJS,null,"response.data")," is ",l.default.createElement(u.InlineJS,null,"undefined")," and render a simple message stating that the requested book does not exist."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"5-21"},"// components/Book.js\nimport React from 'react';\n\nconst Book = ({ response }) => {\n  const { data } = response;\n  if (!data) {\n    return (\n      <div className='book'>\n        The requested book does not exist\n      </div>\n    );\n  }\n  const { book } = data;\n  return (\n    <div className='book'>\n      <h2>{book.title}</h2>\n      <p>By {book.author}</p>\n      <p>Published in {book.published}</p>\n      <p>This book is {book.pages} pages</p>\n    </div>\n  );\n};")),l.default.createElement("p",null,"Now that we are using ",l.default.createElement(u.InlineJS,null,"response.data")," in both the"," ",l.default.createElement(u.InlineComponent,null,"BookList")," and ",l.default.createElement(u.InlineComponent,null,"Book")," components, we can remove the"," ",l.default.createElement(u.InlineJS,null,"books.js")," file."),l.default.createElement(u.PrismBlock,{lang:"bash"},"git rm src/books.js"),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement("p",null,'Our "Book List" and "Book" pages are now rendered using data from'," ",l.default.createElement(u.InlineJS,null,"response.data"),"."),l.default.createElement(i.CompleteBranch,{name:"07-nav-react"}),l.default.createElement(d.default,{id:"github/pshrmn/curi-tutorial/tree/06-nav-react"})),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,'Our book component still isn\'t complete. We are building a book store after all, so we should really provide the user a way to actually "buy" a book. In'," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"07-nav-react"}},"Part 7: Forms & Navigation"),', we will add the ability to add books to a shopping cart and "purchase" them from our "Checkout" route.')))};t.default=m},68:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=(n(5),n(4)),c=a(n(53)),d=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 6: Rendering Data with Vue"),l.default.createElement("p",null,"Now that our responses have ",l.default.createElement(u.InlineJS,null,"data"),", we should update our"," ",l.default.createElement(u.InlineComponent,null,"BookList")," and ",l.default.createElement(u.InlineComponent,null,"Book")," components to use that. Accessing the ",l.default.createElement(u.InlineJS,null,"data")," is really easy because it is a property of our"," ",l.default.createElement(u.InlineJS,null,"response")," object."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Updating our ",l.default.createElement(u.InlineComponent,null,"BookList")," and ",l.default.createElement(u.InlineComponent,null,"Book")," components to render using ",l.default.createElement(u.InlineJS,null,"response.data"),"."))),l.default.createElement(i.TutorialBranch,{name:"06-render-data-vue"}),l.default.createElement(s.Section,{title:"Using Data with the Book List",id:"book-list"},l.default.createElement("p",null,"Currently, in our ",l.default.createElement(u.InlineJS,null,"BookList.vue")," file, we are importing the books from a file. Now, we can remove that import and instead use the"," ",l.default.createElement(u.InlineJS,null,"response")," to access our data. Since we also have better data, we can now use each book's title for the link text."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"6-14"},"\x3c!-- src/components/BookList.vue --\x3e\n<template>\n  <div class='book-list'>\n    <h1>Available Books</h1>\n    <div class='books'>\n      <div\n        v-for=\"book in $curi.response.data.books\"\n        :key=\"book.id\"\n        class='book-item'\n      >\n        <curi-link to='Book' :params=\"{ id: book.id }\">\n          {{book.title}}\n        </curi-link>\n      </div>\n    </div>\n  </div>\n</template>")),l.default.createElement(s.Section,{title:"Using Data with the Book",id:"book"},l.default.createElement("p",null,"Instead of using ",l.default.createElement(u.InlineJS,null,"response.params"),", we will switch to using"," ",l.default.createElement(u.InlineJS,null,"response.data"),"."),l.default.createElement("p",null,"We also have a special case that we need to consider: what should we do when there is no matching book? In the sample data, we have books with ids that range from 0-9. What if the user navigates to"," ",l.default.createElement(u.InlineJS,null,"/books/123"),"? Our ",l.default.createElement(u.InlineJS,null,"fetchBook")," call will reject and"," ",l.default.createElement(u.InlineJS,null,"response.data")," will be ",l.default.createElement(u.InlineJS,null,"undefined"),". For now, we should detect that and render a simple message stating that the requested book does not exist."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"3-11,14-23"},"\x3c!-- src/components/Book.vue --\x3e\n<template>\n  <div v-if=\"$curi.response.error\" class='book'>\n    {{error}}\n  </div>\n  <div v-else class='book'>\n    <h2>{{book.title}}</h2>\n    <p>By {{book.author}}</p>\n    <p>Published in {{book.published}}</p>\n    <p>This book is {{book.pages}} pages</p>\n  </div>\n</template>\n\n<script>\n  export default {\n    computed: {\n      book: function() {\n        const { response } = this.$curi;\n        return !response.error && response.data.book;\n      }\n    }\n  };\n<\/script>")),l.default.createElement("p",null,"Now that we are using ",l.default.createElement(u.InlineJS,null,"response.data")," in both the"," ",l.default.createElement(u.InlineComponent,null,"BookList")," and ",l.default.createElement(u.InlineComponent,null,"Book")," components, we can remove the"," ",l.default.createElement(u.InlineJS,null,"books.js")," file."),l.default.createElement(u.PrismBlock,{lang:"bash"},"git rm src/books.js"),l.default.createElement(s.Section,{title:"Review",id:"review"},l.default.createElement("p",null,'Our "Book List" and "Book" pages are now rendered using data from'," ",l.default.createElement(u.InlineJS,null,"response.data"),"."),l.default.createElement(i.CompleteBranch,{name:"07-nav-vue"}),l.default.createElement(c.default,{id:"github/pshrmn/curi-tutorial/tree/07-nav-vue"})),l.default.createElement(s.Section,{title:"Next",id:"next"},l.default.createElement("p",null,'Our book component still isn\'t complete. We are building a book store after all, so we should really provide the user a way to actually "buy" a book. In'," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"07-nav-vue"}},"Part 7: Forms & Navigation"),', we will add the ability to add books to a shopping cart and "purchase" them from our "Checkout" route.')))};t.default=d},69:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=a(n(53)),m=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 7: Forms & Programmatic Navigation"),l.default.createElement("p",null,"In this tutorial, we are going to be using another property of our Curi router: ",l.default.createElement(u.InlineJS,null,"history"),". This property is our Hickory history instance. We will use it to perform navigation between pages in our website."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Creating another fake API, this time for getting/setting items in our shopping cart."),l.default.createElement("li",null,'Adding the ability to add books to the shopping cart from the "Book" page.'),l.default.createElement("li",null,'Displaying books in the shopping cart from the "Checkout" page and allowing users to "purchase" their selected books.'),l.default.createElement("li",null,"Performing programmatic navigation to automatically navigate to another location."))),l.default.createElement(i.TutorialBranch,{name:"07-nav-react"}),l.default.createElement(c.Section,{id:"A Little Babel",title:"babel"},l.default.createElement("p",null,"Up until now, we have used stateless functional React components. In this tutorial, we will be using classes (extending"," ",l.default.createElement(u.InlineJS,null,"React.Component"),"). We will be taking advantage of some class properties, so we need to install the class property Babel plugin and add it to our Babel configuration."),l.default.createElement(u.PrismBlock,{lang:"bash"},"npm install --save-dev @babel/plugin-proposal-class-properties"),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// .babelrc.js\nmodule.exports = {\n  // ...,\n  plugins: ['@babel/proposal-class-properties']\n};\n")),l.default.createElement(c.Section,{title:"Another Fake API",id:"API"},l.default.createElement("p",null,"Since we do not have a backend to store the books that a user wants to purchase, we will simulate this using ",l.default.createElement(u.InlineJS,null,"localStorage"),". This will be done by maintaining an object whose keys are book ",l.default.createElement(u.InlineJS,null,"id"),"s and whose values is how many of that book should be purchased."),l.default.createElement("p",null,"Our API should export three methods: the first will get the current state of the shopping cart, the second will update the shopping cart, and the third will reset the shopping cart."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/api/shoppingCart.js"),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// api/shoppingCart.js\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\n// read from localStorage and parse the value\nexport function getCart() {\n  let cart = JSON.parse(localStorage.getItem('cart'));\n  // initialize cart if it doesn't already exist\n  if (cart == null) {\n    cart = {};\n    saveCart(cart);\n  }\n  return Promise.resolve(cart);\n}\n\n// add the book and count to the cart\nexport function updateCart(bookID, count) {\n  return getCart()\n    .then(cart => {\n      cart[bookID] = count;\n      saveCart(cart);\n      return cart;\n    });\n}\n\n// reset the cart to an empty object\nexport function resetCart() {\n  const cart = {};\n  saveCart(cart);\n}"),l.default.createElement(s.Note,null,"We are using ",l.default.createElement(u.InlineJS,null,"localStorage"),", which is synchronous, but our API functions return Promises to simulate having to make these requests to the server."),l.default.createElement("p",null,'We will need to access this API in two places. Our "Book" pages need to use ',l.default.createElement(u.InlineJS,null,"updateCart"),' in order to add books to the shopping cart. The "Checkout" page need to know which books (and how many of each) are currently in the shopping cart. The page should also clear the cart out after a user has "purchased" the book in their shopping cart.')),l.default.createElement(c.Section,{title:"Adding Books to the Shopping Cart",id:"add-books"},l.default.createElement("p",null,'On the "Book" page, users should be able to specify how many copies of a book they want to purchase and add those to their shopping cart. We will do this by adding a new component, ',l.default.createElement(u.InlineComponent,null,"AddToCart"),"."),l.default.createElement("p",null,"We can start by creating a component with renders a ",l.default.createElement(u.InlineComponent,null,"select"),". Users can buy 1-4 copies of a book (an arbitrary restriction), so we need an ",l.default.createElement(u.InlineComponent,null,"option")," for each possible value. We should also add an"," ",l.default.createElement(u.InlineJS,null,"onChange")," handler to update the ",l.default.createElement(u.InlineComponent,null,"select")," when the user changes the value."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/components/AddToCart.js"),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/AddToCart.js\nimport React from 'react';\n\nclass AddToCart extends React.Component {\n  state = { count: 1 }\n\n  updateSelect = (event) => {\n    this.setState({ count: parseInt(event.target.value, 10) })\n  }\n\n  render() {\n    return (\n      <form>\n        <select value={this.state.count} onChange={this.updateSelect}>\n          <option value='1'>1</option>\n          <option value='2'>2</option>\n          <option value='3'>3</option>\n          <option value='4'>4</option>\n        </select>\n      </form>\n    );\n  }\n}\n\nexport default AddToCart;"),l.default.createElement("p",null,'Next, we need to add a button to add the book to the shopping cart. We\'re actually going to add two buttons. The first will just add the book/count to the shopping cart. The second will add the book/count to the shopping cart and then redirect to the "Checkout" page.'),l.default.createElement("p",null,"How will we redirect? So far, all navigation within the website has been performed using ",l.default.createElement(u.InlineComponent,null,"Link"),"s. However, sometimes you might want to navigate programmatically. To do this, we can take advantage of our Hickory history object. The history object has ",l.default.createElement(u.InlineJS,null,"push"),","," ",l.default.createElement(u.InlineJS,null,"replace"),", and ",l.default.createElement(u.InlineJS,null,"update")," methods that we can call to trigger navigation. You can read about each of these in the"," ",l.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/api/Browser.md#methods"},"Hickory documentation"),". For this tutorial, we will be using ",l.default.createElement(u.InlineJS,null,"push"),"."),l.default.createElement("p",null,"In order to access the router from within our component we will use the"," ",l.default.createElement(u.InlineComponent,null,"Curious")," component from ",l.default.createElement(u.InlineJS,null,"@curi/react"),"."," ",l.default.createElement(u.InlineComponent,null,"Curious")," helps you to inject the Curi props (",l.default.createElement(u.InlineJS,null,"router"),","," ",l.default.createElement(u.InlineJS,null,"response"),", and ",l.default.createElement(u.InlineJS,null,"navigation"),") into a component. That means that we can inject our ",l.default.createElement(u.InlineJS,null,"router")," into a component and call"," ",l.default.createElement(u.InlineJS,null,"router.history.push")," to automatically redirect to another page."),l.default.createElement("p",null,"We can also access all of our Curi"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"addons"}},l.default.createElement(u.InlineJS,null,"addons"))," ","from our router, so we will use ",l.default.createElement(u.InlineJS,null,"curi.addons.pathname")," to generate the pathname for the location that we wan to redirect to."),l.default.createElement("p",null,"When the user clicks either of the buttons, we will want to use the"," ",l.default.createElement(u.InlineJS,null,"updateCart")," API method to add the book to the shopping cart. The ",l.default.createElement(u.InlineComponent,null,"AddToCart")," component doesn't inherently know which book it is for, so we will need to pass it the ",l.default.createElement(u.InlineJS,null,"id")," of the book as a prop when we render it."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"3,5,10-12,18-27,38-44,49-53"},"// components/AddToCart.js\nimport React from 'react';\nimport { Curious } from '@curi/react';\n\nimport { updateCart } from '../api/shoppingCart';\n\nclass AddToCart extends React.Component {\n  state = { count: 1 }\n\n  updateSelect = (event) => {\n    this.setState({ count: parseInt(event.target.value, 10) })\n  }\n\n  addToCart = () => {\n    updateCart(this.props.bookID, this.state.count);\n  }\n\n  addAndCheckout = () => {\n    const { router, bookID } = this.props;\n    updateCart(bookID, this.state.count)\n      .then(() => {\n        // generate the pathname for the Checkout route and then\n        // navigate to there automatically\n        const pathname = router.addons.pathname('Checkout');\n        router.history.push({ pathname });\n      });\n  }\n\n  render() {\n    return (\n      <form>\n        <select value={this.state.count} onChange={this.updateSelect}>\n          <option value='1'>1</option>\n          <option value='2'>2</option>\n          <option value='3'>3</option>\n          <option value='4'>4</option>\n        </select>\n        <button type=\"button\" onClick={this.addToCart}>\n          Add To Cart\n        </button>\n        <button type=\"button\" onClick={this.addAndCheckout}>\n          Add To Cart and Checkout\n        </button>\n      </form>\n    );\n  }\n}\n\nexport default props => (\n  <Curious render={({ router }) => (\n    <AddToCart router={router} {...props} />\n  )} />\n);"),l.default.createElement("p",null,"Now, we can modify our ",l.default.createElement(u.InlineComponent,null,"Book")," component to render the"," ",l.default.createElement(u.InlineComponent,null,"AddToCart")," component. Remember that we need to pass it a"," ",l.default.createElement(u.InlineJS,null,"bookID")," prop so that we can know which book to add to the shopping cart."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"4,22"},"// components/Book.js\nimport React from 'react';\n\nimport AddToCart from './AddToCart';\n\nconst Book = (props) => {\n  const { data } = props.response;\n  if (!data) {\n    return (\n      <div className='book'>\n        The requested book does not exist\n      </div>\n    );\n  }\n  const { book } = data;\n  return (\n    <div className='book'>\n      <h2>{book.title}</h2>\n      <p>By {book.author}</p>\n      <p>Published in {book.published}</p>\n      <p>This book is {book.pages} pages</p>\n      <AddToCart bookID={book.id} />\n    </div>\n  );\n};\n\nexport default Book;")),l.default.createElement(c.Section,{title:"The Checkout Page",id:"checkout"},l.default.createElement("p",null,'Now that we can add books to our shopping cart, we also should give the user the ability to buy them. This isn\'t a real store website that we are building, so instead of asking for payment and shipping information, we will just redirect the user once they "purchase" their books.'),l.default.createElement("p",null,"Let's start out in our ",l.default.createElement(u.InlineJS,null,"routes.js"),' file. We want our "Checkout" page to know which books are in the shopping cart. We can use the'," ",l.default.createElement(u.InlineJS,null,"match.every"),' function of the "Checkout" route to load all of the books and our shopping cart. We can merge the two together to create an array of items in the cart.'),l.default.createElement("p",null,'While we\'re at it, we should also add one more route to our website. This will be a "Checkout Complete" route that we redirect to after a user has "purchased" their books.'),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/components/CheckoutComplete.js"),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"2,4,12-17,21-38,41-51"},"// routes.js\nimport CheckoutComplete from './components/CheckoutComplete';\n\nimport { getCart } from './api/shoppingCart';\n\nconst routes = [\n  // ...\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    match: {\n      every: () => {\n        return Promise.all([\n          fetchAllBooks(),\n          getCart()\n        ]);\n      },\n      response: ({ resolved, set }) => {\n        set.body(Checkout)\n\n        /*\n         * We will iterate over all of the items in\n         * our shopping cart and find the matching\n         * book. Then, we combine the book and the\n         * number being purchased into one object.\n         *\n         * We then assign that array of objects as\n         * the \"items\" property of our response's\n         * data object.\n         */\n        const [ books, cart ] = resolved.every;\n        const items = Object.keys(cart).map(key => {\n          const id = parseInt(key, 10);\n          const count = cart[key];\n          const book = books.find(b => b.id === id);\n          return Object.assign({}, book, { count });\n        });\n        set.data({ items });\n      }\n    },\n    children: [\n      {\n        name: 'Checkout Complete',\n        path: 'complete',\n        match: {\n          response: ({ set }) => {\n            set.body(CheckoutComplete);\n          }\n        }\n      }\n    ]\n  },\n  // ...\n];"),l.default.createElement("p",null,"Before we update our ",l.default.createElement(u.InlineComponent,null,"Checkout")," component, let's write the"," ",l.default.createElement(u.InlineComponent,null,"CheckoutComplete")," component. This should just be a simple component thanking the user for their purchase."),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/CheckoutComplete.js\nimport React from 'react';\n\nconst CheckoutComplete = () => (\n  <div className='checkout-complete'>\n    Thanks for your purchase!\n  </div>\n);\n\nexport default CheckoutComplete;"),l.default.createElement("p",null,"We aren't going to get too fancy with displaying the items in our shopping cart. We can just place them all in a ",l.default.createElement(u.InlineComponent,null,"table"),' so that they are neatly organized. Then, we will just need to add a button to "purchase" the books.'),l.default.createElement("p",null,"We will once again be taking advantage of the ",l.default.createElement(u.InlineJS,null,"Curious")," ","component to access our Curi router from within a component."),l.default.createElement(u.PrismBlock,{lang:"jsx"},"// components/Checkout.js\nimport React from 'react';\nimport { Curious } from '@curi/react';\n\nimport { resetCart } from '../api/shoppingCart';\n\nclass Checkout extends React.Component {\n\n  purchase = () => {\n    // when the user \"purchases\" their books, we just\n    // reset the cart and redirect to the \"Checkout Complete\" page\n    resetCart();\n    const { router } = this.props;\n    const pathname = router.addons.pathname('Checkout Complete');\n    router.history.push({ pathname });\n  }\n\n  render() {\n    const { response } = this.props;\n    return (\n      <div className='checkout'>\n        <h1>Checkout</h1>\n        <div>\n          <table>\n            <thead>\n              <tr>\n                <td>Book</td>\n                <td>Quantity</td>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                response.data.items.map(book => (\n                  <tr key={book.id}>\n                    <td>{book.title}</td>\n                    <td>{book.count}</td>\n                  </tr>\n                ))\n              }\n            </tbody>\n          </table>\n          <button type='button' onClick={this.purchase}>\n            Purchase Books\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default props => (\n  <Curious render={({ router }) => (\n    <Checkout router={router} {...props} />\n  )} />\n);"),l.default.createElement("p",null,"One last thing to consider about our ",l.default.createElement(u.InlineComponent,null,"Checkout")," component is what we should display when there are no items in the shopping cart. We can just check our ",l.default.createElement(u.InlineJS,null,"response.data.items")," array and display a message stating that the cart is empty when the list's length is zero."),l.default.createElement(u.PrismBlock,{lang:"jsx","data-line":"6-15"},"// component/Checkout.js\nclass Checkout extends React.Component {\n  // ...\n  render() {\n    const { response } = this.props;\n    if (!response.data.items.length) {\n      return (\n        <div className='checkout'>\n          <h1>Checkout</h1>\n          <div>\n            You have not added any items to your shopping cart!\n          </div>\n        </div>\n      )\n    }\n    // ...\n  }\n}")),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement("p",null,'We can now add books to our shopping cart and "buy" them from the checkout page.'),l.default.createElement(i.CompleteBranch,{name:"08-now-what-react"}),l.default.createElement(d.default,{id:"github/pshrmn/curi-tutorial/tree/08-now-what-react"}),l.default.createElement(s.Note,null,"The embedded sandbox will not work if your browser is blocking third-party data. If this is the case for you, you ",l.default.createElement("em",null,"could")," ",'disable this through your browser\'s settings, but a better solution is to click the "Edit on CodeSandbox" button to view the sandbox there.')),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,"With that, we have considered pretty much everything you need to know to get started building your website with Curi. We have one last part,"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"08-now-what"}},"Part 8: Now What?"),", that gives some suggestions on what you can do with your new knowledge.")))};t.default=m},70:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(59),u=n(2),s=n(5),c=n(4),d=a(n(53)),m=function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 7: Forms & Programmatic Navigation"),l.default.createElement("p",null,"In this tutorial, we are going to be using another property of our Curi router: ",l.default.createElement(u.InlineJS,null,"history"),". This property is the Hickory history instance that we created in Part 3. We will use it to perform navigation between pages in our website."),l.default.createElement(i.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Creating another fake API, this time for getting/setting items in our shopping cart."),l.default.createElement("li",null,'Adding the ability to add books to the shopping cart from the "Book" page.'),l.default.createElement("li",null,'Displaying books in the shopping cart from the "Checkout" page and allowing users to "purchase" their selected books.'),l.default.createElement("li",null,"Performing programmatic navigation to automatically navigate to another location."))),l.default.createElement(i.TutorialBranch,{name:"07-nav-vue"}),l.default.createElement(c.Section,{title:"Another Fake API",id:"API"},l.default.createElement("p",null,"Since we do not have a backend to store the books that a user wants to purchase, we will simulate this using ",l.default.createElement(u.InlineJS,null,"localStorage"),". We will maintain an object whose keys are book ",l.default.createElement(u.InlineJS,null,"id"),"s and whose values are how many of that book should be purchased."),l.default.createElement("p",null,"The API should export three methods: the first will get the current state of the shopping cart, the second will update the shopping cart, and the third will reset the shopping cart."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/api/shoppingCart.js"),l.default.createElement(u.PrismBlock,{lang:"javascript"},"// api/shoppingCart.js\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\n// read from localStorage and parse the value\nexport function getCart() {\n  let cart = JSON.parse(localStorage.getItem('cart'));\n  // initialize cart if it doesn't already exist\n  if (cart == null) {\n    cart = {};\n    saveCart(cart);\n  }\n  return Promise.resolve(cart);\n}\n\n// add the book and count to the cart\nexport function updateCart(bookID, count) {\n  return getCart()\n    .then(cart => {\n      cart[bookID] = count;\n      saveCart(cart);\n      return cart;\n    });\n}\n\n// reset the cart to an empty object\nexport function resetCart() {\n  const cart = {};\n  saveCart(cart);\n}"),l.default.createElement(s.Note,null,"We are using ",l.default.createElement(u.InlineJS,null,"localStorage"),", which is synchronous, but our API functions return Promises to simulate having to make these requests to the server."),l.default.createElement("p",null,'We will need to access this API in two places. Our "Book" pages need to use ',l.default.createElement(u.InlineJS,null,"updateCart"),' in order to add books to the shopping cart. The "Checkout" page need to know which books (and how many of each) are currently in the shopping cart. The page should also clear the cart out after a user has "purchased" the book in their shopping cart.')),l.default.createElement(c.Section,{title:"Adding Books to the Shopping Cart",id:"add-books"},l.default.createElement("p",null,'On the "Book" page, users should be able to specify how many copies of a book they want to purchase and add those to their shopping cart. We will do this by adding a new component, ',l.default.createElement(u.InlineComponent,null,"AddToCart"),"."),l.default.createElement("p",null,"We can start by creating a component with renders a ",l.default.createElement(u.InlineComponent,null,"select"),". Users can buy 1-4 copies of a book (an arbitrary restriction), so we need an ",l.default.createElement(u.InlineComponent,null,"option")," for each possible value."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/components/AddToCart.vue"),l.default.createElement(u.PrismBlock,{lang:"html"},'\x3c!-- src/components/AddToCart.vue --\x3e\n<template>\n  <form>\n    <select v-model="count">\n      <option value="1">1</option>\n      <option value="2">2</option>\n      <option value="3">3</option>\n      <option value="4">4</option>\n    </select>\n  </form>\n</template>\n\n<script>\n  export default {\n    data: function() {\n      return {\n        count: \'1\'\n      };\n    }\n  };\n<\/script>\n'),l.default.createElement("p",null,'Next, we need to add a button to add the book to the shopping cart. We\'re actually going to add two buttons. The first will just add the book/count to the shopping cart. The second will add the book/count to the shopping cart and then redirect to the "Checkout" page.'),l.default.createElement("p",null,"How will we redirect? So far, all navigation within the website has been performed using ",l.default.createElement(u.InlineComponent,null,"curi-link"),"s. However, sometimes you might want to navigate programmatically. To do this, we can take advantage of our Hickory history object. The history object has ",l.default.createElement(u.InlineJS,null,"push"),","," ",l.default.createElement(u.InlineJS,null,"replace"),", and ",l.default.createElement(u.InlineJS,null,"update")," methods that we can call to trigger navigation. You can read about each of these in the"," ",l.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/api/Browser.md#methods"},"Hickory documentation"),". For this tutorial, we will be using ",l.default.createElement(u.InlineJS,null,"push"),"."),l.default.createElement("p",null,"The ",l.default.createElement(u.InlineJS,null,"CuriPlugin")," makes our router available to all of our components as ",l.default.createElement(u.InlineJS,null,"this.$router"),". That means that we can call"," ",l.default.createElement(u.InlineJS,null,"this.$router.history.push")," to automatically redirect to another page."),l.default.createElement("p",null,"We can also access all of our Curi"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"addons"}},l.default.createElement(u.InlineJS,null,"addons"))," ","from our router, so we will use ",l.default.createElement(u.InlineJS,null,"curi.addons.pathname")," to generate the pathname for the location that we wan to redirect to."),l.default.createElement("p",null,"When the user clicks either of the buttons, we will want to use the"," ",l.default.createElement(u.InlineJS,null,"updateCart")," API method to add the book to the shopping cart. The ",l.default.createElement(u.InlineComponent,null,"AddToCart")," component doesn't inherently know which book it is for, so we will need to pass it the ",l.default.createElement(u.InlineJS,null,"id")," of the book as a prop when we render it."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"10-15,20,23,29-40"},'\x3c!-- src/components/AddToCart.vue --\x3e\n<template>\n  <form>\n    <select v-model="count">\n      <option value="1">1</option>\n      <option value="2">2</option>\n      <option value="3">3</option>\n      <option value="4">4</option>\n    </select>\n    <button type="button" v-on:click="addToCart">\n      Add To Cart\n    </button>\n    <button type="button" v-on:click="addAndCheckout">\n      Add To Cart and Checkout\n    </button>\n  </form>\n</template>\n\n<script>\n  import { updateCart } from \'../api/shoppingCart\';\n\n  export default {\n    props: [\'bookID\'],\n    data: function() {\n      return {\n        count: \'1\'\n      };\n    },\n    methods: {\n      addToCart(event) {\n        updateCart(this.bookID, parseInt(this.count));\n      },\n      addAndCheckout(event) {\n        updateCart(this.bookID, parseInt(this.count))\n          .then(() => {\n            const pathname = this.$router.addons.pathname(\'Checkout\');\n            this.$router.history.push({ pathname });\n          });\n      }\n    }\n  };\n<\/script>\n'),l.default.createElement("p",null,"Now, we can modify our ",l.default.createElement(u.InlineComponent,null,"Book")," component to render the"," ",l.default.createElement(u.InlineComponent,null,"AddToCart")," component. Remember that we need to pass it a"," ",l.default.createElement(u.InlineJS,null,"bookID")," prop so that we can know which book to add to the shopping cart."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"11,16,25"},"\x3c!-- src/components/Book.vue --\x3e\n<template>\n  <div v-if=\"$curi.response.error\" class='book'>\n    {{error}}\n  </div>\n  <div v-else class='book'>\n    <h2>{{book.title}}</h2>\n    <p>By {{book.author}}</p>\n    <p>Published in {{book.published}}</p>\n    <p>This book is {{book.pages}} pages</p>\n    <AddToCart :bookID=\"book.id\" />\n  </div>\n</template>\n\n<script>\n  import AddToCart from './AddToCart';\n\n  export default {\n    computed: {\n      book: function() {\n        const { response } = this.$curi;\n        return !response.error && response.data.book;\n      }\n    },\n    components: { AddToCart }\n  };\n<\/script>")),l.default.createElement(c.Section,{title:"The Checkout Page",id:"checkout"},l.default.createElement("p",null,'Now that we can add books to our shopping cart, we also should give the user the ability to buy them. This isn\'t a real store website that we are building, so instead of asking for payment and shipping information, we will just redirect the user once they "purchase" their books.'),l.default.createElement("p",null,"Let's start out in our ",l.default.createElement(u.InlineJS,null,"routes.js"),' file. We want our "Checkout" page to know which books are in the shopping cart. We can use the'," ",l.default.createElement(u.InlineJS,null,"match.every"),' function of the "Checkout" route to load all of the books and our shopping cart. We can merge the two together to create an array of items in the cart.'),l.default.createElement("p",null,'While we\'re at it, we should also add one more route to our website. This will be a "Checkout Complete" route that we redirect to after a user has "purchased" their books.'),l.default.createElement(u.PrismBlock,{lang:"javascript","data-line":"2,4,12-17,21-38,41-51"},"// routes.js\nimport CheckoutComplete from './components/CheckoutComplete';\n\nimport { getCart } from './api/shoppingCart';\n\nconst routes = [\n  // ...\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    match: {\n      every: () => {\n        return Promise.all([\n          fetchAllBooks(),\n          getCart()\n        ])\n      },\n      response: ({ resolved, set }) => {\n        set.body(Checkout);\n\n        /*\n         * We will iterate over all of the items in\n         * our shopping cart and find the matching\n         * book. Then, we combine the book and the\n         * number being purchased into one object.\n         *\n         * We then assign that array of objects as\n         * the \"items\" property of our response's\n         * data object.\n         */\n        const [ books, cart ] = resolved.every;\n        const items = Object.keys(cart).map(key => {\n          const id = parseInt(key, 10);\n          const count = cart[key];\n          const book = books.find(b => b.id === id);\n          return Object.assign({}, book, { count });\n        });\n        set.data({ items });\n      }\n    },\n    children: [\n      {\n        name: 'Checkout Complete',\n        path: 'complete',\n        match: {\n          response: ({ set }) => {\n            set.body(CheckoutComplete);\n          }\n        }\n      }\n    ]\n  },\n  // ...\n];"),l.default.createElement("p",null,"Before we update our ",l.default.createElement(u.InlineComponent,null,"Checkout")," component, let's write the"," ",l.default.createElement(u.InlineComponent,null,"CheckoutComplete")," component. This should just be a simple component thanking the user for their purchase."),l.default.createElement(u.PrismBlock,{lang:"bash"},"touch src/components/CheckoutComplete.vue"),l.default.createElement(u.PrismBlock,{lang:"html"},"\x3c!-- src/components/CheckoutComplete.vue --\x3e\n<template>\n  <div className='checkout-complete'>\n    Thanks for your purchase!\n  </div>\n</template>"),l.default.createElement("p",null,"We aren't going to get too fancy with displaying the items in our shopping cart. We can just place them all in a ",l.default.createElement(u.InlineComponent,null,"table"),' so that they are neatly organized. Then, we will just need to add a button to "purchase" the books.'),l.default.createElement("p",null,"We will once again be taking advantage of ",l.default.createElement(u.InlineJS,null,"this.$curi")," to access our Curi router from within a component."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"4-23,27-41"},'\x3c!-- src/components/Checkout.vue --\x3e\n<template>\n  <div class=\'checkout\'>\n    <h1>Checkout</h1>\n    <div>\n      <table>\n        <thead>\n          <tr>\n            <td>Book</td>\n            <td>Quantity</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for="book in $curi.response.data.items" :key="book.id">\n            <td>{{book.title}}</td>\n            <td>{{book.count}}</td>\n          </tr>\n        </tbody>\n      </table>\n      <button type=\'button\' v-on:click="purchase">\n        Purchase Books\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { resetCart } from \'../api/shoppingCart\';\n\n  export default {\n    methods: {\n      purchase: function(event) {\n        // when the user "purchases" their books, we just\n        // reset the cart and redirect to the "Checkout Complete" page\n        resetCart();\n        const pathname = this.$router.addons.pathname(\'Checkout Complete\');\n        this.$router.history.push({ pathname });\n      }\n    }\n  };\n<\/script>'),l.default.createElement("p",null,"One last thing to consider about our ",l.default.createElement(u.InlineComponent,null,"Checkout")," component is what we should display when there are no items in the shopping cart. We can just check our ",l.default.createElement(u.InlineJS,null,"response.data.items")," array and display a message stating that the cart is empty when the list's length is zero."),l.default.createElement(u.PrismBlock,{lang:"html","data-line":"24-26"},'\x3c!-- src/component/Checkout.vue --\x3e\n<template>\n  <div class=\'checkout\'>\n    <h1>Checkout</h1>\n    <div v-if="$curi.response.data.items.length">\n      <table>\n        <thead>\n          <tr>\n            <td>Book</td>\n            <td>Quantity</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for="book in response.data.items" :key="book.id">\n            <td>{{book.title}}</td>\n            <td>{{book.count}}</td>\n          </tr>\n        </tbody>\n      </table>\n      <button type=\'button\' v-on:click="purchase">\n        Purchase Books\n      </button>\n    </div>\n    <div v-else>\n      You have not added any items to your shopping cart!\n    </div>\n  </div>\n</template>')),l.default.createElement(c.Section,{title:"Review",id:"review"},l.default.createElement("p",null,'We can now add books to our shopping cart and "buy" them from the checkout page.'),l.default.createElement(i.CompleteBranch,{name:"08-now-what-vue"}),l.default.createElement(d.default,{id:"github/pshrmn/curi-tutorial/tree/08-now-what-vue"}),l.default.createElement(s.Note,null,"The embedded sandbox will not work if your browser is blocking third-party data. If this is the case for you, you ",l.default.createElement("em",null,"could")," ",'disable this through your browser\'s settings, but a better solution is to click the "Edit on CodeSandbox" button to view the sandbox there.')),l.default.createElement(c.Section,{title:"Next",id:"next"},l.default.createElement("p",null,"With that, we have considered pretty much everything you need to know to get started building your website with Curi. We have one last part,"," ",l.default.createElement(o.Link,{to:"Tutorial",params:{name:"08-now-what"}},"Part 8: Now What?"),", that gives some suggestions on what you can do with your new knowledge.")))};t.default=m},71:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),r=a(n(56)),i=n(2),u=(n(5),n(4),function(){return l.default.createElement(r.default,null,l.default.createElement("h1",null,"Part 8: Now What?"),l.default.createElement("p",null,"This is the end. You have completed all of the parts of the tutorial and have built a website powered by Curi. It isn't a complete site, but it works, and hopefully you learned a lot while we built it."),l.default.createElement("p",null,"Thanks for following along! If you have any questions or comments, you can reach out to me on Twitter"," ",l.default.createElement("a",{href:"https://twitter.com/pshrmn"},"@pshrmn"),". Any feedback is appreciated!"),l.default.createElement("p",null,"Now, you may be wondering what else to do. My first suggestion would be to build your own website! The tutorial went through everything you need to know to get started building a site with Curi, so why not build your own?"),l.default.createElement("p",null,"If you are looking to learn/build more, you can also try some of the suggestions listed below."),l.default.createElement("ol",null,l.default.createElement("li",null,'The current home page is quite boring. You could add a "featured" book to it using the "Home" route\'s ',l.default.createElement(i.InlineJS,null,"match.response")," function to attach a random book to the response."),l.default.createElement("li",null,"Similar to the previous suggestion, the contact page could use some work as well. Perhaps you could add some child routes for different methods of contact."),l.default.createElement("li",null,"You can try using a Curi"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"side-effects"}},"side effect")," ","with the website. You could use"," ",l.default.createElement(o.Link,{to:"Package",params:{package:"side-effect-title"}},l.default.createElement(i.InlineJS,null,"@curi/side-effect-title"))," ","and the ",l.default.createElement(i.InlineJS,null,"route.title")," property to update the title whenever you navigate."),l.default.createElement("li",null,"If you're concerned about the bundle size, you could check out the"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"code-splitting"}},"code splitting guide")," ","and break up the bundle using ",l.default.createElement(i.InlineJS,null,"route.match.initial"),"."),l.default.createElement("li",null,"While we used ",l.default.createElement(i.InlineJS,null,"response.data")," to pass data to our components, you might prefer a global store like Redux or Vuex. You could rewrite the application to use these, ",l.default.createElement(i.InlineJS,null,"response.data")," is a convenience, not a requirement. You can even continue to use"," ",l.default.createElement(i.InlineJS,null,"match.response")," with a global store. Instead of calling"," ",l.default.createElement(i.InlineJS,null,"set.data"),", you could just dispatch the data to your store. You can check out the"," ",l.default.createElement(o.Link,{to:"Example",params:{category:"react",slug:"redux"}},"Redux example")," ","to see how this might be implemented."),l.default.createElement("li",null,"You can explore the other response methods available in"," ",l.default.createElement(i.InlineJS,null,"match.response"),". For example, you could use the"," ",l.default.createElement(i.InlineJS,null,"redirect"),' function to automatically redirect when the user attempt to navigate to a "Book" page that doesn\'t exist (e.g. there is no book whose ',l.default.createElement(i.InlineJS,null,"id")," equals ",l.default.createElement(i.InlineJS,null,"params.id"),")."),l.default.createElement("li",null,'We only had ten books in our data, but what if there were hundreds? You could implement pagination on the "Book List" page. Query params could be included in the location to only display certain books. If you\'re feeling adventurous, you could pass a'," ",l.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/api/Browser.md#options"},l.default.createElement(i.InlineJS,null,"query")," object")," ","to your history object to use query objects instead of strings."),l.default.createElement("li",null,"You can read through the"," ",l.default.createElement(o.Link,{to:"Guide",params:{slug:"getting-started"}},"guides"),", browse the ",l.default.createElement(o.Link,{to:"Examples"},"examples"),", and check out the available Curi ",l.default.createElement(o.Link,{to:"Packages"},"packages"),". This tutorial covered what you need to know to get started, but there is plenty more you can dive into for advanced usage.")))});t.default=u},72:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=a(n(56)),r=n(59),i=n(2),u=(n(5),n(4)),s=function(){return l.default.createElement(o.default,null,l.default.createElement("h1",null,"React Basics Tutorial"),l.default.createElement(r.Outline,null,l.default.createElement("ul",null,l.default.createElement("li",null,"Learn how to setup routing with Curi."),l.default.createElement("li",null,"Learn how to render React components based on the current location."),l.default.createElement("li",null,"Learn how to navigate within the application."))),l.default.createElement(u.Section,{title:"Setup",id:"setup"},l.default.createElement("p",null,"We will be using ",l.default.createElement("a",{href:"https://github.com/facebook/create-react-app"},l.default.createElement(i.InlineJS,null,"create-react-app"))," to develop this website. If you prefer to avoid all setup, you can also follow along using ",l.default.createElement("a",{href:"https://codesandbox.io/"},"CodeSandbox"),"."),l.default.createElement(i.PrismBlock,{lang:"bash"},"npx create-react-app curi-bookstore\ncd curi-bookstore")))};t.default=s}});