webpackJsonp([2],{53:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(64),i=a(r);t.default=function(e){var t=e.params,n=i.default[t.name];return n?o.default.createElement(n,null):o.default.createElement("div",null,"The requested tutorial could not be found.")}},57:function(e,t,n){"use strict";function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.Subsection=t.Section=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(1),u=function(e){var t=e.title,n=e.id,a=e.children,l=e.tag,o=e.type,u=void 0===o?"section":o;return r.default.createElement("div",{className:u},r.default.createElement(l,{id:n},t,r.default.createElement(i.Link,{className:"header-link",details:{hash:n}},"#")),a)},s=function(e){var t=e.tag,n=void 0===t?"h2":t,o=a(e,["tag"]);return r.default.createElement(u,l({type:"section",tag:n},o))};t.Section=s;var c=function(e){var t=e.tag,n=void 0===t?"h3":t,o=a(e,["tag"]);return r.default.createElement(u,l({type:"subsection",tag:n},o))};t.Subsection=c},59:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(66),i=a(r);t.default=function(e){var t=e.children;return o.default.createElement("div",{className:"tutorial"},o.default.createElement("div",{className:"content"},t||null),o.default.createElement("div",{className:"sidebar"},o.default.createElement("h2",null,"Tutorials"),o.default.createElement(i.default,null)))}},64:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(65),o=a(l),r=n(67),i=a(r),u=n(68),s=a(u),c=n(69),d=a(c),m=n(70),h=a(m),p=n(71),f=a(p),b=n(72),g=a(b),k=n(73),E=a(k),w=n(74),y=a(w),v=n(75),I=a(v),S=n(76),C=a(S),J=n(77),j=a(J),B=n(78),P=a(B);t.default={"01-introduction":o.default,"02-setup":i.default,"03-routes":s.default,"04-hickory":d.default,"05-config":h.default,"06-pages-react":f.default,"06-pages-vue":g.default,"07-load":E.default,"08-render-data-react":y.default,"08-render-data-vue":I.default,"09-nav-react":C.default,"09-nav-vue":j.default,"10-now-what":P.default}},65:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57),m=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 1: Introduction to Curi"),o.default.createElement("p",null,'In this set of tutorials, we will be building a single page application from scratch using Curi. The application will be a website for a book store. Users will be able to browse through books and "purchase" ones that they want.'),o.default.createElement(c.Note,null,'We will only be building the front end. Any time that we would need to add back end code for a "real" website, we will just simulate this with a fake API.'),o.default.createElement(d.Section,{title:"What is Curi?",id:"what"},o.default.createElement("p",null,"Before we get started, let's quickly define what Curi ",o.default.createElement("em",null,"is")," and ",o.default.createElement("em",null,"is not"),"."),o.default.createElement("ol",null,o.default.createElement("li",null,"Curi is an asynchronous single page application router.",o.default.createElement("ol",{style:{listStyleType:"upper-roman"}},o.default.createElement("li",null,"Being a single page application router means that with Curi, you can navigate to pages within your application without sending requests to the server."),o.default.createElement("li",null,"Being asynchronous means that you can load data (and code) prior to rendering a new page instead of rendering loading screens while you wait for data to be fetched."))),o.default.createElement("li",null,"Curi is response based. Whenever navigation happens, Curi will create a new response object by matching itsroutes to the new location. The response will then be emitted so that the application can re-render using the new response."),o.default.createElement("li",null,"Curi is not framework specific. It does not matter to Curi how you render your application; Curi is only concerned with navigation and route matching. That said, there are a couple official framework specific packages (e.g. ",o.default.createElement(s.InlineJS,null,"@curi/react")," ","and ",o.default.createElement(s.InlineJS,null,"@curi/vue"),") that provide integration with Curi, but these are not required for you to be able to use Curi."))),o.default.createElement(d.Section,{title:"Prerequisites",id:"prereqs"},o.default.createElement("p",null,"These tutorials aim to be quite easy to pick up without a lot of prior knowledge required. However, there are a couple things you should keep in mind."),o.default.createElement("ol",null,o.default.createElement("li",null,"You should be familiar with JavaScript. We will be using ES6+ syntax (module ",o.default.createElement(s.InlineJS,null,"import"),"/",o.default.createElement(s.InlineJS,null,"export"),", arrow functions, Promises, etc.). You don't have to be a JavaScript master, but it still helps to be familiar with ES6."),o.default.createElement("li",null,"If you plan to follow along locally, you need to have Node/NPM installed."),o.default.createElement("li",null,"Again, if you plan to follow along locally, you should be comfortable with basic terminal (command line) usage. Nothing crazy, just commands like ",o.default.createElement(s.InlineJS,null,"cd"),", ",o.default.createElement(s.InlineJS,null,"touch"),", ",o.default.createElement(s.InlineJS,null,"mkdir")," and running"," ",o.default.createElement(s.InlineJS,null,"npm")," commands."),o.default.createElement("li",null,"You should be familiar with either React or Vue. These aren't the only frameworks that you can use with Curi, but they ",o.default.createElement("em",null,"are")," the only ones that this tutorial is (currently) written for."))),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"Let's dive in to the tutorials with"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"02-setup"}},"Part 2: Setting up Curi"),".")))};t.default=m},66:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(7),u=a(i),s=n(13),c=a(s),d=function(e){var t=e.tutorial;return o.default.createElement("li",{key:t.name,className:"solo"},o.default.createElement(r.Link,{to:"Tutorial",params:{name:t.name},active:{merge:u.default}},t.displayName))},m=function(e){var t=e.tutorial;return o.default.createElement("li",{key:t.name,className:"solo"},o.default.createElement("p",null,t.displayName),o.default.createElement("ul",{className:"frameworks"},t.frameworks.map(function(e){return o.default.createElement("li",{key:e},o.default.createElement(r.Link,{to:"Tutorial",params:{name:t.name+"-"+e},active:{merge:u.default}},e))})))};t.default=function(){return o.default.createElement("ul",{className:"link-list"},c.default.map(function(e){var t=e.frameworks?m:d;return o.default.createElement(t,{key:e.name,tutorial:e})}))}},67:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 2: Setting up Curi"),o.default.createElement("p",null,"Setup is never exciting, but a little bit of it is necessary."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Initializing our project and installing the packages (from NPM) that are necessary to get started."),o.default.createElement("li",null,"Creating directories for our source and public files, as well as adding some empty files for future use."),o.default.createElement("li",null,"Setting up a simple Express server to serve our website contents.")),o.default.createElement(c.Note,null,"We aren't going to cover getting build steps setup. The accompanying Git repo includes the necessary files for building the application (using Babel and Webpack).")),o.default.createElement(d.Section,{title:"The Basics",id:"basics"},o.default.createElement("p",null,"In the terminal, navigate to the parent directory where you want to keep the code for your website and create a new directory for the website. We can then navigate into our new directory."),o.default.createElement(s.PrismBlock,{lang:"bash"},"mkdir curi-bookstore\ncd curi-bookstore"),o.default.createElement("p",null,"Inside of the directory, run ",o.default.createElement(s.InlineJS,null,"npm init")," to generate a"," ",o.default.createElement(s.InlineJS,null,"package.json")," file. Then, we can install the most important package for Curi: ",o.default.createElement(s.InlineJS,null,"@curi/core"),". We should also install"," ",o.default.createElement(s.InlineJS,null,"@hickory/browser"),", which we'll cover later on."),o.default.createElement(s.PrismBlock,{lang:"bash"},"npm init\nnpm install @curi/core @hickory/browser")),o.default.createElement(d.Section,{title:"File Structure",id:"structure"},o.default.createElement("p",null,"We should also get some of the directories/files for our website setup. You can restructure your application however you want, but the approach used in this project can serve as a good starting point."),o.default.createElement(s.PrismBlock,{lang:"bash"},"mkdir src\ntouch src/index.js src/routes.js\nmkdir -p public/js\ntouch public/index.html"),o.default.createElement("p",null,"The above commands will leave us with the following project structure:"),o.default.createElement(s.PrismBlock,null,"curi-bookstore/\n+- src/\n|  +- index.js\n|  +- routes.js\n+- public/\n|  +- index.html\n|  +- js/\n+- package.json")),o.default.createElement(d.Section,{title:"A Simple Server",id:"server"},o.default.createElement("p",null,"Our website needs a server that can respond to dynamic requests. For this, we will use ",o.default.createElement("a",{href:"https://www.npmjs.com/package/express"},"express"),"."),o.default.createElement(s.PrismBlock,{lang:"bash"},"npm install --save-dev express\ntouch server.js"),o.default.createElement("p",null,"Our server isn't very fancy. For static file requests, it serves files from the ",o.default.createElement(s.InlineJS,null,"/public")," directory. For everything else, it will serve the ",o.default.createElement(s.InlineJS,null,"/public/index.html")," file. You can just copy the following code into ",o.default.createElement(s.InlineJS,null,"server.js"),"."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"const express = require('express');\nconst path = require('path');\n\nconst STATIC_DIR = path.join(__dirname, 'public');\nconst INDEX_HTML = path.join(STATIC_DIR, 'index.html');\n\nconst app = express();\n\n// respond to requests for files that begin with /static\n// with the corresponding file in the /public directory\napp.use('/static', express.static(STATIC_DIR));\n\n// all other requests will respond with the index.html file\napp.get('*', (req, res) => {\n  res.sendFile(INDEX_HTML);\n});\n\napp.listen('8000', () => {\n  console.log('Server started. Listening on port 8000');\n});"),o.default.createElement("p",null,"To run the server, you just need to run ",o.default.createElement(s.InlineJS,null,"node server.js"),"."),o.default.createElement("p",null,"Our ",o.default.createElement(s.InlineJS,null,"index.html")," file is a simple HTML file with with a ",o.default.createElement(s.InlineComponent,null,"script")," that loads our bundled application. You can copy the code below into your ",o.default.createElement(s.InlineJS,null,"public/index.html")," file."),o.default.createElement(s.PrismBlock,{lang:"html"},'<!doctype html>\n<html>\n  <head>\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n  </head>\n  <body>\n    <div id="root"></div>\n    <script src="/static/js/bundle.js"><\/script>\n  </body>\n</html>')),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"With our project setup, we are now ready to continue the tutorial with"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"03-routes"}},"Part 3: Routes"),".")))}},68:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 3: Curi Routes"),o.default.createElement("p",null,"Now that we have our project setup, it is time to start thinking about the route structure of our website."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Deciding what pages our website will contain."),o.default.createElement("li",null,"Learning about basic route properties."),o.default.createElement("li",null,"Creating route objects for each of our website's pages."))),o.default.createElement(d.Section,{title:"Pages",id:"pages"},o.default.createElement("p",null,"We should start by identifying the pages that we want to have in our website. This can always be modified later, but it is a good idea to know what pages you are going to need to create."),o.default.createElement("p",null,"For this website, we will be creating the following pages:"),o.default.createElement("ol",null,o.default.createElement("li",null,"Home - the landing page for the website"),o.default.createElement("li",null,"Contact - a listing of how to contact the site's creators"),o.default.createElement("li",null,"Book list - a list of all of the books available for purchase"),o.default.createElement("li",null,"Book - a page for each book"),o.default.createElement("li",null,'Checkout - a page to "buy" books that have been added to the shopping cart')),o.default.createElement("p",null,"Additionally, we should have a 404 page that is displayed when the user visits a location that has no matching route."),o.default.createElement("p",null,"Each page in our website must have a pathname associated with it. These may either be static (literal) or dynamic (include parts that change, like IDs)."),o.default.createElement("ol",null,o.default.createElement("li",null,"Home - ",o.default.createElement(s.InlineJS,null,"/")),o.default.createElement("li",null,"Contact - ",o.default.createElement(s.InlineJS,null,"/contact")),o.default.createElement("li",null,"Book list - ",o.default.createElement(s.InlineJS,null,"/books")),o.default.createElement("li",null,"Book - ",o.default.createElement(s.InlineJS,null,"/books/<book id>")," e.g. ",o.default.createElement(s.InlineJS,null,"/books/2468")),o.default.createElement("li",null,"Checkout - ",o.default.createElement(s.InlineJS,null,"/checkout")))),o.default.createElement(d.Section,{title:"Routes",id:"routes"},o.default.createElement("p",null,"At their core, routes are a way to describe the valid pathnames for our website. With Curi, routes are simply JavaScript objects with some known properties. The two most important properties of a route object are ",o.default.createElement(s.InlineJS,null,"name")," and"," ",o.default.createElement(s.InlineJS,null,"path"),". The ",o.default.createElement(s.InlineJS,null,"name")," is a ",o.default.createElement("strong",null,"unique")," string that you will use to identify a particular route. The ",o.default.createElement(s.InlineJS,null,"path")," is a"," ",o.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp"},o.default.createElement(s.InlineJS,null,"path-to-regexp"))," ","formatted string."),o.default.createElement(c.Note,null,o.default.createElement(s.InlineJS,null,"path-to-regexp")," provides pathname matching. You give it a path string (possibly with special formatting) and it returns a regular expression that can be used for matching routes. The regular expression matching will be handled internally by Curi, so you only have to care about formatting path strings. Further along in this tutorial, we will cover the basics of how to do this. However, for advanced usage, you should check out the documention in the"," ",o.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp"},o.default.createElement(s.InlineJS,null,"path-to-regexp"))," GitHub repo."),o.default.createElement("p",null,"All of the base routes of our application should be placed in an array. Nested routes will be defined using a property of their parent route."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"const routes = [];"),o.default.createElement("p",null,"The first route that we will define is for our homepage. We can name it anything we want, but we'll just call it \"Home\". For the home page's ",o.default.createElement(s.InlineJS,null,"path"),", we will use an empty string (",o.default.createElement(s.InlineJS,null,"''"),")."),o.default.createElement("p",null,'Up above, we said that the pathname for our "Home" route is'," ",o.default.createElement(s.InlineJS,null,"/"),". However, with Curi, ",o.default.createElement(s.InlineJS,null,"path")," strings never begin with a forward slash. For all of the pathnames for pages that are listed above, we just need to strip off the leading slash."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"const routes = [\n  { name: 'Home', path: '' }\n];"),o.default.createElement("p",null,'That is simple enough, yes? Let\'s go ahead and add our "Contact" and "Checkout" routes. They should look just like our "Home" route.'),o.default.createElement(s.PrismBlock,{lang:"javascript"},"const routes = [\n  { name: 'Home', path: '' },\n  { name: 'Contact', path: 'contact' },\n  { name: 'Checkout', path: 'checkout' }\n];"),o.default.createElement("p",null,"Now, if a user visits ",o.default.createElement(s.InlineJS,null,"https://<our website domain>/checkout"),", our checkout page will match (and likewise for ",o.default.createElement(s.InlineJS,null,"/contact")," ","and our contact page)."),o.default.createElement("p",null,"We still have more routes to define, but there are two concepts to introduce first: path params and the ",o.default.createElement(s.InlineJS,null,"children")," property of route objects."),o.default.createElement(d.Subsection,{title:"Path Params",id:"path-params",type:"aside"},o.default.createElement("p",null,"With ",o.default.createElement(s.InlineJS,null,"path-to-regexp"),", when you create a path string, it is normally interpreted literally. That means that the the path"," ",o.default.createElement(s.InlineJS,null,"'products/hat'")," will only match the location whose pathname is ",o.default.createElement(s.InlineJS,null,"/products/hat"),". What if we also have a shirt? And socks? And shorts? Do you want to define a path for each individual product? Of course not. Instead, ",o.default.createElement(s.InlineJS,null,"path-to-regexp"),' allows us to define dynamic parts of pathnames using "params".'),o.default.createElement("p",null,"What is a param? It is a way to tell ",o.default.createElement(s.InlineJS,null,"path-to-regexp")," to capture part of the pathname at a particular point and store its value using the param's name. The param starts with a colon and then specifies the param's name."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{ path: 'product/:name' }"),o.default.createElement("p",null,"Using the above path, we will capture the portion of the pathname that comes after ",o.default.createElement(s.InlineJS,null,"product/"),' and store it in an object using the key "name". When you visit ',o.default.createElement(s.InlineJS,null,"'/products/hat'"),","," ",o.default.createElement(s.InlineJS,null,"path-to-regexp")," will match and return the params object"," ",o.default.createElement(s.InlineJS,null,"{ name: 'hat' }"),". Likewise, ",o.default.createElement(s.InlineJS,null,"'/products/shirt'")," ","and ",o.default.createElement(s.InlineJS,null,"'/products/shorts'"),' will capture "shirt" and "shorts" as the name param.'),o.default.createElement("p",null,"By default, a param will match all characters up until the next forward slash or the end of the string. You can also perform more specific matching, but that is outside of the scope of this tutorial.")),o.default.createElement(d.Subsection,{title:"Route Children",id:"children",type:"aside"},o.default.createElement("p",null,"Sometimes, you will have routes whose ",o.default.createElement(s.InlineJS,null,"path")," extends the path of another route. For example, you might have a route whose path is ",o.default.createElement(s.InlineJS,null,"'parent'")," and a child route with the path"," ",o.default.createElement(s.InlineJS,null,"'parent/child'"),"."),o.default.createElement("p",null,"Using the ",o.default.createElement(s.InlineJS,null,"children")," property of route objects, you can attach an array of child routes to a parent route. The ",o.default.createElement(s.InlineJS,null,"path")," ","of each child route will extend the parent route's ",o.default.createElement(s.InlineJS,null,"path"),". That means that using the parent/child paths from above, we can define the parent route to have the path ",o.default.createElement(s.InlineJS,null,"'parent'")," and a child route whose path is ",o.default.createElement(s.InlineJS,null,"'child'"),". Curi will treat that child route as if its path is ",o.default.createElement(s.InlineJS,null,"'parent/child'"),"."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{\n  name: 'Parent',\n  path: 'parent',\n  children: [\n    {\n      name: 'Child',\n      path: 'child' // will match the pathname /parent/child\n    }\n  ]\n}")),o.default.createElement("p",null,"Now, we can go ahead and use path params and route children to define our book list/book routes."),o.default.createElement("p",null,"For this tutorial, we will identify books from a pathname using their ",o.default.createElement(s.InlineJS,null,"id"),'. We can name this anything we want, but "id" is simple and to the point.'),o.default.createElement(s.PrismBlock,{lang:"javascript"},"const routes = [\n  { name: 'Home', path: '' },\n  { name: 'Contact', path: 'contact' },\n  { name: 'Checkout', path: 'checkout' },\n  {\n    name: 'Book List',\n    path: 'books',\n    children: [\n      {\n        name: 'Book',\n        path: ':id'\n      }\n    ]\n  }\n];"),o.default.createElement(d.Subsection,{title:"Wildcard Routes",id:"wildcard"},o.default.createElement("p",null,"We have one last \"route\" to define. This isn't really a route, just a catch all that we can use to identify locations that we don't have a route defined for. ",o.default.createElement(s.InlineJS,null,"path-to-regexp")," allows us to capture everything using the path string ",o.default.createElement(s.InlineJS,null,"(.*)"),"."),o.default.createElement(c.Note,null,o.default.createElement(s.InlineJS,null,"(.*)")," uses another of the special ",o.default.createElement(s.InlineJS,null,"path-to-regexp")," ","formats. If you provide a regular expression within parentheses,"," ",o.default.createElement(s.InlineJS,null,"path-to-regexp")," will only match content that is matched by the regular expression. This can also be paired with a named path param (e.g. ",o.default.createElement(s.InlineJS,null,":id(\\d{4})"),"), but is not necessary."),o.default.createElement("p",null,"Since the regular expression ",o.default.createElement(s.InlineJS,null,".*")," ","matches everything, we can use this to match all possible pathnames that someone using the website might navigate to."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"const routes = [\n  { name: 'Home', path: '' },\n  { name: 'Contact', path: 'contact' },\n  { name: 'Checkout', path: 'checkout' },\n  {\n    name: 'Book List',\n    path: 'books',\n    children: [\n      {\n        name: 'Book',\n        path: ':id'\n      }\n    ]\n  },\n  {\n    name: 'Not Found',\n    path: '(.*)'\n  }\n];\n// don't forget to export the routes\nexport default routes;")),o.default.createElement(d.Subsection,{title:"Route Order",id:"order"},o.default.createElement("p",null,"One last thing to note about routes is that their order in the routes array is important. Curi will iterate over them in (depth-first) order. This means that with the above config, Curi will first check if ",o.default.createElement(s.InlineJS,null,"''")," matches the pathname, if it does not, it will move on to ",o.default.createElement(s.InlineJS,null,"'contact'"),', so on and so forth. If no other routes match, then we know that our "Not Found" route will.'),o.default.createElement("p",null,"Curi will only attempt to match children routes if their parent route (partially) matches the location's pathname. That means that when the pathname is ",o.default.createElement(s.InlineJS,null,"'/somewhere'"),', because our "Book List" route does not match, Curi will not attempt to match our "Book" route.'))),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"Now that our routes are defined, it is time to talk about history in "," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"04-hickory"}},"Part 4: Hickory"))))}},69:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=(n(12),n(57));t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 4: Hickory"),o.default.createElement("p",null,"One thing that all modern JavaScript routers have in common is that they use the"," ",o.default.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/History_API"},"History API")," to perform in-app navigation. Curi uses a package called"," ",o.default.createElement("a",{href:"https://github.com/pshrmn/hickory"},"Hickory"),", which will interact with the History API for us."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Learning about the Hickory package and location objects."),o.default.createElement("li",null,"Creating the Hickory history object for our website."))),o.default.createElement(c.Section,{title:"About Hickory",id:"about"},o.default.createElement("p",null,'Hickory creates "history" objects that allow you to navigate between locations within your application. It interacts with the browser for you so that when you navigate to a new location, the URI in the address bar is also updated. Hickory also detects and updates when you use the browser\'s forward and back buttons.'),o.default.createElement("p",null,"Hickory uses a subscriber model so that whenever navigation to a new location happens, a subscribed method will be called. Curi will subscribe to your history object to create new responses whenever the location changes.")),o.default.createElement(c.Section,{title:"Choose your own Hickory",id:"choose"},o.default.createElement("p",null,"Hickory is split into three packages: ",o.default.createElement(s.InlineJS,null,"@hickory/browser"),","," ",o.default.createElement(s.InlineJS,null,"@hickory/hash"),", and ",o.default.createElement(s.InlineJS,null,"@hickory/in-memory"),". You can read about the differences between them and figure out which is right for you in this"," ",o.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/about/choosing.md"},"Choosing Your History Type")," guide."),o.default.createElement("p",null,"We will be using the browser history (",o.default.createElement(s.InlineJS,null,"@hickory/browser"),"). This is because 1. our application will run in the browser and 2. our site is backed by a server that can handle dynamic requests.")),o.default.createElement(c.Section,{title:"Installation",id:"installation"},o.default.createElement("p",null,"If you have following along with these tutorials since the"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"02-setup"}},"setup tutorial"),", then you should already have the ",o.default.createElement(s.InlineJS,null,"@hickory/browser")," package installed. If not, you should install it now."),o.default.createElement(s.PrismBlock,{lang:"bash"},"npm install @hickory/browser")),o.default.createElement(c.Section,{title:"Making History",id:"making-history"},o.default.createElement("p",null,"In order to use Hickory in our application, we just need to import it and call the imported function. There are a number of configuration options that you can provide, but we don't need any of those right now. If you want to learn more about those, please check out the"," ",o.default.createElement("a",{href:"https://github.com/pshrmn/hickory/tree/master/docs"},"Hickory documentation"),"."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"import Browser from '@hickory/browser';\nconst history = Browser();")),o.default.createElement(c.Section,{title:"Location",id:"hickory-location",type:"aside"},o.default.createElement("p",null,"Hickory (and Curi in turn) use location objects for navigation and route matching. These are simply JavaScript objects with a few properties to identify a location."),o.default.createElement("p",null,"When you load a page, Hickory will parse the URI to generate a location's"," ",o.default.createElement(s.InlineJS,null,"pathname"),", ",o.default.createElement(s.InlineJS,null,"query"),", and ",o.default.createElement(s.InlineJS,null,"hash")," properties. The pathname property of a location is the only thing that ",o.default.createElement(s.InlineJS,null,"path-to-regexp")," ","uses for matching locations."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// uri = '/products/socks?color=black#description'\n{\n pathname: '/products/socks',\n query: 'color=black',\n hash: 'description',\n key: '1.0',\n rawPathname: '/products/socks'\n}"),o.default.createElement("p",null,"Besides the properties parsed from the URI, locations also have a ",o.default.createElement(s.InlineJS,null,"key")," property that can be used to uniquely identify a location, a ",o.default.createElement(s.InlineJS,null,"rawPathname")," property (you probably won't need this, but it is useful when dealing with pathnames that contain encoded characters), and sometimes ",o.default.createElement(s.InlineJS,null,"state")," which is data tied to a location but not part of the URI."),o.default.createElement("p",null,"Hickory actually navigates between locations, not URIs. The only time that Curi/Hickory uses URIs is to set the ",o.default.createElement(s.InlineJS,null,"href")," attribute of anchors and to update the string displayed in the address bar (using the History API)."),o.default.createElement("p",null,"For now, that will cover all that you need to know about Hickory. For basic usage, you should never have to think about it except for creating your history object.")),o.default.createElement(c.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"With both our routes and history object, we are now ready for"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"05-config"}},"Part 5"),", where we will create the core of Curi, our configuration object.")))}},70:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=(n(12),n(57));t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 5: The Curi Configuration Object"),o.default.createElement("p",null,"Curi uses a centralized configuration object to handle routing. Essentially, whenever the location changes (and when your application first loads), the configuration object will iterate over your routes to find one that matches the location. Then, it will use that route to generate a response object. This response contains a bunch of properties that are useful for rendering your application."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Creating a Curi configuration object using our routes and history object."),o.default.createElement("li",null,"Learning about some of the properties of the configuration object and how Curi works."))),o.default.createElement(c.Section,{title:"Installation",id:"installation",type:"aside"},o.default.createElement("p",null,"If you skipped the setup, you should install ",o.default.createElement(s.InlineJS,null,"@curi/core")," now."),o.default.createElement(s.PrismBlock,{lang:"bash"},"npm install @curi/core")),o.default.createElement(c.Section,{title:"Creating our Config",id:"create"},o.default.createElement("p",null,o.default.createElement(s.InlineJS,null,"@curi/core")," only has a single, default export, which is a function that will create a configuration object. In this tutorial, we will import it as ",o.default.createElement(s.InlineJS,null,"createConfig")," (of course, you can name it whatever you like)."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"import createConfig from '@curi/core';"),o.default.createElement("p",null,o.default.createElement(s.InlineJS,null,"createConfig")," can take three arguments; the first two arguments are required while the third is not."),o.default.createElement("ol",null,o.default.createElement("li",null,o.default.createElement(s.InlineJS,null,"history")," - The first argument to pass to ",o.default.createElement(s.InlineJS,null,"createConfig")," ","is a Hickory history object."),o.default.createElement("li",null,o.default.createElement(s.InlineJS,null,"routes")," - The second argument is an array of route objects."),o.default.createElement("li",null,o.default.createElement(s.InlineJS,null,"config")," - The third argument is an object that contains additional configuration data. We will not be using this object in this tutorial.")),o.default.createElement("p",null,"Using the routes that we defined in the"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"03-routes"}},"Routes Tutorial")," ","and the"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"04-hickory"}},"Hickory history object"),", we are ready to create our configuration object."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"import createConfig from '@curi/core';\nimport Browser from '@hickory/browser';\n\nimport routes from './routes';\n\nconst history = Browser();\nconst config = createConfig(history, routes);")),o.default.createElement("p",null,"There are two more things we should cover before we're ready to render. The first is how your application knows that navigation has happened so that it can re-render. The second is something that we haven't seen any evidence of it yet, but will become important soon: Curi is an asynchronous router."),o.default.createElement(c.Section,{title:"Subscriber Model",id:"subscriber",type:"aside"},o.default.createElement("p",null,"In order to let your application know about location changes, Curi uses a subscriber model. Whenever a location change happens, Curi will create a new response and then emit this response to all of its subscribed methods. Using ",o.default.createElement(s.InlineJS,null,"config.subscribe"),", we can give Curi a subscriber method to call when a new response has been created."),o.default.createElement("p",null,"What does a subscriber function look like? It can take two arguments. The first will be the ",o.default.createElement(s.InlineJS,null,"response")," object generated for the new location. The second is the ",o.default.createElement(s.InlineJS,null,"action"),"type from the navigation (",o.default.createElement(s.InlineJS,null,"'PUSH'"),",",o.default.createElement(s.InlineJS,null,"'POP'"),", and ",o.default.createElement(s.InlineJS,null,"'REPLACE'"),")."),o.default.createElement(s.PrismBlock,{lang:"javascript"},'function responseLogger(response, action) {\n  console.log("RESPONSE:", response);\n  console.log("ACTION", action)\n}\nconfig.subscribe(responseLogger);')),o.default.createElement(c.Section,{title:"Ready or Not",id:"ready",type:"aside"},o.default.createElement("p",null,"Curi being asynchronous means that we can run async code (e.g. code splitting using ",o.default.createElement(s.InlineJS,null,"import()")," or data fetching using ",o.default.createElement(s.InlineJS,null,"fetch()"),") prior to emitting a response. This is really convenient, but it can also be a gotcha if you are not aware of it."),o.default.createElement("p",null,"The reason that you need to be aware of it is because of what happens when you create your configuration object. When you do this, Curi will begin creating a response for you using the initial location (in a browser, this will be the current URI). However, we will not be able to access the initial response right after we create our config object. Instead, we will need to use the ",o.default.createElement(s.InlineJS,null,"config.ready")," ","method to wait for our initial response to be ready."),o.default.createElement(s.PrismBlock,{lang:"javascript"},'const config = createConfig(history, routes);\nconfig.ready().then(resp => {\n  // this function won\'t be called until the Promise returned\n  // by config.ready() has resolved with our response object\n  console.log("Houston, we have a response", resp);\n});\n// since Curi is async, other parts of our code can continue\n// to run while we wait for the response to be ready\n// this code will be run before code inside of the then function\nconsole.log("Look, Ma, no response yet!");'),o.default.createElement("p",null,"Calling ",o.default.createElement(s.InlineJS,null,"config.ready()")," returns a ",o.default.createElement(s.InlineJS,null,"Promise")," that resolves with our response object. It isn't absolutely mandatory that you use ",o.default.createElement(s.InlineJS,null,"config.ready()"),", but if you do not, you will need to handle rendering when the response is ",o.default.createElement(s.InlineJS,null,"undefined"),".")),o.default.createElement(c.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"With our configuration object created, we are finally ready to render. Now, we are at a bit of a fork in the road. While most of the tutorials apply to everyone, the next tutorial is framework specific."),o.default.createElement("p",null,"If you are following along using React, continue on to"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"06-pages-react"}},"Part 6: React Pages")),o.default.createElement("p",null,"If you are following along using Vue, you instead you should go to"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"06-pages-vue"}},"Part 6: Vue Pages"))))}},71:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 6: React Pages"),o.default.createElement("p",null,"Now that we have our configuration object ready to go, we can think about what our pages should look like. This tutorial will be rendering our website using React. If you prefer to use Vue, you should check out the"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"06-pages-vue"}},"Part 6: Vue Pages")," ","tutorial."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Installing the ",o.default.createElement(s.InlineJS,null,"@curi/react")," package and learning about some of the components it provides (",o.default.createElement(s.InlineComponent,null,"Navigator")," and"," ",o.default.createElement(s.InlineComponent,null,"Link"),")."),o.default.createElement("li",null,"Defining the ",o.default.createElement(s.InlineJS,null,"render")," function that will render the contents of the website."),o.default.createElement("li",null,"Creating page components for each of the routes."),o.default.createElement("li",null,"Adding links so that users can navigate between locations in the website."))),o.default.createElement(d.Section,{title:o.default.createElement("span",null,"The ",o.default.createElement(s.InlineJS,null,"@curi/react")," Package"),id:"package"},o.default.createElement("p",null,"The ",o.default.createElement(s.InlineJS,null,"@curi/react")," package provides React components that know how to interact with Curi. For this tutorial, we will only be using two: ",o.default.createElement(s.InlineComponent,null,"Navigator")," and"," ",o.default.createElement(s.InlineComponent,null,"Link"),". However, there are a number of other ones that you might find useful. You can read more about them in the"," ",o.default.createElement(r.Link,{to:"Package",params:{package:"react"},details:{hash:"API"}},o.default.createElement(s.InlineJS,null,"@curi/react")," documentation"),"."),o.default.createElement(d.Subsection,{title:"Installation",id:"installation"},o.default.createElement("p",null,"Let's start by installing the ",o.default.createElement(s.InlineJS,null,"@curi/react")," package. If you haven't already, you should also install the ",o.default.createElement(s.InlineJS,null,"react")," and"," ",o.default.createElement(s.InlineJS,null,"react-dom")," packages."),o.default.createElement(s.PrismBlock,{lang:"bash"},"npm install @curi/react react react-dom")),o.default.createElement(d.Subsection,{title:o.default.createElement("span",null,"The ",o.default.createElement(s.InlineComponent,null,"Navigator")," Component"),id:"Navigator"},o.default.createElement(s.PrismBlock,{lang:"javascript"},"import { Navigator } from '@curi/react';"),o.default.createElement("p",null,"The ",o.default.createElement(s.InlineComponent,null,"Navigator")," is responsible for rendering the website whenever the location changes. It has two props that we have to pass it: ",o.default.createElement(s.InlineJS,null,"config")," ","and ",o.default.createElement(s.InlineJS,null,"render"),"."),o.default.createElement("ol",null,o.default.createElement("li",null,o.default.createElement(s.InlineJS,null,"config")," is our Curi configuration object."),o.default.createElement("li",null,o.default.createElement(s.InlineJS,null,"render")," is a function that will be called whenever a new response is emitted (and during the initial render) and returns the React element(s) that make up your website. It will receive three arguments: the new ",o.default.createElement(s.InlineJS,null,"response")," object, the navigation's ",o.default.createElement(s.InlineJS,null,"action")," and the Curi config object. The second two can be useful occasionally, but the ",o.default.createElement(s.InlineJS,null,"response")," is what we really need for rendering.")),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// index.js\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Navigator } from '@curi/react';\n\n// ...\n\nconfig.ready().then(() => {\n  ReactDOM.render((\n    <Navigator config={config} render={(response, action, config) => {\n      return null;\n    }} />\n  ), document.getElementById('root'));\n});"),o.default.createElement("p",null,"The ",o.default.createElement(s.InlineComponent,null,"Navigator")," also places some variables on React's context. A number of the other components exported by ",o.default.createElement(s.InlineJS,null,"@curi/react")," rely on these variables to render/function. These variables are ",o.default.createElement(s.InlineJS,null,"curi"),", which is the configuration object, and ",o.default.createElement(s.InlineJS,null,"curiResponse"),", which is the current response object."),o.default.createElement("p",null,"The above ",o.default.createElement(s.InlineJS,null,"render")," function isn't very interesting because our application is rendering nothing (",o.default.createElement(s.InlineJS,null,"null"),"). We'll come back to that in a minute, but first we should learn about the other React component that we'll be using.")),o.default.createElement(d.Subsection,{title:o.default.createElement("span",null,"The ",o.default.createElement(s.InlineComponent,null,"Link")," Component"),id:"Link"},o.default.createElement(s.PrismBlock,{lang:"javascript"},"import { Link } from '@curi/react';"),o.default.createElement("p",null,"The ",o.default.createElement(s.InlineComponent,null,"Link")," component renders anchor (",o.default.createElement(s.InlineComponent,null,"a"),") elements. However, unlike an anchor, we don't actually have to write the URI that we want to navigate to (the ",o.default.createElement(s.InlineJS,null,"href"),"). Instead, you use the ",o.default.createElement(s.InlineJS,null,"to")," prop to pass the name of the route that you want to navigate to."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"<Link to='Home'>Home</Link>\n// <a href='/'>Home</a>"),o.default.createElement("p",null,"If the route that you are navigating to has any params, you pass them using the ",o.default.createElement(s.InlineJS,null,"params")," prop."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// { name: 'Book', path: ':id' }\n// (inherits 'books' path from parent route)\n<Link to='Book' params={{ id: 1357 }}>\n  Some Book\n</Link>\n// <a href='/books/1357'>Some Book</a>"),o.default.createElement("p",null,"If you need to pass any other location properties (",o.default.createElement(s.InlineJS,null,"query"),", ",o.default.createElement(s.InlineJS,null,"hash"),", or ",o.default.createElement(s.InlineJS,null,"state"),"), you can provide them using the ",o.default.createElement(s.InlineJS,null,"details")," prop."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"<Link to='Contact' details={{ hash: 'email' }}>\n  Contact by Email\n</Link>\n// <a href='/contact#email>Contact by Email</a>"),o.default.createElement(c.Note,null,"If you want to navigate outside of the application, use an anchor not a ",o.default.createElement(s.InlineComponent,null,"Link"),".",o.default.createElement(s.PrismBlock,{lang:"jsx"},"// interal\n<Link to='Contact'>Contact</Link>\n// external\n<a href=\"https://github.com\">GitHub</a>")))),o.default.createElement(d.Section,{title:"The render function",id:"render-function"},o.default.createElement("p",null,"Let's go back to that ",o.default.createElement(s.InlineJS,null,"render")," function that we pass to the"," ",o.default.createElement(s.InlineComponent,null,"Navigator"),". In the sample code above, we just returned"," ",o.default.createElement(s.InlineJS,null,"null"),". Of course, for our website we want to return the actual elements that make up a page. How should we do this? Let's take a look at the properties of our response object."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"function render(response) {\n  console.log('response:', response);\n  return null;\n}\n/*\nresponse: {\n body: undefined,\n data: undefined,\n error: undefined,\n key: '1.0',\n location: { pathname: '/', ... },\n name: 'Home',\n params: {},\n partials: [],\n status: 200\n}\n*/"),o.default.createElement(c.Note,null,"The ",o.default.createElement(r.Link,{to:"Guide",params:{slug:"responses"},details:{hash:"properties"}},"Rendering with Responses")," guide goes into more detail about each of the properties of a response object."),o.default.createElement("p",null,"Your first thought about how to use a response to render might be to use ",o.default.createElement(s.InlineJS,null,"response.name"),". You ",o.default.createElement("em",null,"could")," use a ",o.default.createElement(s.InlineJS,null,"switch")," ","to render different content based on the name."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"function render(response) {\n  switch (response.name) {\n  case 'Home':\n    return <Home />;\n  case 'Contact':\n    return <Contact />;\n  }\n}"),o.default.createElement("p",null,"Using ",o.default.createElement(s.InlineJS,null,"response.name")," grsow increasingly complex as you add more routes to your application. Instead, we are going to use one of the"," ",o.default.createElement(s.InlineJS,null,"undefined")," properties of the above response: ",o.default.createElement(s.InlineJS,null,"body"),". What is this property? The ",o.default.createElement(s.InlineJS,null,"body")," property of a response is set by calling the ",o.default.createElement(s.InlineJS,null,"body")," function property of a matched route."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"const routes = [\n  {\n    name: 'Home',\n    path: '',\n    body: () => 'You are here!'\n  }\n];\n// when the user visits the location { pathname: '/' }, the\n// response will look like this:\n{\n  name: 'Home',\n  status: 200,\n  body: 'You are here!',\n  // ...\n}"),o.default.createElement("p",null,"Instead of returning a string, what if ",o.default.createElement(s.InlineJS,null,"route.body")," returned React components? Then, our render function can use ",o.default.createElement(s.InlineJS,null,"response.body")," ","to render our website. We'll expand on that later on, but for now, let's go ahead and define the components for each of our routes.")),o.default.createElement(d.Section,{title:"The Route Components",id:"route-components"},o.default.createElement("p",null,'To refresh your memory, we have "Home", "Contact", "Book List", "Book", "Checkout", and "Not Found" pages that we will need to create components for. We can write some barebones components and add some more content later on.'),o.default.createElement("p",null,"Let's create a ",o.default.createElement(s.InlineJS,null,"components")," directory inside of our ",o.default.createElement(s.InlineJS,null,"src")," ","directory. Then, we can add files for each route in there."),o.default.createElement(s.PrismBlock,{lang:"bash"},"mkdir -p src/components"),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Home.js\nimport React from 'react';\nconst Home = () => (\n  <div className='home'>\n    Welcome to our book store!\n  </div>\n);\nexport default Home;"),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Contact.js\nimport React from 'react';\nconst Contact = () => (\n  <div className='contact'>\n    You can contact us by fax at 1-206-555-0123.\n  </div>\n);\nexport default Contact;"),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/BookList.js\nimport React from 'react';\nconst BookList = () => (\n  <div className='book-list'>\n    Available Books\n  </div>\n);\nexport default BookList;"),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Book.js\nimport React from 'react';\nconst Book = () => (\n  <div className='book'>\n    Book\n  </div>\n);\nexport default Book;"),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Checkout.js\nimport React from 'react';\nconst Checkout = () => (\n  <div className='checkout'>\n    Checkout\n  </div>\n);\nexport default Checkout;"),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/NotFound.js\nimport React from 'react';\nconst NotFound = () => (\n  <div className='not-found'>\n    Page not found\n  </div>\n);\nexport default NotFound;"),o.default.createElement("p",null,"All of these components should be imported in our ",o.default.createElement(s.InlineJS,null,"routes.js")," and set as the return value of their respective route's ",o.default.createElement(s.InlineJS,null,"body")," function."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// routes.js\nimport Home from './components/Home';\nimport Contact from './components/Contact';\nimport BookList from './components/BookList';\nimport Book from './components/Book';\nimport Checkout from './components/Checkout';\nimport NotFound from './components/NotFound';\n\nconst routes = [\n  {\n    name: 'Home',\n    path: '',\n    body: () => Home\n  },\n  {\n    name: 'Contact',\n    path: 'contact',\n    body: () => Contact\n  },\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    body: () => Checkout\n  },\n  {\n    name: 'Book List',\n    path: 'books',\n    body: () => BookList,\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        body: () => Book\n      }\n    ]\n  },\n  {\n    name: 'Not Found',\n    path: '(.*)',\n    body: () => NotFound\n  }\n];"),o.default.createElement("p",null,"We can update our ",o.default.createElement(s.InlineJS,null,"render")," function now to use ",o.default.createElement(s.InlineJS,null,"response.body"),"."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"ReactDOM.render((\n  <Navigator config={config} render={(response) => {\n    return <response.body />;\n  }} />\n), document.getElementById('root'));"),o.default.createElement("p",null,"Now, if we load up our application, we will render our home page (the"," ",o.default.createElement(s.InlineJS,null,"Home")," component). Unfortunately, there is no way to navigate to any of our other pages. In order to do this, we will need to add some"," ",o.default.createElement(s.InlineComponent,null,"Link"),"s to our application.")),o.default.createElement(d.Section,{title:"A Navigation Menu",id:"nav-menu"},o.default.createElement("p",null,"We can write a simple ",o.default.createElement(s.InlineComponent,null,"NavLinks"),' menu component to add navigation to our application. From this menu, we only need to be able to navigate to our "Home", "Contact", "Book List", and "Checkout" routes. Navigation to individual books will be done from the book list page.'),o.default.createElement("p",null,"We will use a ",o.default.createElement(s.InlineComponent,null,"nav")," element as the parent for our"," ",o.default.createElement(s.InlineComponent,null,"NavLinks"),". Inside of that is a ",o.default.createElement(s.InlineComponent,null,"ul")," and then each of our routes will be ",o.default.createElement(s.InlineComponent,null,"Link"),"s wrapped in ",o.default.createElement(s.InlineComponent,null,"li"),"s."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/NavLinks.js\nimport React from 'react';\nconst NavLinks = () => (\n  <nav>\n    <ul>\n      <li>\n        <Link to='Home'>Home</Link>\n      </li>\n      <li>\n        <Link to='Contact'>Contact Us</Link>\n      </li>\n      <li>\n        <Link to='Book List'>Books for Sale</Link>\n      </li>\n      <li>\n        <Link to='Checkout'>Checkout</Link>\n      </li>\n    </ul>\n  </nav>\n);\nexport default NavLinks;"),o.default.createElement("p",null,"That is simple enough, but where should we render this? Our ",o.default.createElement(s.InlineComponent,null,"Link")," components rely on the context variables that are provided by the ",o.default.createElement(s.InlineComponent,null,"Navigator"),". This means that our ",o.default.createElement(s.InlineComponent,null,"NavLinks")," needs to be a child of the ",o.default.createElement(s.InlineComponent,null,"Navigator"),"."),o.default.createElement("p",null,"The easiest way for us to do that would be to modify our"," ",o.default.createElement(s.InlineJS,null,"render")," function. Instead of just returning the"," ",o.default.createElement(s.InlineJS,null,"response.body")," component, we can return a ",o.default.createElement(s.InlineComponent,null,"div")," ","that wraps both ",o.default.createElement(s.InlineJS,null,"response.body")," and our"," ",o.default.createElement(s.InlineComponent,null,"NavLinks")," component."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// index.js\nimport NavLinks from './components/NavLinks.js';\n\nReactDOM.render((\n  <Navigator config={config} render={(response) => {\n    const { body: Body } = response;\n    return (\n      <div>\n        <header>\n          <Nav />\n        </header>\n        <main>\n          <Body />\n        </main>\n      </div>\n    );\n  }} />\n), document.getElementById('root'));"),o.default.createElement("p",null,"Now, we can navigate between most of our routes. However, we still need to add navigation to our books.")),o.default.createElement(d.Section,{title:"Navigating to Our Books",id:"param-navigation"},o.default.createElement("p",null,'Our "Book" route is different than all of our other routes because the book path includes an ',o.default.createElement(s.InlineJS,null,"id"),' param. This means that we need to actually have "id" values to pass to our ',o.default.createElement(s.InlineComponent,null,"Link"),"s. Later on, we'll generate some better data, but for now we can just generate a placeholder list in a module called ",o.default.createElement(s.InlineJS,null,"books.js"),"."),o.default.createElement(s.PrismBlock,{lang:"jsx"}," // books.js\nconst books = [\n  { id: 0 },\n  { id: 1 },\n  { id: 2 },\n  { id: 3 }\n];\nexport default books;"),o.default.createElement("p",null,"In the ",o.default.createElement(s.InlineComponent,null,"BookList")," component we can iterate over this list to generate links to our books."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/BookList.js\nimport books from '../books';\n\nconst BookList = () => (\n  <div className='book-list'>\n    <h1>Available Books</h1>\n    <div className='books'>\n      { books.map(b => (\n        <div className='book-item' key={b.id}>\n          <Link to='Book' params={{ id: b.id }}>\n            Book {b.id}\n          </Link>\n        </div>\n      )) }\n    </div>\n  </div>\n);")),o.default.createElement(d.Section,{title:"Book Props",id:"book-props"},o.default.createElement("p",null,"The ",o.default.createElement(s.InlineComponent,null,"Link"),"s above allow us to navigate to our books, but we don't actually have any information about which book we are supposed to be seeing. It would really help if our ",o.default.createElement(s.InlineComponent,null,"Book")," was able to access the parsed params so that it can render the information for the correct book."),o.default.createElement("p",null,"The ",o.default.createElement(s.InlineJS,null,"params")," object is a property of our response object. That means that if we pass our response object as a prop to the"," ",o.default.createElement(s.InlineComponent,null,"Body"),", we can access these params in our route components."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// index.js\nReactDOM.render((\n  <Navigator config={config} render={(response) => {\n    const { body: Body } = response;\n    return (\n      <div>\n        <header>\n          <Nav />\n        </header>\n        <main>\n          <Body response={response} />\n        </main>\n      </div>\n    );\n  }} />\n), document.getElementById('root'));"),o.default.createElement(c.Note,null,"There are a number of ways that you can decide to pass props to your route components. The one thing to keep in mind is that"," ",o.default.createElement("em",null,"all")," of your route components will receive the same set of props. You can either be very specific and only pass the props that are necessary (e.g. ",o.default.createElement(s.InlineComponent,null,"Body params=","{params}"),") or you can just pass the entire response object (e.g. ",o.default.createElement(s.InlineComponent,null,"Body response=","{response}"),") so you don't have to worry about updating this every time one of your route components needs another prop from the response."),o.default.createElement("p",null,"Next, we just need to update our ",o.default.createElement(s.InlineComponent,null,"Book")," component so that it can access its ",o.default.createElement(s.InlineJS,null,"params")," prop and figure out which book to render content for."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Book.js\nconst Book = ({ response }) => (\n  <div className='book'>\n    Book {response.params.id}\n  </div>\n);")),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"At this point, we have a website with a number of pages. It isn't particularly useful yet, but at least we can navigate between pages. Next we will take a step back from React and learn how to implement data loading with"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"07-load"}},"Part 7: The Load Function"),".")))}},72:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 6: Vue Pages"),o.default.createElement("p",null,"Now that we have our configuration object ready to go, we can think about what our pages should look like. This tutorial will be rendering our website using React. If you prefer to use React, you should check out the ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"06-pages-react"}},"Part 6: React Pages")," tutorial."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Installing the ",o.default.createElement(s.InlineJS,null,"@curi/vue")," package, learning about the ",o.default.createElement(s.InlineJS,null,"CuriPlugin")," and one of the components it provides (",o.default.createElement(s.InlineComponent,null,"curi-link"),")."),o.default.createElement("li",null,"Using the response object emitted by Curi to render our website."),o.default.createElement("li",null,"Defining page components for each of the routes."),o.default.createElement("li",null,"Adding links so that users can navigate between locations in the website."))),o.default.createElement(d.Section,{title:o.default.createElement("span",null,"The ",o.default.createElement(s.InlineJS,null,"@curi/vue")," Package"),id:"package"},o.default.createElement("p",null,"The ",o.default.createElement(s.InlineJS,null,"@curi/vue")," package exports a Vue plugin, which provides components that know how to interact with Curi. For this tutorial, we will only be using one: ",o.default.createElement(s.InlineComponent,null,"curi-link"),". You can read more about the package in the"," ",o.default.createElement(r.Link,{to:"Package",params:{package:"vue"},details:{hash:"API"}},o.default.createElement(s.InlineJS,null,"@curi/vue")," documentation"),"."),o.default.createElement(d.Subsection,{title:"Installation",id:"installation"},o.default.createElement("p",null,"Let's start by installing the ",o.default.createElement(s.InlineJS,null,"@curi/vue")," package as well as Vue."),o.default.createElement(s.PrismBlock,{lang:"bash"},"npm install @curi/vue vue")),o.default.createElement(d.Subsection,{title:"The Plugin",id:"plugin"},o.default.createElement("p",null,"The ",o.default.createElement(s.InlineJS,null,"CuriPlugin")," exported by ",o.default.createElement(s.InlineJS,null,"@curi/vue"),", should be registered with Vue after the Curi configuration object has been created. When registering it (via ",o.default.createElement(s.InlineJS,null,"Vue.use"),"), you should pass a second argument: an object with a ",o.default.createElement(s.InlineJS,null,"config")," property whose value is your Curi configuration object."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// index.js\nimport Vue from 'vue';\nimport CuriPlugin from '@curi/vue';\n\nconst config = createConfig(history, routes);\nVue.use(CuriPlugin, { config });"),o.default.createElement("p",null,"This plugins does a couple things. First, it will make your Curi configuration object accessible to every component as"," ",o.default.createElement(s.InlineJS,null,"this.$curi"),". Second, it will register Curi specific components. For this tutorial, the only component that we care about is ",o.default.createElement(s.InlineComponent,null,"curi-link"),".")),o.default.createElement(d.Subsection,{title:o.default.createElement("span",null,"The ",o.default.createElement(s.InlineComponent,null,"curi-link")," Component"),id:"Link"},o.default.createElement("p",null,"The ",o.default.createElement(s.InlineComponent,null,"curi-link")," component renders anchor (",o.default.createElement(s.InlineComponent,null,"a"),") elements. However, unlike an anchor, we don't actually have to write the URI that we want to navigate to (the ",o.default.createElement(s.InlineJS,null,"href"),"). Instead, you use the ",o.default.createElement(s.InlineJS,null,"to")," prop to pass the name of the route that you want to navigate to."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"<curi-link to='Home'>Home</curi-link>\n// <a href='/'>Home</a>"),o.default.createElement("p",null,"If the route that you are navigating to has any params, you pass them using the ",o.default.createElement(s.InlineJS,null,"params")," prop."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// { name: 'Book', path: ':id' }\n// (inherits 'books' path from parent route)\n<curi-link to='Book' params={{ id: 1357 }}>\n  Some Book\n</curi-link>\n// <a href='/books/1357'>Some Book</a>"),o.default.createElement("p",null,"If you need to pass any other location properties (",o.default.createElement(s.InlineJS,null,"query"),",",o.default.createElement(s.InlineJS,null,"hash"),", or ",o.default.createElement(s.InlineJS,null,"state"),"), you can provide them using the ",o.default.createElement(s.InlineJS,null,"details")," prop."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"<curi-link to='Contact' details={{ hash: 'email' }}>\n  Contact by Email\n</curi-link>\n// <a href='/contact#email>Contact by Email</a>"),o.default.createElement(c.Note,null,"If you want to navigate outside of the application, use an anchor not a ",o.default.createElement(s.InlineComponent,null,"curi-link"),".",o.default.createElement(s.PrismBlock,{lang:"jsx"},"// interal\n<curi-link to='Contact'>Contact</curi-link>\n// external\n<a href=\"https://github.com\">GitHub</a>")))),o.default.createElement(d.Section,{title:"The Response",id:"response"},o.default.createElement("p",null,"Being able to access the Curi configuration object is nice, but what we really need is to access the response objects that are emitted by Curi whenever the location changes. We can do this through a combination of configuration object methods that were covered in the"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"05-config"}},"configuration object")," ","tutorial: ",o.default.createElement(s.InlineJS,null,"subscribe")," and ",o.default.createElement(s.InlineJS,null,"ready"),"."),o.default.createElement("p",null,"First, we need to use ",o.default.createElement(s.InlineJS,null,"config.ready")," to wait for our initial response object. If we don't do this, we would have to handle rendering when our ",o.default.createElement(s.InlineJS,null,"response")," is ",o.default.createElement(s.InlineJS,null,"undefined"),"."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// index.js\nconfig.ready().then(response => {\n  // ...\n});"),o.default.createElement("p",null,"Inside of the ",o.default.createElement(s.InlineJS,null,"then")," function, we should create our Vue instance. The response object should be passed as a data property to the instance. We will have our Vue instance render an ",o.default.createElement(s.InlineComponent,null,"app")," component, which we will define next. The ",o.default.createElement(s.InlineComponent,null,"app")," is passed the ",o.default.createElement(s.InlineJS,null,"response")," ","object as a prop, which it will use to determine what to render."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// index.js\nimport app from './components/App';\n\nconfig.ready().then(response => {\n  const vm = new Vue({\n    el: '#root',\n    data: {\n      response\n    },\n    // we'll get into the <app> soon\n    template: '<app :response=\"response\" />',\n    components: { app }\n  });\n});"),o.default.createElement("p",null,"Passing the ",o.default.createElement(s.InlineJS,null,"response")," that ",o.default.createElement(s.InlineJS,null,"config.ready()")," resolved is great for our initial response, but what happens when the user navigates to a new location? We need a way to update this value. This is where"," ",o.default.createElement(s.InlineJS,null,"config.subscribe")," comes into play."),o.default.createElement("p",null,"We can pass a function to ",o.default.createElement(s.InlineJS,null,"config.subscribe")," that will be called whenever a new response is emitted. The first argument that that function will receive is the new response object. That means that we can write a subscriber function that sets ",o.default.createElement(s.InlineJS,null,"vm.response")," ","using the new response and Vue will re-render using the new response."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// index.js\nconfig.ready().then(response => {\n  const vm = new Vue({\n    el: '#root',\n    data: {\n      response\n    },\n    template: '<app :response=\"response\" />',\n    components: { app }\n  });\n\n  config.subscribe(response => {\n    vm.response = response;\n  });\n});")),o.default.createElement(d.Section,{title:"The App",id:"app"},o.default.createElement("p",null,"At this point we have the ability to access our configuration object throughout our components and we are passing response objects to some ",o.default.createElement(s.InlineComponent,null,"app")," component that we haven't actually written yet. We should do that now."),o.default.createElement("p",null,"Our ",o.default.createElement(s.InlineComponent,null,"app")," component will be responsible for rendering our website based on the response object. To start, let's add a ",o.default.createElement(s.InlineJS,null,"components")," directory to our ",o.default.createElement(s.InlineJS,null,"src")," directory."),o.default.createElement(s.PrismBlock,{lang:"bash"},"mkdir -p src/components"),o.default.createElement("p",null,"From up above, we know that our ",o.default.createElement(s.InlineComponent,null,"app")," will be receiving the response object as a prop. What should it render, though?"),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/App.vue --\x3e\n<template>\n</template>\n\n<script>\n  export default {\n    name: 'app',\n    props: ['response']\n  };\n<\/script>"),o.default.createElement("p",null,"Let's take a look at the properties of our response object to see which of its properties would be helpful for rendering our website."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{\n body: undefined,\n data: undefined,\n error: undefined,\n key: '1.0',\n location: { pathname: '/', ... },\n name: 'Home',\n params: {},\n partials: [],\n status: 200\n}"),o.default.createElement(c.Note,null,"The ",o.default.createElement(r.Link,{to:"Guide",params:{slug:"responses"},details:{hash:"properties"}},"Rendering with Responses")," guide goes into more detail about each of the properties of a response object."),o.default.createElement("p",null,"Your first thought about how to use a response to render might be to use ",o.default.createElement(s.InlineJS,null,"response.name"),". You could use a template full of if/else attributes and render a different component based on the"," ",o.default.createElement(s.InlineJS,null,"response.name"),". In the same vein, you could add a computed property that returns a component for each possible ",o.default.createElement(s.InlineJS,null,"name")," ","value and use ",o.default.createElement(s.InlineComponent,null,"component :is")," to render the computed property. Neither of those sounds very convenient, especially as your application gets more complex, although ",o.default.createElement(s.InlineComponent,null,"component :is")," is something we will want to use."),o.default.createElement("p",null,"Instead, we are going to use one of the ",o.default.createElement(s.InlineJS,null,"undefined")," properties from the above response: ",o.default.createElement(s.InlineJS,null,"body"),". What is this property? The"," ",o.default.createElement(s.InlineJS,null,"body")," property of a response is set by calling the ",o.default.createElement(s.InlineJS,null,"body")," ","function property of a matched route."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"const routes = [\n  {\n    name: 'Home',\n    path: '',\n    body: () => 'You are here!'\n  }\n];\n// when the user visits the location{ pathname: '/' }, the\n// response will look like this:\n{\n  name: 'Home',\n  status: 200,\n  body: 'You are here!',\n  ...\n}"),o.default.createElement("p",null,"Now, instead of returning a string, what if our ",o.default.createElement(s.InlineJS,null,"route.body")," ","properties were functions that returned Vue components? We can use"," ",o.default.createElement(s.InlineComponent,null,"component :is")," to dynamically set the component that Vue should render. Then, our render function can use ",o.default.createElement(s.InlineJS,null,"response.body")," to render our website."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/App.vue --\x3e\n<template>\n  <component :is=\"response.body\" />\n</template>\n\n<script>\nexport default {\n  name: 'app',\n  props: ['response']\n};\n<\/script>"),o.default.createElement("p",null,"Next, we should define the components for each of our routes.")),o.default.createElement(d.Section,{title:"The Route Components",id:"route-components"},o.default.createElement("p",null,'To refresh your memory, we have "Home", "Contact", "Book List", "Book", "Checkout", and "Not Found" pages that we will need to create components for. We can write some barebones components and add some more content later on.'),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Home.vue --\x3e\n<template>\n  <div class='home'>\n    Welcome to our book store!\n  </div>\n</template>"),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Contact.vue --\x3e\n<template>\n  <div class='contact'>\n    You can contact us by fax at 1-206-555-0123.\n  </div>\n</template>"),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/BookList.vue --\x3e\n<template>\n  <div class='book-list'>\n    Available Books\n  </div>\n</template>"),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Book.vue --\x3e\n<template>\n  <div class='book'>\n    Book\n  </div>\n</template>"),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Checkout.vue --\x3e\n<template>\n  <div class='checkout'>\n    Checkout\n  </div>\n</template>"),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/NotFound.vue --\x3e\n<template>\n  <div class='not-found'>\n    Page not found\n  </div>\n</template>"),o.default.createElement("p",null,"All of these components should be imported in our ",o.default.createElement(s.InlineJS,null,"routes.js")," and set as the return value of their respective route's ",o.default.createElement(s.InlineJS,null,"body")," function."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// routes.js\nimport Home from './components/Home';\nimport Contact from './components/Contact';\nimport BookList from './components/BookList';\nimport Book from './components/Book';\nimport Checkout from './components/Checkout';\nimport NotFound from './components/NotFound';\n\nconst routes = [\n  {\n    name: 'Home',\n    path: '',\n    body: () => Home\n  },\n  {\n    name: 'Contact',\n    path: 'contact',\n    body: () => Contact\n  },\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    body: () => Checkout\n  },\n  {\n    name: 'Book List',\n    path: 'books',\n    body: () => BookList,\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        body: () => Book\n      }\n    ]\n  },\n  {\n    name: 'Not Found',\n    path: '(.*)',\n    body: () => NotFound\n  }\n];\n\nexport default routes;"),o.default.createElement("p",null,"Now, if we load up our application, we will render our home page. Unfortunately, there is no way to navigate to any of our other pages. We will need to add some ",o.default.createElement(s.InlineComponent,null,"curi-link"),"s to our application.")),o.default.createElement(d.Section,{title:"A Navigation Menu",id:"nav-menu"},o.default.createElement("p",null,"We can write a simple ",o.default.createElement(s.InlineComponent,null,"NavLinks"),' menu component to add navigation to our application. From this menu, we only need to be able to navigate to our "Home", "Contact", "Book List", and "Checkout" routes. Navigation to individual books will be done from the book list page.'),o.default.createElement("p",null,"We will use a ",o.default.createElement(s.InlineComponent,null,"nav")," element as the parent for our"," ",o.default.createElement(s.InlineComponent,null,"NavLinks"),". Inside of that is a ",o.default.createElement(s.InlineComponent,null,"ul")," and then each of our routes will be ",o.default.createElement(s.InlineComponent,null,"Link"),"s wrapped in ",o.default.createElement(s.InlineComponent,null,"li"),"s."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/NavLinks.vue --\x3e\n<template>\n  <nav>\n    <ul>\n      <li>\n        <curi-link to='Home'>Home</curi-link>\n      </li>\n      <li>\n        <curi-link to='Contact'>Contact Us</curi-link>\n      </li>\n      <li>\n        <curi-link to='Book List'>Books for Sale</curi-link>\n      </li>\n      <li>\n        <curi-link to='Checkout'>Checkout</curi-link>\n      </li>\n    </ul>\n  </nav>\n</template>"),o.default.createElement("p",null,"Let's import and render that the ",o.default.createElement(s.InlineComponent,null,"NavLinks")," in our ",o.default.createElement(s.InlineComponent,null,"app"),". We'll also add some wrapper elements to keep our content organized."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/App.vue --\x3e\n<template>\n  <div>\n    <header>\n      <NavLinks />\n    </header>\n    <main>\n      <component :is=\"response.body\" />\n    </main>\n  </div>\n</template>\n\n<script>\n  import NavLinks from './NavLinks';\n  export default {\n    name: 'app',\n    props: ['response'],\n    components: { NavLinks }\n  };\n<\/script>"),o.default.createElement("p",null,"At this point, we can navigate between most of our routes. However, we still need to add navigation to our books.")),o.default.createElement(d.Section,{title:"Navigating to Our Books",id:"param-navigation"},o.default.createElement("p",null,'Our "Book" route is different than all of our other routes because the book path includes an ',o.default.createElement(s.InlineJS,null,"id"),' param. This means that we need to actually have "id" values to pass to our ',o.default.createElement(s.InlineComponent,null,"curi-link"),"s. Later on, we'll generate some better data, but for now we can just generate a placeholder list in a module called ",o.default.createElement(s.InlineJS,null,"books.js"),"."),o.default.createElement(s.PrismBlock,{lang:"jsx"}," // books.js\nconst books = [\n  { id: 0 },\n  { id: 1 },\n  { id: 2 },\n  { id: 3 }\n];\nexport default books;"),o.default.createElement("p",null,"Then, in ",o.default.createElement(s.InlineComponent,null,"BookList")," we can iterate over this list to generate links to our books."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/BookList.vue --\x3e\n<template>\n  <div class='book-list'>\n    <h1>Available Books</h1>\n    <div class='books'>\n      <div v-for=\"book in books\" :key=\"book.id\" class='book-item'>\n        <curi-link to='Book' :params=\"{ id: book.id }\">\n          Book {book.id}\n        </curi-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import books from '../books';\n  export default {\n    data: function() {\n      return { books };\n    }\n  };\n<\/script>\n")),o.default.createElement(d.Section,{title:"Book Props",id:"book-props"},o.default.createElement("p",null,"The ",o.default.createElement(s.InlineComponent,null,"curi-link"),"s above allow us to navigate to our books, but we don't actually have any information about which book we are supposed to be seeing. It would really help if our ",o.default.createElement(s.InlineComponent,null,"Book")," was able to access the parsed params so that it can render the information for the correct book."),o.default.createElement("p",null,"The ",o.default.createElement(s.InlineJS,null,"params")," object is a property of our response object. That means that if we pass our response object as a prop to the ",o.default.createElement(s.InlineJS,null,"response.body"),", we can access these params in our route components."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/App.vue --\x3e\n<template>\n  <div>\n    <header>\n      <NavLinks />\n    </header>\n    <main>\n      <component\n        :is=\"response.body\"\n        :response=\"response\"\n      />\n    </main>\n  </div>\n</template>\n\n<script>\n  import NavLinks from './NavLinks';\n\n  export default {\n    name: 'app',\n    props: ['response'],\n    components: { NavLinks }\n  };\n<\/script>"),o.default.createElement(c.Note,null,"There are a number of ways that you can decide to pass props to your route components. The one thing to keep in mind is that ",o.default.createElement("em",null,"all")," of your route components will receive the same set of props. You can either be very specific and only pass the props that are necessary (e.g. ",o.default.createElement(s.InlineComponent,null,'component :params="response.params"'),") or you can just pass the entire response object (e.g. ",o.default.createElement(s.InlineComponent,null,'component :response="response"'),") so you don't have to worry about updating this every time one of your route components needs another prop from the response."),o.default.createElement("p",null,"Next, we just need to update our ",o.default.createElement(s.InlineComponent,null,"Book")," component so that it can access its"," ",o.default.createElement(s.InlineJS,null,"params")," prop and figure out which book to render content for."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Book.vue --\x3e\n<template>\n  <div class='book'>\n    Book {{response.params.id}}\n  </div>\n</template>\n\n<script>\n  export default {\n    props: ['response']\n  };\n<\/script>")),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"At this point, we have a website with a number of pages. It isn't particularly useful yet, but at least we can navigate between pages. Next we will take a step back from Vue and look at how we can implement data loading with with"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"07-load"}},"Part 7: The Load Function"),".")))}},73:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 7: The Load Function"),o.default.createElement("p",null,"In the previous tutorial, we wrote mocked book data in ",o.default.createElement(s.InlineJS,null,"books.js")," ",' to have some data to load, but it was just filler data. We just imported the data as an array, whereas in a "real" website, we would most likely make a request to our server which would return our data (possibly after running a database query).'),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Writing a fake API to simulate data requests."),o.default.createElement("li",null,"Adding ",o.default.createElement(s.InlineJS,null,"load"),' functions to our "Book List" and "Book" routes.'))),o.default.createElement(d.Section,{title:"Fake API",id:"api"},o.default.createElement("p",null,"There are a number of ways that we might make a request to the server, but in this tutorial   we will simulate using the"," ",o.default.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"},"Fetch API"),"."," ","The ",o.default.createElement(s.InlineJS,null,"fetch")," function makes a request to the server and returns a Promise that will resolve with the server's response."),o.default.createElement("p",null,"Let's create an ",o.default.createElement(s.InlineJS,null,"api")," directory and start writing our fake fetch functions."),o.default.createElement(s.PrismBlock,{lang:"bash"},"mkdir -p src/api\ntouch src/api/books.js"),o.default.createElement("p",null,"We'll need to write two functions. The first will fetch all of our books and the second will fetch a specific book given an ",o.default.createElement(s.InlineJS,null,"id"),". Since we are emulating how ",o.default.createElement(s.InlineJS,null,"fetch")," works, both of our functions should return a Promise."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// api/books.js\nexport function fetchAllBooks() {\n  return new Promise((resolve, reject) => {\n\n  });\n}\n\nexport function fetchBook(id) {\n  return new Promise((resolve, reject) => {\n  \n  });\n}"),o.default.createElement("p",null,"We need some actual data for our fetch functions to return, so let's write an array of book objects. You can make up your own data or just copy the list from below."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// api/books.js\nconst books = [\n  {\n    id: 0,\n    title: 'Harry Potter and the Deathly Hollows',\n    author: 'J.K. Rowling',\n    published: '2007',\n    pages: 759\n  },\n  {\n    id: 1,\n    title: 'The Name of the Wind',\n    author: 'Patrick Rothfuss',\n    published: '2007',\n    pages: 662\n  },\n  {\n    id: 2,\n    title: \"The Wise Man's Fear\",\n    author: 'Patrick Rothfuss',\n    published: '2011',\n    pages: 994\n  },\n  {\n    id: 3,\n    title: 'The Way of Kings',\n    author: 'Brandon Sanderson',\n    published: '2010',\n    pages: 1007\n  },\n  {\n    id: 4,\n    title: 'A Storm of Swords',\n    author: 'George R.R. Martin',\n    published: '2003',\n    pages: 1177\n  },\n  {\n    id: 5,\n    title: 'Clockwork Princess',\n    author: 'Cassandra Clare',\n    published: '2013',\n    pages: 567\n  },\n  {\n    id: 6,\n    title: 'Words of Radiance',\n    author: 'Brandon Sanderson',\n    published: '2014',\n    pages: 1087\n  },\n  {\n    id: 7,\n    title: 'Collected Fictions',\n    author: 'Jorge Luis Borges',\n    published: '1999',\n    pages: 565\n  },\n  {\n    id: 8,\n    title: 'Heir of Fire',\n    author: 'Sarah J. Maas',\n    published: '2014',\n    pages: 565\n  },\n  {\n    id: 9,\n    title: 'The House of Hades',\n    author: 'Rick Riordan',\n    published: '2013',\n    pages: 597\n  }\n];"),o.default.createElement("p",null,"With this data, we can now finish our data fetching functions. Our ",o.default.createElement(s.InlineJS,null,"fetchAllBooks")," function should just resolve with the books array. ",o.default.createElement(s.InlineJS,null,"fetchBook")," should search the books array for the book with the requested id. If it finds a matching book object, the function should resolve with that book object. If the requested book is not found, it should reject with an error message."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// api/books.js\nconst books = [...];\n\nexport function fetchAllBooks() {\n  return new Promise((resolve, reject) => {\n    resolve(books);\n  });\n}\n\nexport function fetchBook(id) {\n  return new Promise((resolve, reject) => {\n    const book = books.find(book => book.id === id);\n    if (book) {\n      resolve(book);\n    } else {\n      reject(`Could not find the requested book: ${id}`);\n    }\n  });\n}")),o.default.createElement(d.Section,{title:"route.load",id:"load"},o.default.createElement("p",null,"Do you remember before when we said that Curi is an asynchronous router? Now is the time that we finally will see why."),o.default.createElement("p",null,"Each route can have a ",o.default.createElement(s.InlineJS,null,"load")," property. This is a function that can perform data loading related to a route prior to emitting a response. We can use the ",o.default.createElement(s.InlineJS,null,"load")," function to modify the response or to update some other code like a global data store."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{\n  name: 'Book List',\n  path: 'books',\n  load: function() {\n    // ...\n  }\n}"),o.default.createElement(d.Subsection,{title:"Load Arguments",id:"load-arguments",type:"aside"},o.default.createElement("p",null,"In order to load data/modify the response, ",o.default.createElement(s.InlineJS,null,"load")," functions need to receive a few arguments."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{\n    name: 'Book',\n    load: (route, mods, addons) => {\n      const { params, location, name } = route;\n      const { setData, redirect, fail, setStatus } = mods;\n      const { pathname, ...rest } = addons;   \n    }\n  }"),o.default.createElement("p",null,"The first argument that will be passed to your load function is an object with properties related to the matched route. These are ",o.default.createElement(s.InlineJS,null,"params"),", which is the object of path params parsed from the location's pathname,"," ",o.default.createElement(s.InlineJS,null,"location"),", which is the location object used to match the route, and ",o.default.createElement(s.InlineJS,null,"name"),", which is the name of the matched route."),o.default.createElement("p",null,"The second argument that will be passed to your load function is an object whose properties are functions that you can use to modify the response object. These functions are ",o.default.createElement(s.InlineJS,null,"setData"),", ",o.default.createElement(s.InlineJS,null,"redirect"),", ",o.default.createElement(s.InlineJS,null,"setStatus"),", and ",o.default.createElement(s.InlineJS,null,"fail"),". The"," ",o.default.createElement(r.Link,{to:"Guide",params:{slug:"routes"},details:{hash:"load"}},"All About Routes")," guide goes into detail about all four of those. For this tutorial, we will only be using ",o.default.createElement(s.InlineJS,null,"setData"),"."),o.default.createElement("p",null,"The third, and final, argument that will be passed to your load function is an object containing all of the Curi addons that are registered with your Curi configuration object. This includes the ",o.default.createElement(s.InlineJS,null,"pathname")," addon, which you may find useful for generating pathnames in your ",o.default.createElement(s.InlineJS,null,"load")," (particularly if you plan to use the ",o.default.createElement(s.InlineJS,null,"redirect")," function mentioned above).")),o.default.createElement(d.Subsection,{title:"Load Return Value",id:"load-return",type:"aside"},o.default.createElement("p",null,o.default.createElement(s.InlineJS,null,"load")," functions are expected to return a Promise. Curi uses"," ",o.default.createElement(s.InlineJS,null,"Promise.all")," to wait for your ",o.default.createElement(s.InlineJS,null,"load")," function to resolve before it emits a response. Technically speaking, your ",o.default.createElement(s.InlineJS,null,"load")," function does not have to return a Promise, but it is recommended."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{\n  load: (route, mods, addons) => {\n    return fetch(`/api/book/${route.params.id}`)\n      .then(resp => {...});\n  }\n}")),o.default.createElement("p",null,'We have two routes to add load functions to: "Book List" and "Book". Let\'s start by having each one call their respective API functions that we defined above.'),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// routes.js\nimport { fetchAllBooks, fetchBook } from './api/books';\nconst routes = [\n  // ...,\n  {\n    name: 'Book List',\n    path: 'books',\n    body: () => BookList,\n    load: (route, response, addons) => {\n      return fetchAllBooks();\n    },\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        body: () => Book,\n        params: { id: n => parseInt(n, 10) },\n        load: (route, response, addons) => {\n          return fetchBook(route.params.id);\n        }\n      }\n    ]\n  },\n  // ...\n];"),o.default.createElement(c.Note,null,'In the above "Book" route, we introduce the ',o.default.createElement(s.InlineJS,null,"route.params")," ","property. This is an object whose keys are path param names and whose values are functions that will parse the param string to return a new value. For example, the above function takes the input string and returns that string parsed as an integer."),o.default.createElement("p",null,"If the only thing that our ",o.default.createElement(s.InlineJS,null,"load")," functions do is return a Promise, they aren't particularly useful. Instead, we need to use the results of our fetch functions to call the"," ",o.default.createElement(s.InlineJS,null,"setData")," function that is provided by the second argument to our load function. ",o.default.createElement(s.InlineJS,null,"setData")," takes an object and will add that object to the response object as its ",o.default.createElement(s.InlineJS,null,"data")," property. Let's add ",o.default.createElement(s.InlineJS,null,"then")," callback functions to our fetches to do this."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// routes.js\nimport { fetchAllBooks, fetchBook } from './api/books';\nconst routes = [\n  // ...,\n  {\n    name: 'Book List',\n    path: 'books',\n    body: () => BookList,\n    load: (route, response, addons) => {\n      return fetchAllBooks()\n        .then(books => {\n          response.setData({ books });\n        });\n    },\n    children: [\n      {\n        name: 'Book',\n        path: ':id',\n        body: () => Book,\n        params: { id: n => parseInt(n, 10) },\n        load: (route, response, addons) => {\n          return fetchBook(route.params.id)\n            .then(\n              book => {\n                response.setData({ book });\n              },\n              err => {\n                console.error(err);\n              }\n            );\n        }\n      }\n    ]\n  },\n  // ...\n];"),o.default.createElement(c.Note,null,"You are responsible for catching any errors within your"," ",o.default.createElement(s.InlineJS,null,"load")," function. If you do not, they can be swallowed and cause unexpected errors in your website."),o.default.createElement("p",null,"Now, when a user visits ",o.default.createElement(s.InlineJS,null,"/books"),", the response generated by Curi will look like this:"),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{\n  name: 'Book List',\n  data: {\n    books: [/*...*/]\n  },\n  // ...\n}"),o.default.createElement("p",null,"Likewise, visiting ",o.default.createElement(s.InlineJS,null,"/books/0")," will generate a response whose"," ",o.default.createElement(s.InlineJS,null,"data")," property is a book object."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"{\n  name: 'Book',\n  params: { id: 0 }\n  data: {\n    book: { title: '...', /*...*/ }\n  },\n  // ...\n}")),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,'Now that we are loading data for our routes, we should modify our "Book List" and "Book" pages to render using this data. Once again, we will break this down for React and Vue users.'),o.default.createElement("p",null,"If you are using React, continue with"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"08-render-data-react"}},"Part 8: Rendering Data with React"),"."),o.default.createElement("p",null,"If you are using Vue, continue with"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"08-render-data-vue"}},"Part 8: Rendering Data with Vue"),".")))}},74:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 8: Rendering Data with React"),o.default.createElement("p",null,"Now that our responses have ",o.default.createElement(s.InlineJS,null,"data"),", we should update our ",o.default.createElement(s.InlineComponent,null,"BookList")," and ",o.default.createElement(s.InlineComponent,null,"Book")," components to use that. Accessing the ",o.default.createElement(s.InlineJS,null,"data")," is really easy because it is a property of our ",o.default.createElement(s.InlineJS,null,"response")," object."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Updating our ",o.default.createElement(s.InlineComponent,null,"BookList")," and ",o.default.createElement(s.InlineComponent,null,"Book")," ","components to render using ",o.default.createElement(s.InlineJS,null,"response.data"),"."))),o.default.createElement(d.Section,{title:"Using Data with the Book List",id:"book-list"},o.default.createElement("p",null,"Currently, in our ",o.default.createElement(s.InlineJS,null,"BookList.js")," file, we are importing the books from a file. Now, we can remove that import and instead use the ",o.default.createElement(s.InlineJS,null,"response")," prop to access our data. Since we also have better data, we can now use each book's title for the link text."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/BookList.js\nconst BookList = ({ response }) => (\n  <div className='book-list'>\n    <h1>Available Books</h1>\n    <div className='books'>\n      { response.data.books.map(b => (\n        <div key={b.id} className='book-item'>\n          <Link to='Book' params={{ id: b.id }}>\n            {b.title}\n          </Link>\n        </div>\n      )) }\n    </div>\n  </div>\n);"),o.default.createElement(c.Note,null,"If our ",o.default.createElement(s.InlineJS,null,"render")," function (passed to the ",o.default.createElement(s.InlineComponent,null,"Navigator"),") had just passed the ",o.default.createElement(s.InlineJS,null,"params")," instead of the whole"," ",o.default.createElement(s.InlineJS,null,"response"),", we would have to modify that function to also pass along the ",o.default.createElement(s.InlineJS,null,"data"),". Since we pass the entire"," ",o.default.createElement(s.InlineJS,null,"response"),", we do not have to worry about updating that function.")),o.default.createElement(d.Section,{title:"Using Data with the Book",id:"book"},o.default.createElement("p",null,"We are already using the ",o.default.createElement(s.InlineJS,null,"response")," prop in ",o.default.createElement(s.InlineComponent,null,"Book"),". Now, instead of using ",o.default.createElement(s.InlineJS,null,"params"),", we will switch to using"," ",o.default.createElement(s.InlineJS,null,"data"),". We can also take advantage of the ",o.default.createElement(s.InlineJS,null,"data.book")," ","properties to expand on our ",o.default.createElement(s.InlineComponent,null,"Book")," implementation."),o.default.createElement("p",null,"We also have a special case that we need to consider: what should we do when there is no matching book? In the sample data, we have books with ids that range from 0-9. What if the user navigates to ",o.default.createElement(s.InlineJS,null,"/books/123"),"? Our ",o.default.createElement(s.InlineJS,null,"fetchBook")," call will reject and ",o.default.createElement(s.InlineJS,null,"response.data")," ","will be ",o.default.createElement(s.InlineJS,null,"undefined"),". For now, we can just detect when"," ",o.default.createElement(s.InlineJS,null,"response.data")," is ",o.default.createElement(s.InlineJS,null,"undefined")," and render a simple message stating that the requested book does not exist."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Book.js\nconst Book = (props) => {\n  const { data } = props.response;\n  if (!data) {\n    return (\n      <div className='book'>\n        The requested book does not exist\n      </div>\n    );\n  }\n  const { book } = data;\n  return (\n    <div className='book'>\n      <h2>{book.title}</h2>\n      <p>By {book.author}</p>\n      <p>Published in {book.published}</p>\n      <p>This book is {book.pages} pages</p>\n    </div>\n  );\n};")),o.default.createElement("p",null,"Now that we are using ",o.default.createElement(s.InlineJS,null,"response.data")," in both the"," ",o.default.createElement(s.InlineComponent,null,"BookList")," and ",o.default.createElement(s.InlineComponent,null,"Book")," components, we can remove the ",o.default.createElement(s.InlineJS,null,"books.js")," file."),o.default.createElement(s.PrismBlock,{lang:"bash"},"git rm src/books.js"),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,'Our book component still isn\'t complete. We are building a book store after all, so we should really provide the user a way to actually "buy" a book. In'," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"09-nav-react"}},"Part 9: Forms & Navigation"),', we will add the ability to add books to a shopping cart and "purchase" them from our "Checkout" route.')))}},75:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=(n(12),n(57));t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 8: Rendering Data with Vue"),o.default.createElement("p",null,"Now that our responses have ",o.default.createElement(s.InlineJS,null,"data"),", we should update our ",o.default.createElement(s.InlineComponent,null,"BookList")," and ",o.default.createElement(s.InlineComponent,null,"Book")," components to use that. Accessing the ",o.default.createElement(s.InlineJS,null,"data")," is really easy because it is a property of our ",o.default.createElement(s.InlineJS,null,"response")," object."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Updating our ",o.default.createElement(s.InlineComponent,null,"BookList")," and ",o.default.createElement(s.InlineComponent,null,"Book")," ","components to render using ",o.default.createElement(s.InlineJS,null,"response.data"),"."))),o.default.createElement(c.Section,{title:"Using Data with the Book List",id:"book-list"},o.default.createElement("p",null,"Currently, in our ",o.default.createElement(s.InlineJS,null,"BookList.vue")," file, we are importing the books from a file. Now, we can remove that import and instead use the ",o.default.createElement(s.InlineJS,null,"response")," prop to access our data. Since we also have better data, we can now use each book's title for the link text."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/BookList.vue --\x3e\n<template>\n  <div class='book-list'>\n    <h1>Available Books</h1>\n    <div class='books'>\n      <div\n        v-for=\"book in response.data.books\"\n        :key=\"book.id\"\n        class='book-item'\n      >\n        <curi-link to='Book' :params=\"{ id: book.id }\">\n          {{book.title}}\n        </curi-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['response']\n};\n<\/script>\n")),o.default.createElement(c.Section,{title:"Using Data with the Book",id:"book"},o.default.createElement("p",null,"We are already using the ",o.default.createElement(s.InlineJS,null,"response")," prop in ",o.default.createElement(s.InlineComponent,null,"Book"),". Now, instead of using ",o.default.createElement(s.InlineJS,null,"params"),", we will switch to using"," ",o.default.createElement(s.InlineJS,null,"data"),". We can also take advantage of the ",o.default.createElement(s.InlineJS,null,"data.book")," ","properties to expand on our ",o.default.createElement(s.InlineComponent,null,"Book")," implementation."),o.default.createElement("p",null,"We also have a special case that we need to consider: what should we do when there is no matching book? In the sample data, we have books with ids that range from 0-9. What if the user navigates to ",o.default.createElement(s.InlineJS,null,"/books/123"),"? Our ",o.default.createElement(s.InlineJS,null,"fetchBook")," call will reject and ",o.default.createElement(s.InlineJS,null,"response.data")," ","will be ",o.default.createElement(s.InlineJS,null,"undefined"),". For now, we should detect that and render a simple message stating that the requested book does not exist."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Book.vue --\x3e\n<template>\n  <div v-if=\"book\" class='book'>\n    <h2>{{book.title}}</h2>\n    <p>By {{book.author}}</p>\n    <p>Published in {{book.published}}</p>\n    <p>This book is {{book.pages}} pages</p>\n  </div>\n  <div v-else class='book'>\n    The requested book does not exist\n  </div>\n</template>\n\n<script>\n  export default {\n    props: ['response'],\n    computed: {\n      book: function() {\n        return this.response.data && this.response.data.book;\n      }\n    }\n  };\n<\/script>")),o.default.createElement("p",null,"Now that we are using ",o.default.createElement(s.InlineJS,null,"response.data")," in both the"," ",o.default.createElement(s.InlineComponent,null,"BookList")," and ",o.default.createElement(s.InlineComponent,null,"Book")," components, we can remove the ",o.default.createElement(s.InlineJS,null,"books.js")," file."),o.default.createElement(s.PrismBlock,{lang:"bash"},"git rm src/books.js"),o.default.createElement(c.Section,{title:"Next",id:"next"},o.default.createElement("p",null,'Our book component still isn\'t complete. We are building a book store after all, so we should really provide the user a way to actually "buy" a book. In'," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"09-nav-vue"}},"Part 9: Forms & Navigation"),', we will add the ability to add books to a shopping cart and "purchase" them from our "Checkout" route.')))}},76:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 9: Forms & Programmatic Navigation"),o.default.createElement("p",null,"In this tutorial, we are going to be using another property of our Curi configuration object: ",o.default.createElement(s.InlineJS,null,"history"),". This property is our Hickory history instance. We will use it to perform navigation between pages in our website."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Creating another fake API, this time for getting/setting items in our shopping cart."),o.default.createElement("li",null,'Adding the ability to add books to the shopping cart from the "Book" page.'),o.default.createElement("li",null,'Displaying books in the shopping cart from the "Checkout" page and allowing users to "purchase" their selected books.'),o.default.createElement("li",null,"Performing programmatic navigation to automatically navigate to another location."))),o.default.createElement(d.Section,{title:"The (Fake) API",id:"API"},o.default.createElement("p",null,"Since we do not have a backend to store the books that a user wants to purchase, we will simulate this using ",o.default.createElement(s.InlineJS,null,"localStorage"),". This will be done by maintaining an object whose keys are book ",o.default.createElement(s.InlineJS,null,"id"),"s and whose values is how many of that book should be purchased."),o.default.createElement("p",null,"Our API should export three methods: the first will get the current state of the shopping cart, the second will update the shopping cart, and the third will reset the shopping cart."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// api/shoppingCart.js\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\n// read from localStorage and parse the value\nexport function getCart() {\n  let cart = JSON.parse(localStorage.getItem('cart'));\n  // initialize cart if it doesn't already exist\n  if (cart == null) {\n    cart = {};\n    saveCart(cart);\n  }\n  return Promise.resolve(cart);\n}\n\n// add the book and count to the cart\nexport function updateCart(bookID, count) {\n  return getCart()\n    .then(cart => {\n      cart[bookID] = count;\n      saveCart(cart);\n      return cart;\n    });\n}\n\n// reset the cart to an empty object\nexport function resetCart() {\n  const cart = {};\n  saveCart(cart);\n}"),o.default.createElement(c.Note,null,"We are using ",o.default.createElement(s.InlineJS,null,"localStorage"),", which is synchronous, but our API functions return Promises to simulate having to make these requests to the server."),o.default.createElement("p",null,'We will need to access this API in two places. Our "Book" pages need to use ',o.default.createElement(s.InlineJS,null,"updateCart"),' in order to add books to the shopping cart. The "Checkout" page need to know which books (and how many of each) are currently in the shopping cart. The page should also clear the cart out after a user has "purchased" the book in their shopping cart.')),o.default.createElement(d.Section,{title:"Adding Books to the Shopping Cart",id:"add-books"},o.default.createElement("p",null,'On the "Book" page, users should be able to specify how many copies of a book they want to purchase and add those to their shopping cart. We will do this by adding a new component, ',o.default.createElement(s.InlineComponent,null,"AddToCart"),"."),o.default.createElement("p",null,"We can start by creating a component with renders a ",o.default.createElement(s.InlineComponent,null,"select"),". Users can buy 1-4 copies of a book (an arbitrary restriction), so we need an ",o.default.createElement(s.InlineComponent,null,"option")," for each possible value. We should also add an ",o.default.createElement(s.InlineJS,null,"onChange")," handler to update the ",o.default.createElement(s.InlineComponent,null,"select")," when the user changes the value."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/AddToCart.js\nimport React from 'react';\n\nclass AddToCart extends React.Component {\n  state = { count: 1 }\n\n  updateSelect = (event) => {\n    this.setState({ count: parseInt(event.target.value, 10) })\n  }\n\n  render() {\n    return (\n      <form>\n        <select value={this.state.count} onChange={this.updateSelect}>\n          <option value='1'>1</option>\n          <option value='2'>2</option>\n          <option value='3'>3</option>\n          <option value='4'>4</option>\n        </select>\n      </form>    \n    );\n  }\n}"),o.default.createElement("p",null,'Next, we need to add a button to add the book to the shopping cart. We\'re actually going to add two buttons. The first will just add the book/count to the shopping cart. The second will add the book/count to the shopping cart and then redirect to the "Checkout" page.'),o.default.createElement("p",null,"How will we redirect? So far, all navigation within the website has been performed using ",o.default.createElement(s.InlineComponent,null,"Link"),"s. However, sometimes you might want to navigate programmatically. To do this, we can take advantage of our Hickory history object. The history object has ",o.default.createElement(s.InlineJS,null,"push"),", ",o.default.createElement(s.InlineJS,null,"replace"),", and ",o.default.createElement(s.InlineJS,null,"update")," ","methods that we can call to trigger navigation. You can read about each of these in the"," ",o.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/api/Browser.md#methods"},"Hickory documentation"),". For this tutorial, we will be using"," ",o.default.createElement(s.InlineJS,null,"push"),"."),o.default.createElement("p",null,"In order to access the configuration object from within our component we will use the ",o.default.createElement(s.InlineJS,null,"curious")," higher order component from"," ",o.default.createElement(s.InlineJS,null,"@curi/react"),". A component that is wrapped by ",o.default.createElement(s.InlineJS,null,"curious")," ","will have the Curi configuration object injected as a prop called"," ",o.default.createElement(s.InlineJS,null,"curi"),". That means that we can call ",o.default.createElement(s.InlineJS,null,"this.props.curi.history.push")," ","(a bit of a mouthful) to automatically redirect to another page."),o.default.createElement("p",null,"We can also access all of our Curi ",o.default.createElement(s.InlineJS,null,"addons")," from our configuration object, so we will use ",o.default.createElement(s.InlineJS,null,"curi.addons.pathname")," to generate the pathname for the location that we wan to redirect to."),o.default.createElement("p",null,"When the user clicks either of the buttons, we will want to use the"," ",o.default.createElement(s.InlineJS,null,"updateCart")," API method to add the book to the shopping cart. The ",o.default.createElement(s.InlineComponent,null,"AddToCart")," component doesn't inherently know which book it is for, so we will need to pass it the ",o.default.createElement(s.InlineJS,null,"id")," of the book as a prop when we render it."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/AddToCart.js\nimport React from 'react';\nimport { curious } from '@curi/react';\n\nimport { updateCart } from '../api/shoppingCart';\n\nclass AddToCart extends React.Component {\n\n  state = { count: 1 }\n\n  updateSelect = (event) => {\n    this.setState({ count: parseInt(event.target.value, 10) })\n  }\n\n  addToCart = () => {\n    updateCart(this.props.bookID, this.state.count);\n  }\n\n  addAndCheckout = () => {\n    const { curi, bookID } = this.props;\n    updateCart(bookID, this.state.count);\n    // generate the pathname for the Checkout route and then\n    // navigate to there automatically\n    const pathname = curi.addons.pathname('Checkout');\n    curi.history.push({ pathname }); \n  }\n\n  render() {\n    return (\n      <form>\n        <select value={this.state.count} onChange={this.updateSelect}>\n          <option value='1'>1</option>\n          <option value='2'>2</option>\n          <option value='3'>3</option>\n          <option value='4'>4</option>\n        </select>\n        <button type=\"button\" onClick={this.addToCart}>\n          Add To Cart\n        </button>\n        <button type=\"button\" onClick={this.addAndCheckout}>\n          Add To Cart and Checkout\n        </button>\n      </form>    \n    );\n  }\n}\n\nexport default curious(AddToCart);"),o.default.createElement("p",null,"Now, we can modify our ",o.default.createElement(s.InlineComponent,null,"Book")," component to render the"," ",o.default.createElement(s.InlineComponent,null,"AddToCart")," component. Remember that we need to pass it a"," ",o.default.createElement(s.InlineJS,null,"bookID")," prop so that we can know which book to add to the shopping cart."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Book.js\nimport React from 'react';\n\nimport AddToCart from './AddToCart';\n\nconst Book = (props) => {\n  const { data } = props.response;\n  if (!data) {\n    return (\n      <div className='book'>\n        The requested book does not exist\n      </div>\n    );\n  }\n  const { book } = data;\n  return (\n    <div className='book'>\n      <h2>{book.title}</h2>\n      <p>By {book.author}</p>\n      <p>Published in {book.published}</p>\n      <p>This book is {book.pages} pages</p>\n      <AddToCart bookID={book.id} />\n    </div>\n  );\n};\n\nexport default Book;")),o.default.createElement(d.Section,{title:"The Checkout Page",id:"checkout"},o.default.createElement("p",null,'Now that we can add books to our shopping cart, we also should give the user the ability to buy them. Of course, this isn\'t a real store website that we are building, so instead of asking for payment and shipping information, we will just redirect the user once they "purchase" their books.'),o.default.createElement("p",null,"Let's start out in our ",o.default.createElement(s.InlineJS,null,"routes.js"),' file. We want our "Checkout" page to know which books are in the shopping cart. We can use the'," ",o.default.createElement(s.InlineJS,null,"load"),' function of the "Checkout" route to load all of the books and our shopping cart. We can merge the two together to create an array of items in the cart.'),o.default.createElement("p",null,'While we\'re at it, we should also add one more route to our website. This will be a "Checkout Complete" route that we redirect to after a user has "purchased" their books.'),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// routes.js\nimport CheckoutComplete from './components/CheckoutComplete';\n\nimport { getCart } from './api/shoppingCart';\n\nconst routes = [\n  // ...\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    body: () => Checkout,\n    load: (route, response, addons) => {\n      return Promise.all([\n        fetchAllBooks(),\n        getCart()\n      ]).then(([ books, cart ]) => {\n        /*\n         * We will iterate over all of the items in\n         * our shopping cart and find the matching\n         * book. Then, we combine the book and the\n         * number being purchased into one object.\n         *\n         * We then assign that array of objects as\n         * the \"items\" property of our response's\n         * data object.\n         */ \n        const items = Object.keys(cart).map(key => {\n          const id = parseInt(key, 10);\n          const count = cart[key];\n          const book = books.find(b => b.id === id);\n          return Object.assign({}, book, { count });\n        });\n        response.setData({ items });\n      });\n    },\n    children: [\n      {\n        name: 'Checkout Complete',\n        path: 'complete',\n        body: () => CheckoutComplete\n      }\n    ]\n  }\n  // ...\n];"),o.default.createElement("p",null,"Before we update our ",o.default.createElement(s.InlineComponent,null,"Checkout")," component, let's write the ",o.default.createElement(s.InlineComponent,null,"CheckoutComplete")," component. This should just be a simple component thanking the user for their purchase."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/CheckoutComplete.js\nimport React from 'react';\n\nconst CheckoutComplete = () => (\n  <div className='checkout-complete'>\n    Thanks for your purchase!\n  </div>\n);\n\nexport default CheckoutComplete;"),o.default.createElement("p",null,"We aren't going to get too fancy with displaying the items in our shopping cart. We can just place them all in a ",o.default.createElement(s.InlineComponent,null,"table"),' so that they are neatly organized. Then, we will just need to add a button to "purchase" the books.'),o.default.createElement("p",null,"We will once again be taking advantage of the ",o.default.createElement(s.InlineJS,null,"curious")," higher order component to access our Curi configuration object from within a component."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// components/Checkout.js\nimport React from 'react';\nimport { curious } from '@curi/react';\n\nimport { resetCart } from '../api/shoppingCart';\n\nclass Checkout extends React.Component {\n\n  purchase = () => {\n    // when the user \"purchases\" their books, we just\n    // reset the cart and redirect to the \"Checkout Complete\" page\n    resetCart();\n    const { curi } = this.props;\n    const pathname = curi.addons.pathname('Checkout Complete');\n    curi.history.push({ pathname });\n  }\n\n  render() {\n    const { response } = this.props;\n    return (\n      <div className='checkout'>\n        <h1>Checkout</h1>\n        <div>\n          <table>\n            <thead>\n              <tr>\n                <td>Book</td>\n                <td>Quantity</td>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                response.data.items.map(book => (\n                  <tr key={book.id}>\n                    <td>{book.title}</td>\n                    <td>{book.count}</td>\n                  </tr>\n                ))\n              }\n            </tbody>\n          </table>\n          <button type='button' onClick={this.purchase}>\n            Purchase Books\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default curious(Checkout);"),o.default.createElement("p",null,"One last thing to consider about our ",o.default.createElement(s.InlineComponent,null,"Checkout")," ","component is what we should display when there are no items in the shopping cart. We can just check our"," ",o.default.createElement(s.InlineJS,null,"response.data.items")," array and display a message stating that the cart is empty when the list's length is zero."),o.default.createElement(s.PrismBlock,{lang:"jsx"},"// component/Checkout.js\nclass Checkout extends React.Component {\n  // ...\n  render() {\n    const { response } = this.props;\n    if (!response.data.items.length) {\n      return (\n        <div className='checkout'>\n          <h1>Checkout</h1>\n          <div>\n            You have not added any items to your shopping cart!\n          </div>\n        </div>\n      )\n    }\n    // ...\n  }\n}")),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"With that, we have considered pretty much everything you need to know to get started building your website with Curi. We have one last part,"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"10-now-what"}},"Part 10: Now What?"),", that gives some suggestions on what you can do with your new knowledge.")))}},77:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6),c=n(12),d=n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 9: Forms & Programmatic Navigation"),o.default.createElement("p",null,"In this tutorial, we are going to be using another property of our Curi configuration object: ",o.default.createElement(s.InlineJS,null,"history"),". This property is the Hickory history instance. We will use it to perform navigation between pages in our website."),o.default.createElement("div",null,o.default.createElement("p",null,"In this tutorial, we will be doing the following:"),o.default.createElement("ul",null,o.default.createElement("li",null,"Creating another fake API, this time for getting/setting items in our shopping cart."),o.default.createElement("li",null,'Adding the ability to add books to the shopping cart from the "Book" page.'),o.default.createElement("li",null,'Displaying books in the shopping cart from the "Checkout" page and allowing users to "purchase" their selected books.'),o.default.createElement("li",null,"Performing programmatic navigation to automatically navigate to another location."))),o.default.createElement(d.Section,{title:"The (Fake) API",id:"API"},o.default.createElement("p",null,"Since we do not have a backend to store the books that a user wants to purchase, we will simulate this using ",o.default.createElement(s.InlineJS,null,"localStorage"),". This will be done by maintaining an object whose keys are book ",o.default.createElement(s.InlineJS,null,"id"),"s and whose values is how many of that book should be purchased."),o.default.createElement("p",null,"Our API should export three methods: the first will get the current state of the shopping cart, the second will update the shopping cart, and the third will reset the shopping cart."),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// api/shoppingCart.js\nfunction saveCart(cart) {\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\n// read from localStorage and parse the value\nexport function getCart() {\n  let cart = JSON.parse(localStorage.getItem('cart'));\n  // initialize cart if it doesn't already exist\n  if (cart == null) {\n    cart = {};\n    saveCart(cart);\n  }\n  return Promise.resolve(cart);\n}\n\n// add the book and count to the cart\nexport function updateCart(bookID, count) {\n  return getCart()\n    .then(cart => {\n      cart[bookID] = count;\n      saveCart(cart);\n      return cart;\n    });\n}\n\n// reset the cart to an empty object\nexport function resetCart() {\n  const cart = {};\n  saveCart(cart);\n}"),o.default.createElement(c.Note,null,"We are using ",o.default.createElement(s.InlineJS,null,"localStorage"),", which is synchronous, but our API functions return Promises to simulate having to make these requests to the server."),o.default.createElement("p",null,'We will need to access this API in two places. Our "Book" pages need to use ',o.default.createElement(s.InlineJS,null,"updateCart"),' in order to add books to the shopping cart. The "Checkout" page need to know which books (and how many of each) are currently in the shopping cart. The page should also clear the cart out after a user has "purchased" the book in their shopping cart.')),o.default.createElement(d.Section,{title:"Adding Books to the Shopping Cart",id:"add-books"},o.default.createElement("p",null,'On the "Book" page, users should be able to specify how many copies of a book they want to purchase and add those to their shopping cart. We will do this by adding a new component, ',o.default.createElement(s.InlineComponent,null,"AddToCart"),"."),o.default.createElement("p",null,"We can start by creating a component with renders a ",o.default.createElement(s.InlineComponent,null,"select"),". Users can buy 1-4 copies of a book (an arbitrary restriction), so we need an ",o.default.createElement(s.InlineComponent,null,"option")," for each possible value."),o.default.createElement(s.PrismBlock,{lang:"html"},'\x3c!-- components/AddToCart.vue --\x3e\n<template>\n  <form>\n    <select v-model="count">\n      <option value="1">1</option>\n      <option value="2">2</option>\n      <option value="3">3</option>\n      <option value="4">4</option>\n    </select>\n  </form>\n</template>\n\n<script>\nexport default {\n  data: function() {\n    return {\n      count: \'1\'\n    };\n  }\n};\n<\/script>\n'),o.default.createElement("p",null,'Next, we need to add a button to add the book to the shopping cart. We\'re actually going to add two buttons. The first will just add the book/count to the shopping cart. The second will add the book/count to the shopping cart and then redirect to the "Checkout" page.'),o.default.createElement("p",null,"How will we redirect? So far, all navigation within the website has been performed using ",o.default.createElement(s.InlineComponent,null,"curi-link"),"s. However, sometimes you might want to navigate programmatically. To do this, we can take advantage of our Hickory history object. The history object has ",o.default.createElement(s.InlineJS,null,"push"),", ",o.default.createElement(s.InlineJS,null,"replace"),", and ",o.default.createElement(s.InlineJS,null,"update")," ","methods that we can call to trigger navigation. You can read about each of these in the"," ",o.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/api/Browser.md#methods"},"Hickory documentation"),". For this tutorial, we will be using"," ",o.default.createElement(s.InlineJS,null,"push"),"."),o.default.createElement("p",null,"The ",o.default.createElement(s.InlineJS,null,"CuriPlugin")," makes our configuration object available to all of our components as ",o.default.createElement(s.InlineJS,null,"this.$curi"),". That means that we can call ",o.default.createElement(s.InlineJS,null,"this.$curi.history.push")," (a bit of a mouthful) to automatically redirect to another page."),o.default.createElement("p",null,"We can also access all of our Curi ",o.default.createElement(s.InlineJS,null,"addons")," from our configuration object, so we will use ",o.default.createElement(s.InlineJS,null,"curi.addons.pathname")," to generate the pathname for the location that we wan to redirect to."),o.default.createElement("p",null,"When the user clicks either of the buttons, we will want to use the"," ",o.default.createElement(s.InlineJS,null,"updateCart")," API method to add the book to the shopping cart. The ",o.default.createElement(s.InlineComponent,null,"AddToCart")," component doesn't inherently know which book it is for, so we will need to pass it the ",o.default.createElement(s.InlineJS,null,"id")," of the book as a prop when we render it."),o.default.createElement(s.PrismBlock,{lang:"html"},'\x3c!-- components/AddToCart.vue --\x3e\n<template>\n  <form>\n    <select v-model="count">\n      <option value="1">1</option>\n      <option value="2">2</option>\n      <option value="3">3</option>\n      <option value="4">4</option>\n    </select>\n    <button type="button" v-on:click="addToCart">Add To Cart</button>\n    <button type="button" v-on:click="addAndCheckout">Add To Cart and Checkout</button>\n  </form>\n</template>\n\n<script>\n  import { updateCart } from \'../api/shoppingCart\';\n\n  export default {\n    props: [\'book\'],\n    data: function() {\n      return {\n        count: \'1\'\n      };\n    },\n    methods: {\n      addToCart(event) {\n        updateCart(this.book, parseInt(this.count));\n      },\n      addAndCheckout(event) {\n        updateCart(this.book, parseInt(this.count))\n          .then(() => {\n            const pathname = this.$curi.addons.pathname(\'Checkout\');\n            this.$curi.history.push({ pathname });\n          });\n      }\n    }\n  };\n<\/script>\n'),o.default.createElement("p",null,"Now, we can modify our ",o.default.createElement(s.InlineComponent,null,"Book")," component to render the"," ",o.default.createElement(s.InlineComponent,null,"AddToCart")," component. Remember that we need to pass it a"," ",o.default.createElement(s.InlineJS,null,"bookID")," prop so that we can know which book to add to the shopping cart."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Book.vue --\x3e\n<template>\n  <div v-if=\"book\" class='book'>\n    <h2>{{book.title}}</h2>\n    <p>By {{book.author}}</p>\n    <p>Published in {{book.published}}</p>\n    <p>This book is {{book.pages}} pages</p>\n    <AddToCart :bookID=\"book.id\" />\n  </div>\n  <div v-else class='book'>\n    The requested book does not exist\n  </div>\n</template>\n\n<script>\n  import AddToCart from './AddToCart';\n\n  export default {\n    props: ['response'],\n    computed: {\n      book: function() {\n        return this.response.data && this.response.data.book;\n      }\n    },\n    components: { AddToCart }\n  };\n<\/script>")),o.default.createElement(d.Section,{title:"The Checkout Page",id:"checkout"},o.default.createElement("p",null,'Now that we can add books to our shopping cart, we also should give the user the ability to buy them. Of course, this isn\'t a real store website that we are building, so instead of asking for payment and shipping information, we will just redirect the user once they "purchase" their books.'),o.default.createElement("p",null,"Let's start out in our ",o.default.createElement(s.InlineJS,null,"routes.js"),' file. We want our "Checkout" page to know which books are in the shopping cart. We can use the'," ",o.default.createElement(s.InlineJS,null,"load"),' function of the "Checkout" route to load all of the books and our shopping cart. We can merge the two together to create an array of items in the cart.'),o.default.createElement("p",null,'While we\'re at it, we should also add one more route to our website. This will be a "Checkout Complete" route that we redirect to after a user has "purchased" their books.'),o.default.createElement(s.PrismBlock,{lang:"javascript"},"// routes.js\nimport CheckoutComplete from './components/CheckoutComplete';\n\nimport { getCart } from './api/shoppingCart';\n\nconst routes = [\n  // ...\n  {\n    name: 'Checkout',\n    path: 'checkout',\n    body: () => Checkout,\n    load: (route, response, addons) => {\n      return Promise.all([\n        fetchAllBooks(),\n        getCart()\n      ]).then(([ books, cart ]) => {\n        /*\n         * We will iterate over all of the items in\n         * our shopping cart and find the matching\n         * book. Then, we combine the book and the\n         * number being purchased into one object.\n         *\n         * We then assign that array of objects as\n         * the \"items\" property of our response's\n         * data object.\n         */ \n        const items = Object.keys(cart).map(key => {\n          const id = parseInt(key, 10);\n          const count = cart[key];\n          const book = books.find(b => b.id === id);\n          return Object.assign({}, book, { count });\n        });\n        response.setData({ items });\n      });\n    },\n    children: [\n      {\n        name: 'Checkout Complete',\n        path: 'complete',\n        body: () => CheckoutComplete\n      }\n    ]\n  }\n  // ...\n];"),o.default.createElement("p",null,"Before we update our ",o.default.createElement(s.InlineComponent,null,"Checkout")," component, let's write the ",o.default.createElement(s.InlineComponent,null,"CheckoutComplete")," component. This should just be a simple component thanking the user for their purchase."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/CheckoutComplete.vue --\x3e\n<template>\n  <div className='checkout-complete'>\n    Thanks for your purchase!\n  </div>\n</template>"),o.default.createElement("p",null,"We aren't going to get too fancy with displaying the items in our shopping cart. We can just place them all in a ",o.default.createElement(s.InlineComponent,null,"table"),' so that they are neatly organized. Then, we will just need to add a button to "purchase" the books.'),o.default.createElement("p",null,"We will once again be taking advantage of ",o.default.createElement(s.InlineJS,null,"this.$curi")," to access our Curi configuration object from within a component."),o.default.createElement(s.PrismBlock,{lang:"html"},"\x3c!-- components/Checkout.vue --\x3e\n<template>\n  <div class='checkout'>\n    <h1>Checkout</h1>\n    <div>\n      <table>\n        <thead>\n          <tr>\n            <td>Book</td>\n            <td>Quantity</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"book in response.data.items\" :key=\"book.id\">\n            <td>{{book.title}}</td>\n            <td>{{book.count}}</td>\n          </tr>\n        </tbody>\n      </table>\n      <button type='button' v-on:click=\"purchase\">\n        Purchase Books\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { resetCart } from '../api/shoppingCart';\n\nexport default {\n  props: ['response'],\n  methods: {\n    purchase: function(event) {\n      // when the user \"purchases\" their books, we just\n      // reset the cart and redirect to the \"Checkout Complete\" page\n      resetCart();\n      const pathname = this.$curi.addons.pathname('Checkout Complete');\n      this.$curi.history.push({ pathname });\n    }\n  }\n};\n<\/script>"),o.default.createElement("p",null,"One last thing to consider about our ",o.default.createElement(s.InlineComponent,null,"Checkout")," ","component is what we should display when there are no items in the shopping cart. We can just check our"," ",o.default.createElement(s.InlineJS,null,"response.data.items")," array and display a message stating that the cart is empty when the list's length is zero."),o.default.createElement(s.PrismBlock,{lang:"html"},'\x3c!-- component/Checkout.vue --\x3e\n<template>\n  <div class=\'checkout\'>\n    <h1>Checkout</h1>\n    <div v-if="response.data.items.length">\n      <table>\n        <thead>\n          <tr>\n            <td>Book</td>\n            <td>Quantity</td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for="book in response.data.items" :key="book.id">\n            <td>{{book.title}}</td>\n            <td>{{book.count}}</td>\n          </tr>\n        </tbody>\n      </table>\n      <button type=\'button\' v-on:click="purchase">\n        Purchase Books\n      </button>\n    </div>\n    <div v-else>\n      You have not added any items to your shopping cart!\n    </div>\n  </div>\n</template>')),o.default.createElement(d.Section,{title:"Next",id:"next"},o.default.createElement("p",null,"With that, we have considered pretty much everything you need to know to get started building your website with Curi. We have one last part,"," ",o.default.createElement(r.Link,{to:"Tutorial",params:{name:"10-now-what"}},"Part 10: Now What?"),", that gives some suggestions on what you can do with your new knowledge.")))}},78:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),o=a(l),r=n(1),i=n(59),u=a(i),s=n(6);n(12),n(57);t.default=function(){return o.default.createElement(u.default,null,o.default.createElement("h1",null,"Part 10: Now What?"),o.default.createElement("p",null,"This is the end. You have completed all of the parts of the tutorial and have built a website powered by Curi. It isn't a complete site, but it works, and hopefully you learned a lot while we built it."),o.default.createElement("p",null,"Thanks for following along! If you have any questions or comments, you can reach out to me on Twitter"," ",o.default.createElement("a",{href:"https://twitter.com/pshrmn"},"@pshrmn"),". Any feedback is appreciated!"),o.default.createElement("p",null,"Now, you may be wondering what else to do. My first suggestion would be to build your own website! The tutorial went through everything you need to know to get started building a site with Curi, so why not build your own?"),o.default.createElement("p",null,"If you are looking to learn/build more, you can also try some of the suggestions listed below."),o.default.createElement("ol",null,o.default.createElement("li",null,'The current home page is quite boring. You could add a "featured" book to it using the "Home" route\'s ',o.default.createElement(s.InlineJS,null,"load")," function to attach a random book to the response."),o.default.createElement("li",null,"Similar to the previous suggestion, the contact page could use some work as well. Perhaps you could add some child routes for different methods of contact."),o.default.createElement("li",null,"You can try using a Curi ",o.default.createElement(r.Link,{to:"Guide",params:{slug:"side-effects"}},"side effect")," with the website. You could use"," ",o.default.createElement(r.Link,{to:"Package",params:{package:"side-effect-title"}},o.default.createElement(s.InlineJS,null,"@curi/side-effect-title"))," and the ",o.default.createElement(s.InlineJS,null,"route.title")," property to update the title whenever you navigate."),o.default.createElement("li",null,"If you're concerned about the bundle size, you could check out the"," ",o.default.createElement(r.Link,{to:"Guide",params:{slug:"code-splitting"}},"code splitting guide")," ","and break up the bundle using ",o.default.createElement(s.InlineJS,null,"route.preload"),"."),o.default.createElement("li",null,"While we used ",o.default.createElement(s.InlineJS,null,"response.data")," to pass data to our components, you might prefer a global store like Redux or Vuex. You could rewrite the application to use these, ",o.default.createElement(s.InlineJS,null,"response.data")," is a convenience, not a requirement. You can even continue to use ",o.default.createElement(s.InlineJS,null,"route.load")," with a global store. Instead of calling ",o.default.createElement(s.InlineJS,null,"setData"),", you could just dispatch the data to your store. You can check out the ",o.default.createElement(r.Link,{to:"Example",params:{slug:"redux"}},"Redux example")," ","to see how this might be implemented."),o.default.createElement("li",null,"You can explore the other response methods available in ",o.default.createElement(s.InlineJS,null,"route.load"),". For example, you could use the ",o.default.createElement(s.InlineJS,null,"redirect"),' function to automatically redirect when the user attempt to navigate to a "Book" page that doesn\'t exist (e.g. there is no book whose ',o.default.createElement(s.InlineJS,null,"id")," equals ",o.default.createElement(s.InlineJS,null,"params.id"),")."),o.default.createElement("li",null,'We only had ten books in our data, but what if there were hundreds? You could implement pagination on the "Book List" page. Query params could be included in the location to only display certain books. If you\'re feeling adventurous, you could pass a'," ",o.default.createElement("a",{href:"https://github.com/pshrmn/hickory/blob/master/docs/api/Browser.md#options"},o.default.createElement(s.InlineJS,null,"query")," object")," to your history object to use query objects instead of strings."),o.default.createElement("li",null,"You can read through the ",o.default.createElement(r.Link,{to:"Guide",params:{slug:"getting-started"}},"guides"),","," ","browse the ",o.default.createElement(r.Link,{to:"Examples"},"examples"),", and check out the available Curi ",o.default.createElement(r.Link,{to:"Packages"},"packages"),". This tutorial covered what you need to know to get started, but there is plenty more you can dive into for advanced usage.")))}}});