(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=c(n(0)),a=(n(1),c(n(20))),r=c(n(21)),o=n(6),i=n(10),u=n(7),s=n(11);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function p(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,l.default.PureComponent),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(t,[{key:"render",value:function(){var e=this.props;e.name,e.version,e.globalName;return l.default.createElement(l.default.Fragment,null,l.default.createElement(r.default,null,l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"@curi/static")," package is for creating static assets for your server. Its exported functions should be used in a build script, not the source of an application."))),l.default.createElement(a.default,null,l.default.createElement(i.Section,{tag:"h3",title:"staticFiles()",id:"staticFiles"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"staticFiles()")," function is used to generate HTML files for a static website and save them to the disk. An HTML file will be created for each page that you provide."),l.default.createElement("p",null,"Files will be created as ",l.default.createElement(o.InlineJS,null,"index.html")," in the directory for their path. For example, the page for the pathname"," ",l.default.createElement(o.InlineJS,null,"/about")," would create an ",l.default.createElement(o.InlineJS,null,"/about/index.html")," ","file.")),l.default.createElement(u.CodeBlock,null,'import { staticFiles } from \'@curi/static\';\nimport { join } from "path";\n\nimport routes from "../src/routes";\n\nstaticFiles({\n  routes,\n  pages: [{ name: "Home" }, { name: "About" }],\n  outputDir: join(process.cwd(), "public"),\n  render: () => {...},\n  insert: () => {...}\n});'),l.default.createElement(u.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"staticFiles()")," returns a Promise that resolve with an array of results. Each entry in the results array contains the"," ",l.default.createElement(o.InlineJS,null,"pathname")," of the result, a ",l.default.createElement(o.InlineJS,null,"success")," boolean, and, if ",l.default.createElement(o.InlineJS,null,"success")," is false, the ",l.default.createElement(o.InlineJS,null,"error")," that occurred."),l.default.createElement("p",null,"It can be useful to log the results to easily see what pages were successfully built and which had issues.")),l.default.createElement(u.CodeBlock,null,'staticFiles({...})\n  .then(results => {\n    const resultString = results\n      .map(result => {\n        return result.success\n          ? `✔ ${result.pathname}`\n          : `✖ ${result.pathname} (${result.error.message})`;\n      })\n      .join("\\n");\n    console.log(resultString);\n  });'),l.default.createElement(i.Section,{tag:"h4",title:"Arguments",id:"staticFiles-arguments"},l.default.createElement(i.Subsection,{tag:"h5",title:"routes",id:"staticFiles-routes"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The array of route descriptors that is passed to a router.")),l.default.createElement(u.CodeBlock,null,'routes = [\n  {\n    name: "Home",\n    path: "",\n  },\n  {\n    name: "User",\n    path: "u/:id"\n  }\n];\n\n\nstaticFiles({\n  // ...\n  routes\n});')),l.default.createElement(i.Subsection,{tag:"h5",title:"pages",id:"staticFiles-pages"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"An array of page descriptors. A page descriptor is an object with a ",l.default.createElement(o.InlineJS,null,"name")," property defining which route to generate a page for. If the route (or any of its ancestors) has any params, they should be passed as an object with the"," ",l.default.createElement(o.InlineJS,null,"params")," property.")),l.default.createElement(u.CodeBlock,null,'const pages = [\n  { name: "Home" },\n  { name: "User", params: { id: 1 }},\n  { name: "User", params: { id: 2 }},\n];\n\n\nstaticFiles({\n  // ...\n  pages\n});')),l.default.createElement(i.Subsection,{tag:"h5",title:"render()",id:"staticFiles-render"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"A function that takes the emitted ",l.default.createElement(o.InlineJS,null,"response"),","," ",l.default.createElement(o.InlineJS,null,"navigation"),", and ",l.default.createElement(o.InlineJS,null,"router")," for a location and returns the content that should be inserted into the page's HTML."),l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"render()"),"s behavior will depend on what type of application is being built. For a React application, this would call the ",l.default.createElement(o.InlineJS,null,"renderToString()")," method from"," ",l.default.createElement(o.InlineJS,null,"react-dom/server"),". A Vue application would use"," ",l.default.createElement(o.InlineJS,null,"vue-server-renderer"),"."),l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"render()")," can return anything you want it to. This may be a string for simple rendering, or an object with multiple properties for more complex rendering (e.g. title/style properties for the ",l.default.createElement(o.InlineComponent,null,"head")," and rendered markup to insert in the ",l.default.createElement(o.InlineComponent,null,"body"),").")),l.default.createElement(u.CodeBlock,{lang:"jsx"},'// for a React application\nimport { renderToString } from "react-dom";\nimport { curiProvider } from "@curi/react-dom";\n\nfunction render(emitted) {\n  const { router } = emitted;\n  const Router = curiProvider(router);\n  return renderToString(\n    <Router>\n      {({ response }) => {...}}\n    </Router>\n  )\n}\n\nstaticFiles({\n  // ...\n  render\n});')),l.default.createElement(i.Subsection,{tag:"h5",title:"insert()",id:"staticFiles-insert"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"A function that takes the value returned by the"," ",l.default.createElement(o.InlineJS,null,"render()")," function and inserts it into the full HTML for a page.")),l.default.createElement(u.CodeBlock,null,'function insert(markup) {\n  return `<!doctype html>\n<html>\n  <head>\n    <title>${markup.title}</title>\n  </head>\n  <body>\n    <div id="root">${markup.html}</div>\n    <script src="/static/js/bundle.js"><\/script>\n  </body>\n</html>`;\n}\n\n// where the markup comes from the render() function:\nfunction render() {\n  return { title: "Yo!", html: "<div>Hey!</div>" };\n}\n\nstaticFiles({\n  // ...\n  insert\n});')),l.default.createElement(i.Subsection,{tag:"h5",title:"outputDir",id:"staticFiles-outputDir"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The folder where the generated HTML files should be saved."))),l.default.createElement(i.Subsection,{tag:"h5",title:"outputRedirects",id:"staticFiles-outputRedirects"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"If a route automatically redirects, you probably do not need to create an HTML file for it. If you set"," ",l.default.createElement(o.InlineJS,null,"outputRedirects")," to ",l.default.createElement(o.InlineJS,null,"true"),", HTML files will be generated for redirect pages."),l.default.createElement("p",null,"Your server should be configured to return a fallback page when there is no content for a route, so you should not need to create HTML files for redirected pages."),l.default.createElement(s.Note,null,"If you do create HTML files for redirects, be sure that your application knows how to render redirect responses. If you are using ",l.default.createElement(o.InlineJS,null,"emitRedirects = false")," in your client side code, your application probably doesn't know how to render redirects."))),l.default.createElement(i.Subsection,{tag:"h5",title:"getRouterOptions()",id:"staticFiles-getRouterOptions"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"getRouterOptions()")," function returns the options for a router."),l.default.createElement("p",null,"When you call ",l.default.createElement(o.InlineJS,null,"staticFiles()"),", a number of routers will be created behind the scenes. ",l.default.createElement(o.InlineJS,null,"staticFiles()")," ","creates its own ",l.default.createElement(o.InlineJS,null,"history")," instances, and gets its routes from the ",l.default.createElement(o.InlineJS,null,"routes")," options, but the router may also need to be provided with other options, like route interactions."),l.default.createElement(s.Note,null,"This is a function so that each router has its own instances of route interactions in order to avoid any possible issues with routers resetting other router's interactions.")),l.default.createElement(u.CodeBlock,null,'import active from "@curi/active";\nconst getRouterOptions = () => ({\n  routes: [active()]\n});\n\nstaticFiles({\n  // ...\n  getRouterOptions\n});')))),l.default.createElement(i.Section,{tag:"h3",title:"pathnames()",id:"pathnames"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"pathnames()")," function is used to generate pathnames from an array of provided page descriptors. This can be useful for generating a sitemap.")),l.default.createElement(i.Section,{tag:"h4",title:"Arguments",id:"pathnames-arguments"},l.default.createElement(i.Subsection,{tag:"h5",title:"routes",id:"pathnames-routes"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The array of route descriptors that is passed to a router.")),l.default.createElement(u.CodeBlock,null,'routes = [\n  {\n    name: "Home",\n    path: "",\n  },\n  {\n    name: "User",\n    path: "u/:id"\n  }\n];\n\n\nconst paths = pathnames({\n  // ...\n  routes\n});')),l.default.createElement(i.Subsection,{tag:"h5",title:"pages",id:"pathnames-pages"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"An array of page descriptors. A page descriptor is an object with a ",l.default.createElement(o.InlineJS,null,"name")," property defining which route to generate a page for. If the route (or any of its ancestors) has any params, they should be passed as an object with the"," ",l.default.createElement(o.InlineJS,null,"params")," property.")),l.default.createElement(u.CodeBlock,null,'const pages = [\n  { name: "Home" },\n  { name: "User", params: { id: 1 }},\n  { name: "User", params: { id: 2 }},\n];\n\n\nconst paths = pathnames({\n  // ...\n  pages\n});')),l.default.createElement(i.Subsection,{tag:"h5",title:"routerOptions",id:"pathnames-routerOptions"},l.default.createElement(u.Explanation,null,l.default.createElement("p",null,"The options for a router, predominantly useful for passing any route interactions the application may need while rendering.")),l.default.createElement(u.CodeBlock,null,'import active from "@curi/active";\nconst routerOptions = {\n  routes: [active()]\n};\n\nconst paths = pathnames({\n  // ...\n  routerOptions\n});'))))))}}]),t}();t.default=E}}]);