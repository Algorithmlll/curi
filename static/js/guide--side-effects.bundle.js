(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return l.default.createElement(l.default.Fragment,null,l.default.createElement(i.Explanation,null,l.default.createElement("p",null,"Curi side effects are permanent router response handlers that are run after those registered using ",l.default.createElement(a.InlineJS,null,"router.observe()")," and"," ",l.default.createElement(a.InlineJS,null,"router.once()"),"."),l.default.createElement("p",null,"Whenever a new response is generated, all of the side effect functions will be called. They will be given an object with the new"," ",l.default.createElement(a.InlineJS,null,"response"),", object, a ",l.default.createElement(a.InlineJS,null,"navigation")," object with some extra routing data (the navigation action the previous response), and the ",l.default.createElement(a.InlineJS,null,"router")," object.")),l.default.createElement(i.CodeBlock,null,"function logResponse({ response }) {\n  // call your logging API to record the response\n}"),l.default.createElement(o.Section,{title:"Adding Side Effects",id:"adding"},l.default.createElement(i.Explanation,null,l.default.createElement("p",null,"Side effects are provided to your router with the"," ",l.default.createElement(a.InlineJS,null,"sideEffects")," property of the options object. This is an array of observer functions.")),l.default.createElement(i.CodeBlock,null,"const router = curi(history, routes, {\n  sideEffects: [logResponse, updateTitle]\n});"),l.default.createElement(i.Explanation,null,l.default.createElement("p",null,"Side effects are always run after observers registered using"," ",l.default.createElement(a.InlineJS,null,"router.observe()")," and ",l.default.createElement(a.InlineJS,null,"router.once()"),". Because those forms of response handler registration are primarily used for rendering the application, this means that the side effects will be called after the application has re-rendered.")),l.default.createElement(i.CodeBlock,null,"const router = curi(history, routes, {\n  sideEffects: [logResponse]\n});\n\nconst render = () => {\n  // render the app\n};\n\nrouter.observe(render);\n\n// whenever there is a response, render will be\n// called before logResponse"),l.default.createElement(o.Subsection,{title:"Official Side Effects",id:"official"},l.default.createElement(i.Explanation,null,l.default.createElement("p",null,'Curi has two "official" side effect packages:'),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement(r.Link,{to:"Package",params:{package:"side-effect-title"}},"@curi/side-effect-title")),l.default.createElement("li",null,l.default.createElement(r.Link,{to:"Package",params:{package:"side-effect-scroll"}},"@curi/side-effect-scroll")))),l.default.createElement(i.CodeBlock,null,'import titleEffect from "@curi/side-effect-title";\nimport scrollEffect from "@curi/side-effect-scroll";\n\nconst router = curi(history, routes, {\n  sideEffect: [titleEffect(), scrollEffect()]\n});'))),l.default.createElement(o.Section,{title:"Creating Side Effects",id:"creating"},l.default.createElement(i.Explanation,null,l.default.createElement("p",null,'When creating your own side effect, you can write a regular function or a side effect "factory".')),l.default.createElement(i.CodeBlock,null,"function mySideEffect({ response, navigation }) {\n  console.log('Navigating to', response.location);\n  console.log('Navigation action:', navigation.action);\n}\n\nconst router = curi(history, routes, {\n  sideEffects: [mySideEffect]\n});"),l.default.createElement(i.Explanation,null,l.default.createElement("p",null,"A side effect factory lets create a more customizable side effect.")),l.default.createElement(i.CodeBlock,null,"function AnalyticsLogger(options) {\n  // do some setup with the provided options\n  const logger = setupMyLogger(options);\n\n  // and return the actual side effect function\n  return sideEffect({ response }) {\n    logger(response);\n  }\n}"),l.default.createElement(i.Explanation,null,l.default.createElement("p",null,"You may want to review the"," ",l.default.createElement(r.Link,{to:"Guide",params:{slug:"responses"},hash:"response-properties"},"response properties")," ","to know which properties you should expect a response to have."))))};var l=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(1),a=n(6),o=n(10),i=n(7)}}]);