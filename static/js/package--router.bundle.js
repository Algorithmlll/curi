(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=d(n(0)),a=n(1),r=d(n(20)),u=d(n(21)),o=n(6),i=n(10),c=n(7),s=n(11);function d(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,p(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,l.default.PureComponent),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(t,[{key:"render",value:function(){return l.default.createElement(l.default.Fragment,null,l.default.createElement(u.default,null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"@curi/router")," package is used to create a router."))),l.default.createElement(r.default,null,l.default.createElement(i.Section,{title:"curi",id:"curi"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"curi")," export is a function to create a router. It has two required arguments: a ",l.default.createElement(o.InlineJS,null,"history")," object and a"," ",l.default.createElement(o.InlineJS,null,"routes")," array, and an optional third argument: an"," ",l.default.createElement(o.InlineJS,null,"options")," object.")),l.default.createElement(c.CodeBlock,null,"import { curi } from '@curi/router';\n\nconst router = curi(history, routes, options);"),l.default.createElement(i.Section,{tag:"h4",title:"Arguments",id:"arguments"},l.default.createElement(i.Subsection,{tag:"h5",title:"history",id:"history"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"A ",l.default.createElement("a",{href:"https://github.com/pshrmn/hickory"},"Hickory")," ","history object that will power navigation within the application. The"," ",l.default.createElement(a.Link,{to:"Guide",params:{slug:"creating-a-router"},hash:"history-object"},"Creating a Router guide")," ","provides more information on how to choose which history type is right for an application.")),l.default.createElement(c.CodeBlock,{lang:"jsx"},'import Browser from "@hickory/browser";\n\nconst history = Browser();\nconst router = curi(history, routes);')),l.default.createElement(i.Subsection,{tag:"h5",title:"routes",id:"routes"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"An array of"," ",l.default.createElement(a.Link,{to:"Guide",params:{slug:"routes"}},"route")," ","objects for all valid routes in the application.")),l.default.createElement(c.CodeBlock,{lang:"jsx"},'const routes = [\n  { name: "Home", path: "" },\n  { name: "About", path: "about" }\n];\n\nconst router = curi(history, routes);')),l.default.createElement(i.Subsection,{tag:"h5",title:"options",id:"options"},l.default.createElement("p",null,"An optional object with additional properties that can be passed to the router."),l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"route")," - An array of"," ",l.default.createElement(a.Link,{to:"Guide",params:{slug:"route-interactions"}},"route interactions"),". These are functions for interacting with routes based on their ",l.default.createElement(o.InlineJS,null,"name"),"."),l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"pathname")," interaction is included by default; any other interactions are provided through this array.")),l.default.createElement(c.CodeBlock,null,'import active from "@curi/route-active";\nimport ancestors from "@curi/route-ancestors";\n\nconst routes = [{ name: "Home", path: "" }];\n\nconst router = curi(history, routes, {\n  route: [active(), ancestors()]\n});'),l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"Route interactions are called via the router's"," ",l.default.createElement(o.InlineJS,null,"route")," object.")),l.default.createElement(c.CodeBlock,null,'router.route.active("Home");\n// returns true when location.pathname = "/"\n\nrouter.route.pathname("Home");\n// returns "/"')),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"sideEffects")," - An array of"," ",l.default.createElement(a.Link,{to:"Guide",params:{slug:"side-effects"}},"side effect")," ","objects."),l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"property"),l.default.createElement("th",null,"description"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"effect"),l.default.createElement("td",null,"An observer that will be called whenever a response is generated.")),l.default.createElement("tr",null,l.default.createElement("td",null,"after"),l.default.createElement("td",null,"(default ",l.default.createElement(o.InlineJS,null,"false"),") controls whether the side effect is called before or after non-side effect observers."))))),l.default.createElement(c.CodeBlock,null,'import scroll from "@curi/side-effect-scroll";\n\nconst router = curi(history, routes, {\n  sideEffects: [scroll()]\n});')),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"emitRedirects")," - When ",l.default.createElement(o.InlineJS,null,"false")," ","(default is ",l.default.createElement(o.InlineJS,null,"true"),"), response objects with the"," ",l.default.createElement(o.InlineJS,null,"redirectTo")," property"," ",l.default.createElement("strong",null,"will not be emitted")," to observers. This can be useful for avoiding an extra render, but should not be used on the server.")),l.default.createElement(c.CodeBlock,null,'const routes = [\n  {\n    name: "Old",\n    path: "old/:id",\n    response({ params }) {\n      // setup a redirect to the "New" route\n      return {\n        redirectTo: {\n          name: "New",\n          params\n        }\n      };\n    }\n  },\n  {\n    name: "New",\n    path: "new/:id"\n  }\n];\n\nconst router = curi(history, routes, {\n  emitRedirects: false                 \n});\n// navigating to "/old/2" will automatically redirect\n// to "/new/2" without emitting a response')),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"automaticRedirects")," - When the initially matched route is synchronous and redirects, the router's automatic redirect will occur before any response handlers (registered with ",l.default.createElement(o.InlineJS,null,"once()")," or"," ",l.default.createElement(o.InlineJS,null,"observer()"),") are called. This means that they will be called with the response for the location that was redirected to instead of the initial location. This is fine on the client side, but causes issues with server side rendering. When"," ",l.default.createElement(o.InlineJS,null,"automaticRedirects")," is ",l.default.createElement(o.InlineJS,null,"false"),", the automatic redirect will not happen."," ",l.default.createElement("strong",null,"Using ",l.default.createElement(o.InlineJS,null,"automaticRedirects = false")," is recommend for server side rendering."))),l.default.createElement(c.CodeBlock,null,'const routes = [\n  {\n    name: "Old",\n    path: "old/:id",\n    response({ params }) {\n      // setup a redirect to the "New" route\n      return {\n        redirectTo: {\n          name: "New",\n          params\n        }\n      };\n    }\n  },\n  {\n    name: "New",\n    path: "new/:id"\n  }\n];\nconst history = InMemory({ locations: ["old/1" ]});\nconst router = curi(history, routes, {\n  automaticRedirects: false                 \n});\nrouter.once(({ response }) => {\n  // response = { name: "Old", ... }\n});')),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"pathnameOptions")," - Curi uses"," ",l.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp"},l.default.createElement(o.InlineJS,null,"path-to-regexp"))," ","to handle route matching and pathname generation."," ",l.default.createElement(o.InlineJS,null,"path-to-regexp")," can take a custom"," ",l.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp#compile-reverse-path-to-regexp"},l.default.createElement(o.InlineJS,null,"encode"))," ","function for creating pathnames, which you can specify with this options."," ",l.default.createElement("strong",null,"You most likely will never need to use this."))),l.default.createElement(c.CodeBlock,null,"const router = curi(history, routes, {\n  pathOptions: {\n    encode: (value, token) => { /* ... */ }\n  }\n});"))))),l.default.createElement(i.Section,{tag:"h4",title:"Router Properties",id:"properties"},l.default.createElement("p",null,"The router has a number of properties for you to use when rendering your application."),l.default.createElement(i.Subsection,{tag:"h5",title:"navigate(details)",id:"navigate"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"navigate()")," method is used to navigate programmatically. It takes a ",l.default.createElement(o.InlineJS,null,"details")," object with the details of where you want to navigate to as well as the"," ",l.default.createElement(o.InlineJS,null,"method")," of navigation."),l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"property"),l.default.createElement("th",null,"description"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"name"),l.default.createElement("td",null,"The name of the route to navigate to")),l.default.createElement("tr",null,l.default.createElement("td",null,"params"),l.default.createElement("td",null,"An object of any route params for the named route (and any of its ancestors that require params).")),l.default.createElement("tr",null,l.default.createElement("td",null,"hash"),l.default.createElement("td",null,"The hash string of the location to navigate to.")),l.default.createElement("tr",null,l.default.createElement("td",null,"query"),l.default.createElement("td",null,"The query value of the location to navigate to.")),l.default.createElement("tr",null,l.default.createElement("td",null,"state"),l.default.createElement("td",null,"Any serializable state to attach to the location.")),l.default.createElement("tr",null,l.default.createElement("td",null,"method"),l.default.createElement("td",null,"How to navigate. ",l.default.createElement(o.InlineJS,null,'"PUSH"')," appends the new location after the current one. ",l.default.createElement(o.InlineJS,null,'"REPLACE"')," ","replaces the current location. ",l.default.createElement(o.InlineJS,null,'"ANCHOR"')," is the default method and acts like clicking a link. This behavior is a mix of ",l.default.createElement(o.InlineJS,null,'"PUSH"')," and"," ",l.default.createElement(o.InlineJS,null,'"REPLACE"')," where the current location is replaced if the new location has the exact same URL.")),l.default.createElement("tr",null,l.default.createElement("td",null,"finished"),l.default.createElement("td",null,"A function to call once the navigation has finished.")),l.default.createElement("tr",null,l.default.createElement("td",null,"cancelled"),l.default.createElement("td",null,"A function to call if the navigation is superseded by another navigation."))))),l.default.createElement(c.CodeBlock,null,'const routes = [\n  {\n    name: "Album",\n    path: "photos/:albumID",\n    children: [\n      { name: "Photo", path: ":photoID" }\n    ]\n  },\n  // ...\n];\nconst router = curi(history, routes);\n\nrouter.navigate({\n  name: "Photo",\n  params: { albumID: 123, photoID: 456 }\n});\n// navigates to "/photos/123/456"\n// using default "ANCHOR" method')),l.default.createElement(i.Subsection,{tag:"h5",title:"once(fn, options)",id:"once"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"once()")," method takes a response handler function. If a response already exists, the function will be called immediately. Otherwise, the function will be called once a new response is created. The"," ",l.default.createElement(o.InlineJS,null,"{ initial: false }")," option can be used to prevent an immediate call even if a response already exists."),l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"property"),l.default.createElement("th",null,"description"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"response"),l.default.createElement("td",null,"The generated response object.")),l.default.createElement("tr",null,l.default.createElement("td",null,"navigation"),l.default.createElement("td",null,"The navigation's ",l.default.createElement(o.InlineJS,null,"action")," (",l.default.createElement(o.InlineJS,null,"PUSH"),","," ",l.default.createElement(o.InlineJS,null,"REPLACE"),", or ",l.default.createElement(o.InlineJS,null,"POP"),") and the"," ",l.default.createElement(o.InlineJS,null,"previous")," response object.")),l.default.createElement("tr",null,l.default.createElement("td",null,"router"),l.default.createElement("td",null,"The Curi router")))),l.default.createElement("p",null,"When a matched route is async (it has ",l.default.createElement(o.InlineJS,null,"resolve")," ","functions), a response will not be created until the async function(s) have resolved.")),l.default.createElement(c.CodeBlock,null,"router.once(({ response }) => {\n  // render the application based on the response\n});"),l.default.createElement(i.Subsection,{tag:"h6",title:"options",id:"once-options"},l.default.createElement(c.Explanation,null,l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"option"),l.default.createElement("th",null,"default"),l.default.createElement("th",null,"description"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"initial"),l.default.createElement("td",null,"true"),l.default.createElement("td",null,"When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted."))))),l.default.createElement(c.CodeBlock,null,"router.once(responseHandler, {\n  initial: false\n});"))),l.default.createElement(i.Subsection,{tag:"h5",title:"observe(fn, options)",id:"observe"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"observe()")," method takes a response handler function. The response handler will be called every time a new response is emitted (and it a response already exists, the function will be called immediately). The"," ",l.default.createElement(o.InlineJS,null,"{ initial: false }")," option can be used to prevent an immediate call even if a response already exists."),l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"property"),l.default.createElement("th",null,"description"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"response"),l.default.createElement("td",null,"The generated response object.")),l.default.createElement("tr",null,l.default.createElement("td",null,"navigation"),l.default.createElement("td",null,"The navigation's ",l.default.createElement(o.InlineJS,null,"action")," (",l.default.createElement(o.InlineJS,null,"PUSH"),","," ",l.default.createElement(o.InlineJS,null,"REPLACE"),", or ",l.default.createElement(o.InlineJS,null,"POP"),") and the"," ",l.default.createElement(o.InlineJS,null,"previous")," response object.")),l.default.createElement("tr",null,l.default.createElement("td",null,"router"),l.default.createElement("td",null,"The Curi router")))),l.default.createElement("p",null,"When a matched route is async (it has ",l.default.createElement(o.InlineJS,null,"resolve")," ","functions), a response will not be created until the async function(s) have resolved.")),l.default.createElement(c.CodeBlock,null,"router.observe(({ response }) => {\n  // render the application based on the response\n});"),l.default.createElement(i.Subsection,{tag:"h6",title:"options",id:"observe-options"},l.default.createElement(c.Explanation,null,l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"option"),l.default.createElement("th",null,"default"),l.default.createElement("th",null,"description"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"initial"),l.default.createElement("td",null,"true"),l.default.createElement("td",null,"When true, the function will be called immediately if a response exists. When false, the response function will not be called until the next response is emitted."))))),l.default.createElement(c.CodeBlock,null,"router.observe(responseHandler, {\n  initial: false\n});"),l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"observe()")," returns a function to stop calling the response handler function for new responses.")),l.default.createElement(c.CodeBlock,null,"const stopObserving = router.observe(\n  () => {...}\n);\n// the router will now call the observer for all responses\n\nstopObserving();\n// the router no longer calls the observer"))),l.default.createElement(i.Subsection,{tag:"h5",title:"current()",id:"current-property"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"router.current()")," method returns the current"," ",l.default.createElement(o.InlineJS,null,"response")," and ",l.default.createElement(o.InlineJS,null,"navigation")," objects."),l.default.createElement(s.Note,null,"If you call ",l.default.createElement(o.InlineJS,null,"router.current()")," before the initial response has been emitted, the ",l.default.createElement(o.InlineJS,null,"response")," and"," ",l.default.createElement(o.InlineJS,null,"navigation")," properties will be ",l.default.createElement(o.InlineJS,null,"null"),".")),l.default.createElement(c.CodeBlock,null,"const router = curi(history, routes);\nconst tooSoon = router.current();\n// tooSoon.response === null\n// tooSoon.navigation === null\n\nrouter.once(({ response, navigation }) => {\n  const perfect = router.current();\n  // perfect.response === response\n  // perfect.navigation === navigation\n});")),l.default.createElement(i.Subsection,{tag:"h5",title:"route",id:"router-route"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The router's"," ",l.default.createElement(a.Link,{to:"Guide",params:{slug:"route-interactions"}},"route interactions")," ","are accessed through the ",l.default.createElement(o.InlineJS,null,"route")," property. These are used to interact with routes using their names.")),l.default.createElement(i.Subsection,{tag:"h6",title:"pathname",id:"pathname-interaction"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"Curi includes one built-in interaction,"," ",l.default.createElement(o.InlineJS,null,"pathname"),", which generates location pathnames using the name of a route and an optional object containing any necessary params.")),l.default.createElement(c.CodeBlock,null,"const routes = [\n  { name: 'User', path: 'user/:id' }\n];\nconst router = curi(history, routes);\nconst userPathname = router.route.pathname(\n  'User',\n  { id: '12345' }\n);\n// userPathname === '/user/12345'"))),l.default.createElement(i.Subsection,{tag:"h5",title:"refresh()",id:"refresh-property"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"refresh()")," function takes an array of new routes, which will replace the existing routes. The router will emit a new response based on the current location."),l.default.createElement("p",null,"The function can be called without any arguments and it will emit a response using the existing routes.")),l.default.createElement(c.CodeBlock,null,"const oldRoutes = [...];\nconst newRoutes = [...];\n\nconst router = curi(history, oldRoutes);\n// generates responses using old routes\n\nrouter.refresh(newRoutes);\n// generates responses using new routes")),l.default.createElement(i.Subsection,{tag:"h5",title:"history",id:"history-property"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The route's history object, in case you need to interact directly with that."))))),l.default.createElement(i.Section,{title:"once",id:"router-once"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"once")," takes a function as its argument and returns a new function. The first time the returned function is called, it will call the function passed to ",l.default.createElement(o.InlineJS,null,"once()"),". Every call after that will re-use the result from the first call."),l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"once()")," function is useful for any async route"," ",l.default.createElement(o.InlineJS,null,"resolve")," functions that only need to be called once."),l.default.createElement(s.Note,null,"This will not work for functions whose result depends on variables that will change for a route (i.e. loading data based on route params).")),l.default.createElement(c.CodeBlock,null,'import { once } from "@curi/router";\n            \nconst routes = [\n  {\n    name: "Menu",\n    path: "menu",\n    resolve: {\n      // this function will be called every time the user\n      // navigates to the "Menu" route\n      nonCached: () => api.getItems(),\n      // this function is only called the first time the\n      // user navigates to the "Menu" route\n      cached: once(() => api.getItems)\n    }\n  }\n];')),l.default.createElement(i.Section,{title:"pathname",id:"pathname"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"Curi automatically includes a ",l.default.createElement(o.InlineJS,null,"pathname")," route interaction for you to generate URL pathnames for routes. If you need to access this same ability outside of a router, you can import the ",l.default.createElement(o.InlineJS,null,"pathname")," route interaction.")),l.default.createElement(c.CodeBlock,null,'import { pathname } from "@curi/router";\n\nconst pathnameGenerator = pathname();\n// register routes\npathnameGenerator.register({ name: "Yo", path: "yo/:name" });\n// generate pathname\nconst path = pathnameGenerator.get("Yo", { name: "joey" })\n// path = "/yo/joey"')),l.default.createElement(i.Section,{title:"Route properties",id:"route-properties"},l.default.createElement(i.Subsection,{title:"route.name",id:"name"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"A string, this must be unique for every route.")),l.default.createElement(c.CodeBlock,null,"[\n  { name: 'Home' },\n  { name: 'Album' },\n  { name: 'Not Found' }\n];")),l.default.createElement(i.Subsection,{title:"route.path",id:"path"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"A string pattern describing what the route matches. Whenever the router receives a new location, it will loop through the known route paths to determine which one matches the new location's ",l.default.createElement(o.InlineJS,null,"pathname")," the best."),l.default.createElement("p",null,"Curi uses",l.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp#parameters"},l.default.createElement(o.InlineJS,null,"path-to-regexp"))," ","for paths, which enables routes to have",l.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp#parameters"},"path parameters"),". When a route with parameters matches a location, the parameters will be be parsed from the location's"," ",l.default.createElement(o.InlineJS,null,"pathname"),"."),l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"path")," strings should ",l.default.createElement("strong",null,"not")," have a leading slash."),l.default.createElement(s.Warning,null,l.default.createElement(o.InlineJS,null,"path-to-regexp")," supports arrays and RegExps, but Curi only supports string paths. This is because Curi uses"," ",l.default.createElement(o.InlineJS,null,"path-to-regexp")," to generate pathnames from a route's name, which it can only do from strings paths.")),l.default.createElement(c.CodeBlock,null,"[\n  { name: 'Home', path: '' },\n  // when the pathname is a/yo, albumID = \"yo\"\n  { name: 'Album', path: 'a/:albumID' },\n  // the path (.*) matches every pathname\n  { name: 'Not Found', path: '(.*)' }\n];\n\n// don't include a leading forward slash\n// { name: 'Home', path: '/' }")),l.default.createElement(i.Subsection,{title:"route.resolve",id:"resolve"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"The ",l.default.createElement(o.InlineJS,null,"resolve")," object groups async functions that will be called when the route matches."),l.default.createElement("p",null,"A route with any ",l.default.createElement(o.InlineJS,null,"resolve")," functions is asynchronous, while one with no ",l.default.createElement(o.InlineJS,null,"resolve")," functions is synchronous. You can read more about this is the"," ",l.default.createElement(a.Link,{to:"Guide",params:{slug:"sync-or-async"}},"sync or async")," ","guide."),l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"resolve")," functions are called every time that a route matches the current location."),l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"resolve")," functions will be passed an object with the matched route properties: ",l.default.createElement(o.InlineJS,null,"name"),", ",l.default.createElement(o.InlineJS,null,"params"),","," ",l.default.createElement(o.InlineJS,null,"partials"),", and ",l.default.createElement(o.InlineJS,null,"location"),"."),l.default.createElement(s.Note,null,"You should not perform side effects (e.g. passing the loaded data to a Redux store) in ",l.default.createElement(o.InlineJS,null,"resolve")," functions because it is possible that navigating to the route might be cancelled. If you must perform side effects for a route, you should do so in ",l.default.createElement(o.InlineJS,null,"response()"),".")),l.default.createElement(c.CodeBlock,null,"const about = {\n  name: 'About',\n  path: 'about',\n  resolve: {\n    body: () => import('./components/About'),\n    data: () => fetch('/api/about')\n  }\n};")),l.default.createElement(i.Subsection,{title:"route.response()",id:"response"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,'A function for modifying the response object. This returns an object whose properties will be merged with the matched route properties to create the "final" response.'),l.default.createElement("p",null,"Only valid properties will be merged onto the response; everything else will be ignored. The valid properties are:")),l.default.createElement("ol",null,l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"body")," - This is usually what you will render.")),l.default.createElement(c.CodeBlock,null,'import Home from "./components/Home";\nconst routes = [\n  {\n    name: "Home",\n    path: "",\n    response() {\n      return { body: Home };\n    }\n  },\n  // ...\n];\n// response = { body: Home, ... }')),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"status")," - A number. This is useful for redirects or locations caught by your catch-all route while using server-side rendering. The default status value is"," ",l.default.createElement(o.InlineJS,null,"200"),".")),l.default.createElement(c.CodeBlock,null,"{\n  response(){\n    return {\n      status: 301,\n      redirectTo: {...}\n    };\n  }\n}\n// response = { status: 301, ... }")),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"error")," - If an error occurs with the route's"," ",l.default.createElement(o.InlineJS,null,"resolve")," methods, you might want to attach an error message to the response.")),l.default.createElement(c.CodeBlock,null,'{\n  resolve: {\n    test: () => Promise.reject("woops!")\n  },\n  response({ error }) {\n    return { error };\n  }\n}\n// response = { error: "woops!", ... }')),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"data")," - Anything you want it to be.")),l.default.createElement(c.CodeBlock,null,"{\n  response() {\n    return { data: Math.random() };\n  }\n}\n// response = { data: 0.8651606708109429, ... }")),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"title")," - This can be used with"," ",l.default.createElement(o.InlineJS,null,"@curi/side-effect-title")," to update the page's"," ",l.default.createElement(o.InlineJS,null,"document.title"),".")),l.default.createElement(c.CodeBlock,null,'{\n  response({ params }) {\n    return { title: `User ${params.id}` };\n  }\n}\n// when visting /user/2\n// response = { title: "User 2", ... }')),l.default.createElement("li",null,l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"redirectTo")," - An object with the ",l.default.createElement(o.InlineJS,null,"name")," ","of the route to redirect to, ",l.default.createElement(o.InlineJS,null,"params")," (if required), and optional ",l.default.createElement(o.InlineJS,null,"hash"),", ",l.default.createElement(o.InlineJS,null,"query"),", and ",l.default.createElement(o.InlineJS,null,"state")," properties."),l.default.createElement("p",null,"The other values are copied directly, but"," ",l.default.createElement(o.InlineJS,null,"redirectTo")," will be turned into a location object using the object's ",l.default.createElement(o.InlineJS,null,"name")," (and"," ",l.default.createElement(o.InlineJS,null,"params")," if required).")),l.default.createElement(c.CodeBlock,null,'[\n  {\n    name: "Old Photo",\n    path: "photo/:id",\n    response({ params }) {\n      return {\n        redirectTo: { name: "Photo", params }\n      };\n    }\n  },\n  {\n    name: "New Photo",\n    path: "p/:id"\n  }\n]\n// when the user navigates to /photo/1:\n// response = { redirectTo: { pathname: "/p/1", ... } }'))),l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"This function is passed an object with a number of properties that can be useful for modifying the response.")),l.default.createElement(c.CodeBlock,null,"{\n  response: ({ match, resolved }) => {\n    // ...\n  }\n}"),l.default.createElement("ul",null,l.default.createElement(i.Subsection,{wrapper:"li",title:"match",id:"response-match"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"An object with the matched route properties of a response."),l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"property"),l.default.createElement("th",null,"description"))),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,"name"),l.default.createElement("td",null,"the name of the matched route")),l.default.createElement("tr",null,l.default.createElement("td",null,"params"),l.default.createElement("td",null,"route parameters parsed from the location")),l.default.createElement("tr",null,l.default.createElement("td",null,"partials"),l.default.createElement("td",null,"the names of any ancestor routes of the matched route")),l.default.createElement("tr",null,l.default.createElement("td",null,"location"),l.default.createElement("td",null,"the location that was used to match the route")),l.default.createElement("tr",null,l.default.createElement("td",null,"key"),l.default.createElement("td",null,"the location's ",l.default.createElement(o.InlineJS,null,"key"),", which is a unique identifier")))))),l.default.createElement(i.Subsection,{wrapper:"li",title:"resolved",id:"response-resolved"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"resolved")," is an object with the values resolved by the ",l.default.createElement(o.InlineJS,null,"resolve")," functions."),l.default.createElement("p",null,"If a route isn't async, ",l.default.createElement(o.InlineJS,null,"resolved")," will be"," ",l.default.createElement(o.InlineJS,null,"null"),".")),l.default.createElement(c.CodeBlock,null,"// attach resolved data to the response\nconst user = {\n  name: 'User',\n  path: ':id',\n  resolve: {\n    data: ({ params, location }) => (\n      fetch(`/api/users/${params.id}`)\n        .then(resp => JSON.parse(resp))\n    ),\n  },\n  response: ({ resolved }) => {\n    return {\n      data: resolved.data\n    };\n  }\n}")),l.default.createElement(i.Subsection,{wrapper:"li",title:"error",id:"response-error"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,l.default.createElement(o.InlineJS,null,"error")," is an error thrown by one of the route's"," ",l.default.createElement(o.InlineJS,null,"resolve")," functions.")),l.default.createElement(c.CodeBlock,null,"// check if any of a route's resolve functions threw\nconst user = {\n  name: 'User',\n  path: ':id',\n  resolve: {\n    data: ({ params, location }) => (\n      fetch(`/api/users/${params.id}`)\n        .then(resp => JSON.parse(resp))\n    ),\n  },\n  response: ({ error, resolved }) => {\n    if (error) {\n      return { error };\n    }\n    return {\n      data: resolved.data\n    };\n  }\n}")))),l.default.createElement(i.Subsection,{title:"children",id:"children"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"An optional array of route objects for creating nested routes. Any child routes will be matched relative to their parent route's ",l.default.createElement(o.InlineJS,null,"path"),". This means that if a parent route's"," ",l.default.createElement(o.InlineJS,null,"path")," string is ",l.default.createElement(o.InlineJS,null,"'one'")," and a child route's"," ",l.default.createElement(o.InlineJS,null,"path")," string is ",l.default.createElement(o.InlineJS,null,"'two'"),", the child will match when the pathname is ",l.default.createElement(o.InlineJS,null,"'one/two'"),".")),l.default.createElement(c.CodeBlock,null,"// '/a/Coloring+Book/All+Night' will be matched\n// by the \"Song\" route, with the params\n// { album: 'Coloring+Book', title: 'All+Night' }\n{\n  name: 'Album',\n  path: 'a/:album',\n  children: [\n    {\n      name: 'Song',\n      path: ':title'\n    }\n  ]\n}")),l.default.createElement(i.Subsection,{title:"params",id:"params"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"When ",l.default.createElement(o.InlineJS,null,"path-to-regexp")," matches your paths, all parameters are extracted as strings. If you prefer for some route params to be other types, you can provide functions to transform params using the ",l.default.createElement(o.InlineJS,null,"route.params")," object."),l.default.createElement("p",null,"Properties of the ",l.default.createElement(o.InlineJS,null,"route.params")," object are the names of params to be parsed. The paired value should be a function that takes a string (the value from the ",l.default.createElement(o.InlineJS,null,"pathname"),") and returns a new value (transformed using the function you provide).")),l.default.createElement(c.CodeBlock,null,"const routes = [\n  {\n    name: 'Number',\n    path: 'number/:num',\n    params: {\n      num: n => parseInt(n, 10)\n    }\n  }\n]\n// when the user visits /number/1,\n// response.params will be { num: 1 }\n// instead of { num: \"1\" }")),l.default.createElement(i.Subsection,{title:"pathOptions",id:"pathOptions"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"If you need to provide different path options than"," ",l.default.createElement("a",{href:"https://github.com/pillarjs/path-to-regexp#usage"},"the defaults")," ","used by ",l.default.createElement(o.InlineJS,null,"path-to-regexp"),", you can provide them with a"," ",l.default.createElement(o.InlineJS,null,"pathOptions")," object."),l.default.createElement(s.Note,null,"If a route has a children array property, it will"," ",l.default.createElement("strong",null,"always")," have the ",l.default.createElement(o.InlineJS,null,"end")," path option set to false."))),l.default.createElement(i.Subsection,{title:"extra",id:"extra"},l.default.createElement(c.Explanation,null,l.default.createElement("p",null,"If you have any additional properties that you want attached to a route, use the ",l.default.createElement(o.InlineJS,null,"extra")," property. You will be able to use ",l.default.createElement(o.InlineJS,null,"route.extra")," in any custom route interactions.")),l.default.createElement(c.CodeBlock,null,"const routes = [\n  {\n    name: 'A Route',\n    path: 'a-route',\n    extra: {\n      transition: 'fade'\n    }\n  },\n  {\n    name: 'B Route',\n    path: 'b-route',\n    extra: {\n      enter: 'slide-right'\n    }\n  }\n];")))))}}]),t}();t.default=b}}]);